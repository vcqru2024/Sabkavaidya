var $2sxcInpage;(()=>{var t,e,n={98:function(t,e){var n="undefined"!=typeof self?self:this,o=function(){function t(){this.fetch=!1,this.DOMException=n.DOMException}return t.prototype=n,new t}();!function(t){!function(e){var n="URLSearchParams"in t,o="Symbol"in t&&"iterator"in Symbol,r="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,a="ArrayBuffer"in t;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&s.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return o&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function g(t){var e=new FileReader,n=h(e);return e.readAsArrayBuffer(t),n}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:r&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&r&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=v(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,n,o=f(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,n=h(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),o=0;o<e.length;o++)n[o]=String.fromCharCode(e[o]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=u(t),e=l(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},d.prototype.delete=function(t){delete this.map[u(t)]},d.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},d.prototype.set=function(t,e){this.map[u(t)]=l(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),p(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),p(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),p(t)},o&&(d.prototype[Symbol.iterator]=d.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t,e){var n,o,r=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(o=(n=e.method||this.method||"GET").toUpperCase(),m.indexOf(o)>-1?o:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),o=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(r))}})),e}function O(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},O.error=function(){var t=new O(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];O.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new O(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function A(t,n){return new Promise((function(o,i){var a=new b(t,n);if(a.signal&&a.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),o=n.shift().trim();if(o){var r=n.join(":").trim();e.append(o,r)}})),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var r="response"in s?s.response:s.responseText;o(new O(r,n))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&r&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",c)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}A.polyfill=!0,t.fetch||(t.fetch=A,t.Headers=d,t.Request=b,t.Response=O),e.Headers=d,e.Request=b,e.Response=O,e.fetch=A,Object.defineProperty(e,"__esModule",{value:!0})}({})}(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var r=o;(e=r.fetch).default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,t.exports=e},34:(t,e)=>{"use strict";var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},o={selectorAttr:"data-i18n",targetAttr:"i18n-target",optionsAttr:"i18n-options",useOptionsAttr:!1,parseDefaultValueFromContent:!0,document};e.default={init:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=n({},o,e);var r=function(t,o){return e.parseDefaultValueFromContent?n({},t,{defaultValue:o}):t};function i(e,n,o){var i="text";if(0==n.indexOf("[")){var a=n.split("]");n=a[1],i=a[0].substr(1,a[0].length-1)}if(n=n.indexOf(";")==n.length-1?n.substr(0,n.length-2):n,"html"===i)e.innerHTML=t.t(n,r(o,e.innerHTML));else if("text"===i)e.textContent=t.t(n,r(o,e.textContent));else if("prepend"===i){var s=e.innerHTML.indexOf("<loc-i18n>"),c=e.innerHTML.indexOf("</loc-i18n>")+11;s>-1&&c>6&&(e.innerHTML=[e.innerHTML.substring(0,s),e.innerHTML.slice(c)].join("")),e.innerHTML=["<loc-i18n>",t.t(n,r(o,e.innerHTML)),"</loc-i18n>",e.innerHTML].join("")}else if("append"===i){var u=e.innerHTML.indexOf("<loc-i18n>"),l=e.innerHTML.indexOf("</loc-i18n>")+11;u>-1&&l>6&&(e.innerHTML=[e.innerHTML.substring(0,u),e.innerHTML.slice(l)].join("")),e.innerHTML=[e.innerHTML,"<loc-i18n>",t.t(n,r(o,e.innerHTML),"</loc-i18n>")].join("")}else if(0===i.indexOf("data-")){var p=i.substr("data-".length),d=t.t(n,r(o,e.getAttribute(p)));e.setAttribute(p,d),e.setAttribute(i,d)}else e.setAttribute(i,t.t(n,r(o,e.getAttribute(i))))}function a(t){return JSON.parse(t.replace(/:\s*"([^"]*)"/g,(function(t,e){return': "'+e.replace(/:/g,"@colon@")+'"'})).replace(/:\s*'([^']*)'/g,(function(t,e){return': "'+e.replace(/:/g,"@colon@")+'"'})).replace(/(['"])?([a-z0-9A-Z_]+)(['"])?\s*:/g,'"$2": ').replace(/@colon@/g,":"))}function s(t,o){var r=t.getAttribute(e.selectorAttr);if(r){var s=t,c=t.getAttribute(e.targetAttr);if(null!=c&&(s=t.querySelector(c)||t),o||!0!==e.useOptionsAttr||(o=a(t.getAttribute(e.optionsAttr)||"{}")),o=o||{},r.indexOf(";")>=0)for(var u=r.split(";"),l=0,p=u.length;l<p;l++)""!=u[l]&&i(s,u[l],o);else i(s,r,o);if(!0===e.useOptionsAttr){var d={};delete(d=n({clone:d},o)).lng,t.setAttribute(e.optionsAttr,JSON.stringify(d))}}}function c(t,n){for(var o=e.document.querySelectorAll(t),r=0;r<o.length;r++){for(var i=o[r],a=i.querySelectorAll("["+e.selectorAttr+"]"),c=a.length-1;c>-1;c--)s(a[c],n);s(i,n)}}return c}}},837:(t,e,n)=>{t.exports=n(34).default},936:(t,e,n)=>{"use strict";n.r(e)},144:(t,e,n)=>{"use strict";n.r(e)},249:function(t,e,n){var o;!function(r,i){void 0===(o=function(){return function(t,e){"use strict";function n(n){if(this.hasDeviceMotion="ondevicemotion"in t,this.options={threshold:15,timeout:1e3},"object"==typeof n)for(var o in n)n.hasOwnProperty(o)&&(this.options[o]=n[o]);if(this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null,"function"==typeof e.CustomEvent)this.event=new e.CustomEvent("shake",{bubbles:!0,cancelable:!0});else{if("function"!=typeof e.createEvent)return!1;this.event=e.createEvent("Event"),this.event.initEvent("shake",!0,!0)}}return n.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null},n.prototype.start=function(){this.reset(),this.hasDeviceMotion&&t.addEventListener("devicemotion",this,!1)},n.prototype.stop=function(){this.hasDeviceMotion&&t.removeEventListener("devicemotion",this,!1),this.reset()},n.prototype.devicemotion=function(e){var n,o,r,i=e.accelerationIncludingGravity;if(null===this.lastX&&null===this.lastY&&null===this.lastZ)return this.lastX=i.x,this.lastY=i.y,void(this.lastZ=i.z);n=Math.abs(this.lastX-i.x),o=Math.abs(this.lastY-i.y),r=Math.abs(this.lastZ-i.z),(n>this.options.threshold&&o>this.options.threshold||n>this.options.threshold&&r>this.options.threshold||o>this.options.threshold&&r>this.options.threshold)&&(new Date).getTime()-this.lastTime.getTime()>this.options.timeout&&(t.dispatchEvent(this.event),this.lastTime=new Date),this.lastX=i.x,this.lastY=i.y,this.lastZ=i.z},n.prototype.handleEvent=function(t){if("function"==typeof this[t.type])return this[t.type](t)},n}(r,r.document)}.call(e,n,e,t))||(t.exports=o)}("undefined"!=typeof window?window:this)},79:()=>{"use strict";!function(){if(null!=window.$){var t=window.$.fn.attr;window.$.fn.attr=function(){var e=t.apply(this,arguments);return"class"!==arguments[0]||"string"!=typeof e||-1===e.search("DnnModule-2sxc ")?e:e.replace("DnnModule-2sxc ","")+" DnnModule-2sxc"}}}()},154:(t,e,n)=>{var o;if("function"==typeof fetch&&(void 0!==n.g&&n.g.fetch?o=n.g.fetch:"undefined"!=typeof window&&window.fetch&&(o=window.fetch)),"undefined"==typeof window||void 0===window.document){var r=o||n(98);r.default&&(r=r.default),e.default=r,t.exports=e.default}}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={exports:{}};return n[t].call(i.exports,i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"==typeof n.then)return n}var i=Object.create(null);r.r(i);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&o&&n;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>n[t]));return a.default=()=>n,r.d(i,a),i},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{"use strict";function t(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function e(e){return e instanceof t(e).Element||e instanceof Element}function n(e){return e instanceof t(e).HTMLElement||e instanceof HTMLElement}function o(e){return"undefined"!=typeof ShadowRoot&&(e instanceof t(e).ShadowRoot||e instanceof ShadowRoot)}r.r(i),r.d(i,{Actions:()=>us,CmdParHlp:()=>To,CmsEngine:()=>dc,Command:()=>Hn,Commands:()=>qn,ContentListActionParams:()=>Ns,ModifierBase:()=>Jn,ModifierContentBlock:()=>Ma,ModifierDnnModule:()=>Ba,ModifierDnnModuleInternal:()=>qa,PositionCoordinates:()=>Ra,Positioning:()=>Ga,QeSelectors:()=>Za,QuickE:()=>os,QuickEClipboard:()=>Xa,QuickEditConfig:()=>Zn,QuickEditConfigButtons:()=>Yn,QuickEditConfigEnableAuto:()=>Xn,QuickEditConfigRoot:()=>to,QuickEditOverlay:()=>ln,RunParamsHelpers:()=>Us,Selection:()=>Wn,SharedLogic:()=>Vn,SxcCmsReal:()=>Ac,SxcGlobalCms:()=>wc,SxcTools:()=>hn,ToolbarWorkflowManager:()=>bo,WorkflowCommands:()=>Bs,WorkflowHelper:()=>vo,WorkflowPhases:()=>Oo,WorkflowStepCodeArguments:()=>xo,WorkflowStepHelper:()=>Ao,iconPrefix:()=>Nn,tlbI18nPrefix:()=>Bn});var a=Math.max,s=Math.min,c=Math.round;function u(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function l(){return!/^((?!chrome|android).)*safari/i.test(u())}function p(o,r,i){void 0===r&&(r=!1),void 0===i&&(i=!1);var a=o.getBoundingClientRect(),s=1,u=1;r&&n(o)&&(s=o.offsetWidth>0&&c(a.width)/o.offsetWidth||1,u=o.offsetHeight>0&&c(a.height)/o.offsetHeight||1);var p=(e(o)?t(o):window).visualViewport,d=!l()&&i,f=(a.left+(d&&p?p.offsetLeft:0))/s,h=(a.top+(d&&p?p.offsetTop:0))/u,g=a.width/s,v=a.height/u;return{width:g,height:v,top:h,right:f+g,bottom:h+v,left:f,x:f,y:h}}function d(e){var n=t(e);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function f(t){return t?(t.nodeName||"").toLowerCase():null}function h(t){return((e(t)?t.ownerDocument:t.document)||window.document).documentElement}function g(t){return p(h(t)).left+d(t).scrollLeft}function v(e){return t(e).getComputedStyle(e)}function y(t){var e=v(t),n=e.overflow,o=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+o)}function m(e,o,r){void 0===r&&(r=!1);var i,a,s=n(o),u=n(o)&&function(t){var e=t.getBoundingClientRect(),n=c(e.width)/t.offsetWidth||1,o=c(e.height)/t.offsetHeight||1;return 1!==n||1!==o}(o),l=h(o),v=p(e,u,r),m={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(s||!s&&!r)&&(("body"!==f(o)||y(l))&&(m=(i=o)!==t(i)&&n(i)?{scrollLeft:(a=i).scrollLeft,scrollTop:a.scrollTop}:d(i)),n(o)?((b=p(o,!0)).x+=o.clientLeft,b.y+=o.clientTop):l&&(b.x=g(l))),{x:v.left+m.scrollLeft-b.x,y:v.top+m.scrollTop-b.y,width:v.width,height:v.height}}function b(t){var e=p(t),n=t.offsetWidth,o=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:o}}function w(t){return"html"===f(t)?t:t.assignedSlot||t.parentNode||(o(t)?t.host:null)||h(t)}function O(t){return["html","body","#document"].indexOf(f(t))>=0?t.ownerDocument.body:n(t)&&y(t)?t:O(w(t))}function x(e,n){var o;void 0===n&&(n=[]);var r=O(e),i=r===(null==(o=e.ownerDocument)?void 0:o.body),a=t(r),s=i?[a].concat(a.visualViewport||[],y(r)?r:[]):r,c=n.concat(s);return i?c:c.concat(x(w(s)))}function A(t){return["table","td","th"].indexOf(f(t))>=0}function k(t){return n(t)&&"fixed"!==v(t).position?t.offsetParent:null}function C(e){for(var r=t(e),i=k(e);i&&A(i)&&"static"===v(i).position;)i=k(i);return i&&("html"===f(i)||"body"===f(i)&&"static"===v(i).position)?r:i||function(t){var e=/firefox/i.test(u());if(/Trident/i.test(u())&&n(t)&&"fixed"===v(t).position)return null;var r=w(t);for(o(r)&&(r=r.host);n(r)&&["html","body"].indexOf(f(r))<0;){var i=v(r);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return r;r=r.parentNode}return null}(e)||r}var S="top",T="bottom",P="right",_="left",j="auto",E=[S,T,P,_],I="start",L="end",D="viewport",M="popper",R=E.reduce((function(t,e){return t.concat([e+"-"+I,e+"-"+L])}),[]),N=[].concat(E,[j]).reduce((function(t,e){return t.concat([e,e+"-"+I,e+"-"+L])}),[]),B=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function F(t){var e=new Map,n=new Set,o=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var o=e.get(t);o&&r(o)}})),o.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),o}var H={placement:"bottom",modifiers:[],strategy:"absolute"};function U(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function q(t){void 0===t&&(t={});var n=t,o=n.defaultModifiers,r=void 0===o?[]:o,i=n.defaultOptions,a=void 0===i?H:i;return function(t,n,o){void 0===o&&(o=a);var i,s,c={placement:"bottom",orderedModifiers:[],options:Object.assign({},H,a),modifiersData:{},elements:{reference:t,popper:n},attributes:{},styles:{}},u=[],l=!1,p={state:c,setOptions:function(o){var i="function"==typeof o?o(c.options):o;d(),c.options=Object.assign({},a,c.options,i),c.scrollParents={reference:e(t)?x(t):t.contextElement?x(t.contextElement):[],popper:x(n)};var s,l,f=function(t){var e=F(t);return B.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((s=[].concat(r,c.options.modifiers),l=s.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(l).map((function(t){return l[t]}))));return c.orderedModifiers=f.filter((function(t){return t.enabled})),c.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,o=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var i=r({state:c,name:e,instance:p,options:o});u.push(i||function(){})}})),p.update()},forceUpdate:function(){if(!l){var t=c.elements,e=t.reference,n=t.popper;if(U(e,n)){c.rects={reference:m(e,C(n),"fixed"===c.options.strategy),popper:b(n)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach((function(t){return c.modifiersData[t.name]=Object.assign({},t.data)}));for(var o=0;o<c.orderedModifiers.length;o++)if(!0!==c.reset){var r=c.orderedModifiers[o],i=r.fn,a=r.options,s=void 0===a?{}:a,u=r.name;"function"==typeof i&&(c=i({state:c,options:s,name:u,instance:p})||c)}else c.reset=!1,o=-1}}},update:(i=function(){return new Promise((function(t){p.forceUpdate(),t(c)}))},function(){return s||(s=new Promise((function(t){Promise.resolve().then((function(){s=void 0,t(i())}))}))),s}),destroy:function(){d(),l=!0}};if(!U(t,n))return p;function d(){u.forEach((function(t){return t()})),u=[]}return p.setOptions(o).then((function(t){!l&&o.onFirstUpdate&&o.onFirstUpdate(t)})),p}}var V={passive:!0};const z={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var n=e.state,o=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,s=r.resize,c=void 0===s||s,u=t(n.elements.popper),l=[].concat(n.scrollParents.reference,n.scrollParents.popper);return a&&l.forEach((function(t){t.addEventListener("scroll",o.update,V)})),c&&u.addEventListener("resize",o.update,V),function(){a&&l.forEach((function(t){t.removeEventListener("scroll",o.update,V)})),c&&u.removeEventListener("resize",o.update,V)}},data:{}};function W(t){return t.split("-")[0]}function G(t){return t.split("-")[1]}function J(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function $(t){var e,n=t.reference,o=t.element,r=t.placement,i=r?W(r):null,a=r?G(r):null,s=n.x+n.width/2-o.width/2,c=n.y+n.height/2-o.height/2;switch(i){case S:e={x:s,y:n.y-o.height};break;case T:e={x:s,y:n.y+n.height};break;case P:e={x:n.x+n.width,y:c};break;case _:e={x:n.x-o.width,y:c};break;default:e={x:n.x,y:n.y}}var u=i?J(i):null;if(null!=u){var l="y"===u?"height":"width";switch(a){case I:e[u]=e[u]-(n[l]/2-o[l]/2);break;case L:e[u]=e[u]+(n[l]/2-o[l]/2)}}return e}var K={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Q(e){var n,o=e.popper,r=e.popperRect,i=e.placement,a=e.variation,s=e.offsets,u=e.position,l=e.gpuAcceleration,p=e.adaptive,d=e.roundOffsets,f=e.isFixed,g=s.x,y=void 0===g?0:g,m=s.y,b=void 0===m?0:m,w="function"==typeof d?d({x:y,y:b}):{x:y,y:b};y=w.x,b=w.y;var O=s.hasOwnProperty("x"),x=s.hasOwnProperty("y"),A=_,k=S,j=window;if(p){var E=C(o),I="clientHeight",D="clientWidth";E===t(o)&&"static"!==v(E=h(o)).position&&"absolute"===u&&(I="scrollHeight",D="scrollWidth"),(i===S||(i===_||i===P)&&a===L)&&(k=T,b-=(f&&E===j&&j.visualViewport?j.visualViewport.height:E[I])-r.height,b*=l?1:-1),i!==_&&(i!==S&&i!==T||a!==L)||(A=P,y-=(f&&E===j&&j.visualViewport?j.visualViewport.width:E[D])-r.width,y*=l?1:-1)}var M,R=Object.assign({position:u},p&&K),N=!0===d?function(t){var e=t.x,n=t.y,o=window.devicePixelRatio||1;return{x:c(e*o)/o||0,y:c(n*o)/o||0}}({x:y,y:b}):{x:y,y:b};return y=N.x,b=N.y,l?Object.assign({},R,((M={})[k]=x?"0":"",M[A]=O?"0":"",M.transform=(j.devicePixelRatio||1)<=1?"translate("+y+"px, "+b+"px)":"translate3d("+y+"px, "+b+"px, 0)",M)):Object.assign({},R,((n={})[k]=x?b+"px":"",n[A]=O?y+"px":"",n.transform="",n))}const X={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var o=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];n(i)&&f(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,o={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,o.popper),e.styles=o,e.elements.arrow&&Object.assign(e.elements.arrow.style,o.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},a=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:o[t]).reduce((function(t,e){return t[e]="",t}),{});n(r)&&f(r)&&(Object.assign(r.style,a),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]};var Y={left:"right",right:"left",bottom:"top",top:"bottom"};function Z(t){return t.replace(/left|right|bottom|top/g,(function(t){return Y[t]}))}var tt={start:"end",end:"start"};function et(t){return t.replace(/start|end/g,(function(t){return tt[t]}))}function nt(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&o(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ot(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function rt(n,o,r){return o===D?ot(function(e,n){var o=t(e),r=h(e),i=o.visualViewport,a=r.clientWidth,s=r.clientHeight,c=0,u=0;if(i){a=i.width,s=i.height;var p=l();(p||!p&&"fixed"===n)&&(c=i.offsetLeft,u=i.offsetTop)}return{width:a,height:s,x:c+g(e),y:u}}(n,r)):e(o)?function(t,e){var n=p(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(o,r):ot(function(t){var e,n=h(t),o=d(t),r=null==(e=t.ownerDocument)?void 0:e.body,i=a(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=a(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),c=-o.scrollLeft+g(t),u=-o.scrollTop;return"rtl"===v(r||n).direction&&(c+=a(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:s,x:c,y:u}}(h(n)))}function it(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function at(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function st(t,o){void 0===o&&(o={});var r=o,i=r.placement,c=void 0===i?t.placement:i,u=r.strategy,l=void 0===u?t.strategy:u,d=r.boundary,g=void 0===d?"clippingParents":d,y=r.rootBoundary,m=void 0===y?D:y,b=r.elementContext,O=void 0===b?M:b,A=r.altBoundary,k=void 0!==A&&A,_=r.padding,j=void 0===_?0:_,I=it("number"!=typeof j?j:at(j,E)),L=O===M?"reference":M,R=t.rects.popper,N=t.elements[k?L:O],B=function(t,o,r,i){var c="clippingParents"===o?function(t){var o=x(w(t)),r=["absolute","fixed"].indexOf(v(t).position)>=0&&n(t)?C(t):t;return e(r)?o.filter((function(t){return e(t)&&nt(t,r)&&"body"!==f(t)})):[]}(t):[].concat(o),u=[].concat(c,[r]),l=u[0],p=u.reduce((function(e,n){var o=rt(t,n,i);return e.top=a(o.top,e.top),e.right=s(o.right,e.right),e.bottom=s(o.bottom,e.bottom),e.left=a(o.left,e.left),e}),rt(t,l,i));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}(e(N)?N:N.contextElement||h(t.elements.popper),g,m,l),F=p(t.elements.reference),H=$({reference:F,element:R,strategy:"absolute",placement:c}),U=ot(Object.assign({},R,H)),q=O===M?U:F,V={top:B.top-q.top+I.top,bottom:q.bottom-B.bottom+I.bottom,left:B.left-q.left+I.left,right:q.right-B.right+I.right},z=t.modifiersData.offset;if(O===M&&z){var W=z[c];Object.keys(V).forEach((function(t){var e=[P,T].indexOf(t)>=0?1:-1,n=[S,T].indexOf(t)>=0?"y":"x";V[t]+=W[n]*e}))}return V}function ct(t,e,n){return a(t,s(e,n))}function ut(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function lt(t){return[S,P,T,_].some((function(e){return t[e]>=0}))}var pt=q({defaultModifiers:[z,{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=$({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,o=n.gpuAcceleration,r=void 0===o||o,i=n.adaptive,a=void 0===i||i,s=n.roundOffsets,c=void 0===s||s,u={placement:W(e.placement),variation:G(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Q(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Q(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},X,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,o=t.name,r=n.offset,i=void 0===r?[0,0]:r,a=N.reduce((function(t,n){return t[n]=function(t,e,n){var o=W(t),r=[_,S].indexOf(o)>=0?-1:1,i="function"==typeof n?n(Object.assign({},e,{placement:t})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*r,[_,P].indexOf(o)>=0?{x:s,y:a}:{x:a,y:s}}(n,e.rects,i),t}),{}),s=a[e.placement],c=s.x,u=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[o]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,o=t.name;if(!e.modifiersData[o]._skip){for(var r=n.mainAxis,i=void 0===r||r,a=n.altAxis,s=void 0===a||a,c=n.fallbackPlacements,u=n.padding,l=n.boundary,p=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,h=void 0===f||f,g=n.allowedAutoPlacements,v=e.options.placement,y=W(v),m=c||(y!==v&&h?function(t){if(W(t)===j)return[];var e=Z(t);return[et(t),e,et(e)]}(v):[Z(v)]),b=[v].concat(m).reduce((function(t,n){return t.concat(W(n)===j?function(t,e){void 0===e&&(e={});var n=e,o=n.placement,r=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?N:c,l=G(o),p=l?s?R:R.filter((function(t){return G(t)===l})):E,d=p.filter((function(t){return u.indexOf(t)>=0}));0===d.length&&(d=p);var f=d.reduce((function(e,n){return e[n]=st(t,{placement:n,boundary:r,rootBoundary:i,padding:a})[W(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:n,boundary:l,rootBoundary:p,padding:u,flipVariations:h,allowedAutoPlacements:g}):n)}),[]),w=e.rects.reference,O=e.rects.popper,x=new Map,A=!0,k=b[0],C=0;C<b.length;C++){var L=b[C],D=W(L),M=G(L)===I,B=[S,T].indexOf(D)>=0,F=B?"width":"height",H=st(e,{placement:L,boundary:l,rootBoundary:p,altBoundary:d,padding:u}),U=B?M?P:_:M?T:S;w[F]>O[F]&&(U=Z(U));var q=Z(U),V=[];if(i&&V.push(H[D]<=0),s&&V.push(H[U]<=0,H[q]<=0),V.every((function(t){return t}))){k=L,A=!1;break}x.set(L,V)}if(A)for(var z=function(t){var e=b.find((function(e){var n=x.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return k=e,"break"},J=h?3:1;J>0&&"break"!==z(J);J--);e.placement!==k&&(e.modifiersData[o]._skip=!0,e.placement=k,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,o=t.name,r=n.mainAxis,i=void 0===r||r,c=n.altAxis,u=void 0!==c&&c,l=n.boundary,p=n.rootBoundary,d=n.altBoundary,f=n.padding,h=n.tether,g=void 0===h||h,v=n.tetherOffset,y=void 0===v?0:v,m=st(e,{boundary:l,rootBoundary:p,padding:f,altBoundary:d}),w=W(e.placement),O=G(e.placement),x=!O,A=J(w),k="x"===A?"y":"x",j=e.modifiersData.popperOffsets,E=e.rects.reference,L=e.rects.popper,D="function"==typeof y?y(Object.assign({},e.rects,{placement:e.placement})):y,M="number"==typeof D?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),R=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,N={x:0,y:0};if(j){if(i){var B,F="y"===A?S:_,H="y"===A?T:P,U="y"===A?"height":"width",q=j[A],V=q+m[F],z=q-m[H],$=g?-L[U]/2:0,K=O===I?E[U]:L[U],Q=O===I?-L[U]:-E[U],X=e.elements.arrow,Y=g&&X?b(X):{width:0,height:0},Z=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},tt=Z[F],et=Z[H],nt=ct(0,E[U],Y[U]),ot=x?E[U]/2-$-nt-tt-M.mainAxis:K-nt-tt-M.mainAxis,rt=x?-E[U]/2+$+nt+et+M.mainAxis:Q+nt+et+M.mainAxis,it=e.elements.arrow&&C(e.elements.arrow),at=it?"y"===A?it.clientTop||0:it.clientLeft||0:0,ut=null!=(B=null==R?void 0:R[A])?B:0,lt=q+rt-ut,pt=ct(g?s(V,q+ot-ut-at):V,q,g?a(z,lt):z);j[A]=pt,N[A]=pt-q}if(u){var dt,ft="x"===A?S:_,ht="x"===A?T:P,gt=j[k],vt="y"===k?"height":"width",yt=gt+m[ft],mt=gt-m[ht],bt=-1!==[S,_].indexOf(w),wt=null!=(dt=null==R?void 0:R[k])?dt:0,Ot=bt?yt:gt-E[vt]-L[vt]-wt+M.altAxis,xt=bt?gt+E[vt]+L[vt]-wt-M.altAxis:mt,At=g&&bt?function(t,e,n){var o=ct(t,e,n);return o>n?n:o}(Ot,gt,xt):ct(g?Ot:yt,gt,g?xt:mt);j[k]=At,N[k]=At-gt}e.modifiersData[o]=N}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,o=t.name,r=t.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=W(n.placement),c=J(s),u=[_,P].indexOf(s)>=0?"height":"width";if(i&&a){var l=function(t,e){return it("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:at(t,E))}(r.padding,n),p=b(i),d="y"===c?S:_,f="y"===c?T:P,h=n.rects.reference[u]+n.rects.reference[c]-a[c]-n.rects.popper[u],g=a[c]-n.rects.reference[c],v=C(i),y=v?"y"===c?v.clientHeight||0:v.clientWidth||0:0,m=h/2-g/2,w=l[d],O=y-p[u]-l[f],x=y/2-p[u]/2+m,A=ct(w,x,O),k=c;n.modifiersData[o]=((e={})[k]=A,e.centerOffset=A-x,e)}},effect:function(t){var e=t.state,n=t.options.element,o=void 0===n?"[data-popper-arrow]":n;null!=o&&("string"!=typeof o||(o=e.elements.popper.querySelector(o)))&&nt(e.elements.popper,o)&&(e.elements.arrow=o)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,o=e.rects.reference,r=e.rects.popper,i=e.modifiersData.preventOverflow,a=st(e,{elementContext:"reference"}),s=st(e,{altBoundary:!0}),c=ut(a,o),u=ut(s,r,i),l=lt(c),p=lt(u);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":p})}}]}),dt="tippy-content",ft="tippy-arrow",ht="tippy-svg-arrow",gt={passive:!0,capture:!0},vt=function(){return document.body};function yt(t,e,n){if(Array.isArray(t)){var o=t[e];return null==o?Array.isArray(n)?n[e]:n:o}return t}function mt(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function bt(t,e){return"function"==typeof t?t.apply(void 0,e):t}function wt(t,e){return 0===e?t:function(o){clearTimeout(n),n=setTimeout((function(){t(o)}),e)};var n}function Ot(t){return[].concat(t)}function xt(t,e){-1===t.indexOf(e)&&t.push(e)}function At(t){return[].slice.call(t)}function kt(t){return Object.keys(t).reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{})}function Ct(){return document.createElement("div")}function St(t){return["Element","Fragment"].some((function(e){return mt(t,e)}))}function Tt(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function Pt(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function _t(t,e,n){var o=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[o](e,n)}))}function jt(t,e){for(var n=e;n;){var o;if(t.contains(n))return!0;n=null==n.getRootNode||null==(o=n.getRootNode())?void 0:o.host}return!1}var Et={isTouch:!1},It=0;function Lt(){Et.isTouch||(Et.isTouch=!0,window.performance&&document.addEventListener("mousemove",Dt))}function Dt(){var t=performance.now();t-It<20&&(Et.isTouch=!1,document.removeEventListener("mousemove",Dt)),It=t}function Mt(){var t,e=document.activeElement;if((t=e)&&t._tippy&&t._tippy.reference===t){var n=e._tippy;e.blur&&!n.state.isVisible&&e.blur()}}var Rt=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),Nt=Object.assign({appendTo:vt,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Bt=Object.keys(Nt);function Ft(t){var e=(t.plugins||[]).reduce((function(e,n){var o,r=n.name,i=n.defaultValue;return r&&(e[r]=void 0!==t[r]?t[r]:null!=(o=Nt[r])?o:i),e}),{});return Object.assign({},t,e)}function Ht(t,e){var n=Object.assign({},e,{content:bt(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(Ft(Object.assign({},Nt,{plugins:e}))):Bt).reduce((function(e,n){var o=(t.getAttribute("data-tippy-"+n)||"").trim();if(!o)return e;if("content"===n)e[n]=o;else try{e[n]=JSON.parse(o)}catch(t){e[n]=o}return e}),{})}(t,e.plugins));return n.aria=Object.assign({},Nt.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}function Ut(t,e){t.innerHTML=e}function qt(t){var e=Ct();return!0===t?e.className=ft:(e.className=ht,St(t)?e.appendChild(t):Ut(e,t)),e}function Vt(t,e){St(e.content)?(Ut(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?Ut(t,e.content):t.textContent=e.content)}function zt(t){var e=t.firstElementChild,n=At(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(dt)})),arrow:n.find((function(t){return t.classList.contains(ft)||t.classList.contains(ht)})),backdrop:n.find((function(t){return t.classList.contains("tippy-backdrop")}))}}function Wt(t){var e=Ct(),n=Ct();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var o=Ct();function r(n,o){var r=zt(e),i=r.box,a=r.content,s=r.arrow;o.theme?i.setAttribute("data-theme",o.theme):i.removeAttribute("data-theme"),"string"==typeof o.animation?i.setAttribute("data-animation",o.animation):i.removeAttribute("data-animation"),o.inertia?i.setAttribute("data-inertia",""):i.removeAttribute("data-inertia"),i.style.maxWidth="number"==typeof o.maxWidth?o.maxWidth+"px":o.maxWidth,o.role?i.setAttribute("role",o.role):i.removeAttribute("role"),n.content===o.content&&n.allowHTML===o.allowHTML||Vt(a,t.props),o.arrow?s?n.arrow!==o.arrow&&(i.removeChild(s),i.appendChild(qt(o.arrow))):i.appendChild(qt(o.arrow)):s&&i.removeChild(s)}return o.className=dt,o.setAttribute("data-state","hidden"),Vt(o,t.props),e.appendChild(n),n.appendChild(o),r(t.props,t.props),{popper:e,onUpdate:r}}Wt.$$tippy=!0;var Gt=1,Jt=[],$t=[];function Kt(t,e){var n,o,r,i,a,s,c,u=Ht(t,Object.assign({},Nt,Ft(kt(e)))),l=!1,p=!1,d=!1,f=!1,h=[],g=wt(G,u.interactiveDebounce),v=Gt++,y=function(t){return t.filter((function(e,n){return t.indexOf(e)===n}))}(u.plugins),m={id:v,reference:t,popper:Ct(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(o),cancelAnimationFrame(r)},setProps:function(e){if(!m.state.isDestroyed){I("onBeforeUpdate",[m,e]),z();var n=m.props,o=Ht(t,Object.assign({},n,kt(e),{ignoreAttributes:!0}));m.props=o,V(),n.interactiveDebounce!==o.interactiveDebounce&&(M(),g=wt(G,o.interactiveDebounce)),n.triggerTarget&&!o.triggerTarget?Ot(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):o.triggerTarget&&t.removeAttribute("aria-expanded"),D(),E(),O&&O(n,o),m.popperInstance&&(Q(),Y().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)}))),I("onAfterUpdate",[m,e])}},setContent:function(t){m.setProps({content:t})},show:function(){var t=m.state.isVisible,e=m.state.isDestroyed,n=!m.state.isEnabled,o=Et.isTouch&&!m.props.touch,r=yt(m.props.duration,0,Nt.duration);if(!(t||e||n||o||T().hasAttribute("disabled")||(I("onShow",[m],!1),!1===m.props.onShow(m)))){if(m.state.isVisible=!0,S()&&(w.style.visibility="visible"),E(),F(),m.state.isMounted||(w.style.transition="none"),S()){var i=_();Tt([i.box,i.content],0)}var a,c,u;s=function(){var t;if(m.state.isVisible&&!f){if(f=!0,w.offsetHeight,w.style.transition=m.props.moveTransition,S()&&m.props.animation){var e=_(),n=e.box,o=e.content;Tt([n,o],r),Pt([n,o],"visible")}L(),D(),xt($t,m),null==(t=m.popperInstance)||t.forceUpdate(),I("onMount",[m]),m.props.animation&&S()&&function(t,e){U(t,(function(){m.state.isShown=!0,I("onShown",[m])}))}(r)}},c=m.props.appendTo,u=T(),(a=m.props.interactive&&c===vt||"parent"===c?u.parentNode:bt(c,[u])).contains(w)||a.appendChild(w),m.state.isMounted=!0,Q()}},hide:function(){var t=!m.state.isVisible,e=m.state.isDestroyed,n=!m.state.isEnabled,o=yt(m.props.duration,1,Nt.duration);if(!(t||e||n)&&(I("onHide",[m],!1),!1!==m.props.onHide(m))){if(m.state.isVisible=!1,m.state.isShown=!1,f=!1,l=!1,S()&&(w.style.visibility="hidden"),M(),H(),E(!0),S()){var r=_(),i=r.box,a=r.content;m.props.animation&&(Tt([i,a],o),Pt([i,a],"hidden"))}L(),D(),m.props.animation?S()&&function(t,e){U(t,(function(){!m.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&e()}))}(o,m.unmount):m.unmount()}},hideWithInteractivity:function(t){P().addEventListener("mousemove",g),xt(Jt,g),g(t)},enable:function(){m.state.isEnabled=!0},disable:function(){m.hide(),m.state.isEnabled=!1},unmount:function(){m.state.isVisible&&m.hide(),m.state.isMounted&&(X(),Y().forEach((function(t){t._tippy.unmount()})),w.parentNode&&w.parentNode.removeChild(w),$t=$t.filter((function(t){return t!==m})),m.state.isMounted=!1,I("onHidden",[m]))},destroy:function(){m.state.isDestroyed||(m.clearDelayTimeouts(),m.unmount(),z(),delete t._tippy,m.state.isDestroyed=!0,I("onDestroy",[m]))}};if(!u.render)return m;var b=u.render(m),w=b.popper,O=b.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+m.id,m.popper=w,t._tippy=m,w._tippy=m;var x=y.map((function(t){return t.fn(m)})),A=t.hasAttribute("aria-expanded");return V(),D(),E(),I("onCreate",[m]),u.showOnCreate&&Z(),w.addEventListener("mouseenter",(function(){m.props.interactive&&m.state.isVisible&&m.clearDelayTimeouts()})),w.addEventListener("mouseleave",(function(){m.props.interactive&&m.props.trigger.indexOf("mouseenter")>=0&&P().addEventListener("mousemove",g)})),m;function k(){var t=m.props.touch;return Array.isArray(t)?t:[t,0]}function C(){return"hold"===k()[0]}function S(){var t;return!(null==(t=m.props.render)||!t.$$tippy)}function T(){return c||t}function P(){var t,e,n=T().parentNode;return n?null!=(e=Ot(n)[0])&&null!=(t=e.ownerDocument)&&t.body?e.ownerDocument:document:document}function _(){return zt(w)}function j(t){return m.state.isMounted&&!m.state.isVisible||Et.isTouch||i&&"focus"===i.type?0:yt(m.props.delay,t?0:1,Nt.delay)}function E(t){void 0===t&&(t=!1),w.style.pointerEvents=m.props.interactive&&!t?"":"none",w.style.zIndex=""+m.props.zIndex}function I(t,e,n){var o;void 0===n&&(n=!0),x.forEach((function(n){n[t]&&n[t].apply(n,e)})),n&&(o=m.props)[t].apply(o,e)}function L(){var e=m.props.aria;if(e.content){var n="aria-"+e.content,o=w.id;Ot(m.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(n);if(m.state.isVisible)t.setAttribute(n,e?e+" "+o:o);else{var r=e&&e.replace(o,"").trim();r?t.setAttribute(n,r):t.removeAttribute(n)}}))}}function D(){!A&&m.props.aria.expanded&&Ot(m.props.triggerTarget||t).forEach((function(t){m.props.interactive?t.setAttribute("aria-expanded",m.state.isVisible&&t===T()?"true":"false"):t.removeAttribute("aria-expanded")}))}function M(){P().removeEventListener("mousemove",g),Jt=Jt.filter((function(t){return t!==g}))}function R(e){if(!Et.isTouch||!d&&"mousedown"!==e.type){var n=e.composedPath&&e.composedPath()[0]||e.target;if(!m.props.interactive||!jt(w,n)){if(Ot(m.props.triggerTarget||t).some((function(t){return jt(t,n)}))){if(Et.isTouch)return;if(m.state.isVisible&&m.props.trigger.indexOf("click")>=0)return}else I("onClickOutside",[m,e]);!0===m.props.hideOnClick&&(m.clearDelayTimeouts(),m.hide(),p=!0,setTimeout((function(){p=!1})),m.state.isMounted||H())}}}function N(){d=!0}function B(){d=!1}function F(){var t=P();t.addEventListener("mousedown",R,!0),t.addEventListener("touchend",R,gt),t.addEventListener("touchstart",B,gt),t.addEventListener("touchmove",N,gt)}function H(){var t=P();t.removeEventListener("mousedown",R,!0),t.removeEventListener("touchend",R,gt),t.removeEventListener("touchstart",B,gt),t.removeEventListener("touchmove",N,gt)}function U(t,e){var n=_().box;function o(t){t.target===n&&(_t(n,"remove",o),e())}if(0===t)return e();_t(n,"remove",a),_t(n,"add",o),a=o}function q(e,n,o){void 0===o&&(o=!1),Ot(m.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,n,o),h.push({node:t,eventType:e,handler:n,options:o})}))}function V(){var t;C()&&(q("touchstart",W,{passive:!0}),q("touchend",J,{passive:!0})),(t=m.props.trigger,t.split(/\s+/).filter(Boolean)).forEach((function(t){if("manual"!==t)switch(q(t,W),t){case"mouseenter":q("mouseleave",J);break;case"focus":q(Rt?"focusout":"blur",$);break;case"focusin":q("focusout",$)}}))}function z(){h.forEach((function(t){var e=t.node,n=t.eventType,o=t.handler,r=t.options;e.removeEventListener(n,o,r)})),h=[]}function W(t){var e,n=!1;if(m.state.isEnabled&&!K(t)&&!p){var o="focus"===(null==(e=i)?void 0:e.type);i=t,c=t.currentTarget,D(),!m.state.isVisible&&mt(t,"MouseEvent")&&Jt.forEach((function(e){return e(t)})),"click"===t.type&&(m.props.trigger.indexOf("mouseenter")<0||l)&&!1!==m.props.hideOnClick&&m.state.isVisible?n=!0:Z(t),"click"===t.type&&(l=!n),n&&!o&&tt(t)}}function G(t){var e=t.target,n=T().contains(e)||w.contains(e);if("mousemove"!==t.type||!n){var o=Y().concat(w).map((function(t){var e,n=null==(e=t._tippy.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:u}:null})).filter(Boolean);(function(t,e){var n=e.clientX,o=e.clientY;return t.every((function(t){var e=t.popperRect,r=t.popperState,i=t.props.interactiveBorder,a=r.placement.split("-")[0],s=r.modifiersData.offset;if(!s)return!0;var c="bottom"===a?s.top.y:0,u="top"===a?s.bottom.y:0,l="right"===a?s.left.x:0,p="left"===a?s.right.x:0,d=e.top-o+c>i,f=o-e.bottom-u>i,h=e.left-n+l>i,g=n-e.right-p>i;return d||f||h||g}))})(o,t)&&(M(),tt(t))}}function J(t){K(t)||m.props.trigger.indexOf("click")>=0&&l||(m.props.interactive?m.hideWithInteractivity(t):tt(t))}function $(t){m.props.trigger.indexOf("focusin")<0&&t.target!==T()||m.props.interactive&&t.relatedTarget&&w.contains(t.relatedTarget)||tt(t)}function K(t){return!!Et.isTouch&&C()!==t.type.indexOf("touch")>=0}function Q(){X();var e=m.props,n=e.popperOptions,o=e.placement,r=e.offset,i=e.getReferenceClientRect,a=e.moveTransition,c=S()?zt(w).arrow:null,u=i?{getBoundingClientRect:i,contextElement:i.contextElement||T()}:t,l=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(S()){var n=_().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}}];S()&&c&&l.push({name:"arrow",options:{element:c,padding:3}}),l.push.apply(l,(null==n?void 0:n.modifiers)||[]),m.popperInstance=pt(u,w,Object.assign({},n,{placement:o,onFirstUpdate:s,modifiers:l}))}function X(){m.popperInstance&&(m.popperInstance.destroy(),m.popperInstance=null)}function Y(){return At(w.querySelectorAll("[data-tippy-root]"))}function Z(t){m.clearDelayTimeouts(),t&&I("onTrigger",[m,t]),F();var e=j(!0),o=k(),r=o[0],i=o[1];Et.isTouch&&"hold"===r&&i&&(e=i),e?n=setTimeout((function(){m.show()}),e):m.show()}function tt(t){if(m.clearDelayTimeouts(),I("onUntrigger",[m,t]),m.state.isVisible){if(!(m.props.trigger.indexOf("mouseenter")>=0&&m.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&l)){var e=j(!1);e?o=setTimeout((function(){m.state.isVisible&&m.hide()}),e):r=requestAnimationFrame((function(){m.hide()}))}}else H()}}function Qt(t,e){void 0===e&&(e={});var n=Nt.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",Lt,gt),window.addEventListener("blur",Mt);var o,r=Object.assign({},e,{plugins:n}),i=(o=t,St(o)?[o]:function(t){return mt(t,"NodeList")}(o)?At(o):Array.isArray(o)?o:At(document.querySelectorAll(o))).reduce((function(t,e){var n=e&&Kt(e,r);return n&&t.push(n),t}),[]);return St(t)?i[0]:i}Qt.defaultProps=Nt,Qt.setDefaultProps=function(t){Object.keys(t).forEach((function(e){Nt[e]=t[e]}))},Qt.currentInput=Et,Object.assign({},X,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}}),Qt.setDefaultProps({render:Wt});const Xt=Qt;var Yt;!function(t){t[t.Undefined=0]="Undefined",t[t.None=1]="None",t[t.Attribute=2]="Attribute",t[t.App=3]="App",t[t.Entity=4]="Entity",t[t.ContentType=5]="ContentType",t[t.Zone=6]="Zone",t[t.CmsItem=10]="CmsItem",t[t.System=11]="System",t[t.Site=12]="Site",t[t.SiteVariant=13]="SiteVariant",t[t.Page=14]="Page",t[t.PageVariant=15]="PageVariant",t[t.Module=16]="Module",t[t.ModuleVariant=17]="ModuleVariant",t[t.User=18]="User",t[t.Custom=90]="Custom",t[t.Custom1=91]="Custom1",t[t.Custom2=92]="Custom2",t[t.Custom3=93]="Custom3",t[t.Custom4=94]="Custom4",t[t.Custom5=95]="Custom5",t[t.Custom6=96]="Custom6",t[t.Custom7=97]="Custom7",t[t.Custom8=98]="Custom8",t[t.Custom9=99]="Custom9"}(Yt||(Yt={}));var Zt=".",te="~",ee="_",ne=["true","false"],oe=ne.concat(["null"]),re=function(){function t(){}return t.prototype.toUrl=function(t,e){if(void 0===e&&(e=!0),!t)return"";if(Array.isArray(t))throw new Error("only objects can be toUrl(), arrays don't work. Put the array in an object property.");var n=this.toUrlRecursive(t,null,0,e).filter((function(t){return null!=t&&t.length>0})).join(te);return n?te+n:""},t.prototype.toObj=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1);var o=this.back(t,e);return n?o:function(t){var e={};for(var n in t){var o=n.split(Zt);o.reduce((function(e,r,i){return e[r]||(e[r]=isNaN(Number(o[i+1]))?o.length-1==i?t[n]:{}:[])}),e)}return e}(o)},t.prototype.toUrlRecursive=function(t,e,n,o){var r=this;if(null==t)return[];var i,a,s=n>0?Zt.repeat(n):"";if("object"!=typeof t)return["".concat(s).concat(e,"=").concat(o?(i=t,a=!1,"string"==typeof i&&((oe.includes(i)||ae(i))&&(a=!0),i=i.replaceAll(te,"~~").replaceAll(ee,"~_").replaceAll(" ",ee)),(a?"~":"")+encodeURIComponent(i)):t)];var c=Object.keys(t).map((function(e){return r.toUrlRecursive(t[e],e,n+1,o)}));if(0===c.length)return[];var u=c.reduce((function(t,e){return t.concat(Array.isArray(e)?ie(e,2):e)}),[]);return(n>0?["".concat(s).concat(e),null]:[]).concat(u)},t.prototype.back=function(t,e){if(!t||0===t.length)return[];for(var n=t.replaceAll("=~","=¶").replaceAll("~~","#").split("~.").map((function(t){return null==t?void 0:t.replaceAll("#",te)})).filter((function(t){return t.length>0})),o={},r=[],i=0;i<n.length;i++){var a=n[i].split("="),s=a[0],c=s.match(/^\.*/g)[0].length;if(0===c)r=s.split(Zt);else{if(c>r.length)throw new Error("Invalid key: ".concat(s," when current stack is ").concat(r.join(Zt)));var u=s.substring(c);(r=r.slice(0,c)).push(u),a[0]=r.join(Zt)}o[a[0]]=a.length>1?e?(null==(l=decodeURIComponent(a[1]))?void 0:l.length)>0&&"¶"===l[0]?se(l.slice(1)):ne.includes(l)?"true"===l:ae(l)?parseFloat(l):se(l):a[1]:null}var l;return o},t}();function ie(t,e){return e<1?t.slice():t.reduce((function(t,n){return t.concat(Array.isArray(n)?ie(n,e-1):n)}),[])}function ae(t){return"string"==typeof t&&!isNaN(t)&&!isNaN(parseFloat(t))}function se(t){var e=String.fromCharCode(1);return t.replaceAll("~_",e).replaceAll(ee," ").replaceAll(e,ee)}var ce,ue=function(){function t(){}return t.prototype.get=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e,n=new RegExp("[\\?&]"+t+"=([^&#]*)","i").exec(location.search);if(null===n&&(n=new RegExp("[#&]"+t+"=([^&#]*)","i").exec(location.hash)),null===n){var o=location.pathname.match(new RegExp("/"+t+"/([^/]+)","i"));o&&o.length>1&&(e=o.reverse()[0])}else e=n[1];return null==e?"":decodeURIComponent(e.replace(/\+/g," "))},t.prototype.require=function(t){var e=this.get(t);if(""===e){var n="Required parameter (".concat(t,") missing from url - cannot continue");throw alert(n),n}return e},t.prototype.isDebug=function(){var t;return"true"===(null===(t=this.get("debug"))||void 0===t?void 0:t.toLocaleLowerCase())},t.prototype.toUrl=function(t){return(new re).toUrl(t,!0)},t.prototype.toObj=function(t){return(new re).toObj(t,!0)},t}(),le=(function(){function t(){this.frame=void 0,this.callback=void 0}t.prototype.open=function(t,e){for(var n=10000010,o=window;o!==window.top&&n<10000100;)n++,o=o.parent;var r=document.createElement("div");r.setAttribute("style"," top: 0;left: 0;width: 100%;height: 100%; color-scheme: auto; position:fixed; z-index:"+n),document.body.appendChild(r);var i=document.createElement("iframe");i.setAttribute("allowtransparency","true"),i.setAttribute("style","top: 0;left: 0;width: 100%;height: 100%;"),i.setAttribute("src",t),r.appendChild(i),document.body.className+=" sxc-popup-open",this.frame=i,this.callback=e},t.prototype.close=function(){if(this.frame){document.body.className=document.body.className.replace("sxc-popup-open","");var t=this.frame;t.parentNode.parentNode.removeChild(t.parentNode),this.callback()}},t.prototype.closeThis=function(){window.parent.$2sxc.totalPopup.close()}}(),"2sxc"),pe="17.04.00",de=["app","app-sys","app-api","app-query","app-content","eav","view","dnn"];!function(t){t.log="log",t.warn="warn",t.error="error",t.throw="throw"}(ce||(ce={}));var fe=function(){function t(t,e,n){var o=this;this.parentLog=e,this.initLog=function(t,e,n){return o.initLogInternal(t,e,n)},this.initLogInternal(t,e,n)}return t.prototype.initLogInternal=function(t,e,n){null==this.log?this.log=new ge(t,e,n):(this.log.rename(t),this.log.linkLog(e),null!=n&&this.log.add(n))},t}(),he=-1!==location.search.indexOf("debug=true"),ge=function(){function t(t,e,n){var o=this;this.entries=new Array,this.depth=0,this.callDepths=[],this.maxEntries=1e3,this.liveDump=!1,this._parentHasLiveDump=!1,this.keepData=he,this._parentHasKeepData=!1,this.fullIdentifier=function(){return"".concat(o.parent?o.parent.fullIdentifier():"").concat(o.identifier())},this.linkLog=function(t){o.parent=t||o.parent,o.parent&&(o._parentHasLiveDump=o.parent.liveDump||o.parent._parentHasLiveDump,o._parentHasKeepData=o.parent.keepData||o.parent._parentHasKeepData)},this.scope="tdo",this.name="unknwn",this.id=function(){return o.idCache||(o.idCache=o.randomString(2))},this.identifier=function(){return"".concat(o.scope).concat(o.name,"(").concat(o.id(),")")},this.rename(t),this.linkLog(e),this.startTime=(new Date).getTime(),null!=n&&this.add(n)}return t.prototype.rename=function(t){try{var e=t.indexOf(".");this.scope=e>0?t.substr(0,Math.min(e,3))+".":"";var n=e>0?t.substr(e+1):t;this.name=n.substr(0,Math.min(n.length,6)),this.name=this.name.substr(0,Math.min(this.name.length,6))}catch(t){}},t.prototype.add=function(t,e){if(this.entries.length>this.maxEntries)return this._prepareMessage(t);this.entries.length===this.maxEntries&&this._addEntry(this._prepareEntry("Maximum amount of entries added to log, will stop adding more"));var n=this._prepareEntry(t,e);return this._addEntry(n),n.message},t.prototype.addData=function(t,e){this.logData()&&this.add(t,e)},t.prototype.logData=function(){return this.keepData||this._parentHasKeepData},t.prototype._prepareEntry=function(t,e){var n=this._prepareMessage(t),o=(new Date).getTime()-this.startTime;return new Ae(this,n,this.depth,o,e)},t.prototype._prepareMessage=function(t){if(t instanceof Function)try{return t()}catch(t){return"err: message undefined"}return t.toString()},t.prototype.call=function(t,e,n,o){return new ve(this,t,e,n,o)},t.prototype._callDepthAdd=function(t){this.depth++,this.callDepths.push(t)},t.prototype._callDepthRemove=function(t){this.depth--;var e=this.callDepths.pop();e!==t&&console.warn("log: call depth reduced by '".concat(t,"' but last was '").concat(e,"'"))},t.prototype.dump=function(t,e){void 0===t&&(t=null),void 0===e&&(e=" - "),t?this.dumpOne(0,t,e):this.dumpList()},t.prototype.dumpList=function(t,e){var n=this;void 0===t&&(t=0);var o=t;this.entries.slice(t,e?t+e:void 0).forEach((function(t){return n.dumpOne(o++,t)}))},t.prototype.dumpOne=function(t,e,n){void 0===n&&(n=" - ");var o=e.result?" ="+e.result:"",r=("0000"+t).slice(-4)+" "+e.source()+n+"..".repeat(e.depth)+e.message+o;e.data?console.log(r,e.data):console.log(r)},t.prototype._addEntry=function(t){this.liveDump&&this.dump(t),this.entries.push(t),this.parent&&this.parent._addEntry(t)},t.prototype.randomString=function(t){for(var e="0123456789abcdefghiklmnopqrstuvwxyz",n="",o=0;o<t;o++){var r=Math.floor(Math.random()*e.length);n+=e.substring(r,r+1)}return n},t}(),ve=function(){function t(t,e,n,o,r){if(this.log=t,this.name=e,this.initialEntry=this.log._prepareEntry(e+"("+(n||"")+")"),this.log._callDepthAdd(e),this.log._addEntry(this.initialEntry),"string"==typeof o&&this.add(o),r)for(var i in r)this.data("initial:"+i,r[i])}return t.prototype.add=function(t,e,n){this.lastMessage=t,this.log.add(t,e),n&&this.processExtraBehavior(n,t,e)},t.prototype.onlyAddIfNew=function(t,e){this.lastMessage!==t&&this.add(t),e&&this.processExtraBehavior(e,t,void 0)},t.prototype.data=function(t,e){this.log.addData(t,e)},t.prototype.done=function(t,e){this.return(null,t||"👍",e)},t.prototype.return=function(t,e,n){return e=e||"👍",this.initialEntry.result=e,this.log._callDepthRemove(this.name),this.initialEntry.data=t,(this.log.liveDump||this.log._parentHasLiveDump)&&this.add(this.name+" = "+e,t),n&&this.processExtraBehavior(n,e,t),t},t.prototype.processExtraBehavior=function(t,e,n){if(t===ce.log&&console.log(e,n),t===ce.warn&&console.warn(e,n),t!==ce.error&&t!==ce.throw||console.error(e,n),t===ce.throw)throw e},t}(),ye=function(){function t(){}return t.TypeSafeAssign=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.reduce((function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)}),t[0])},t.DeepClone=function(t,e){if(void 0===e&&(e=!1),null==t)return t;var n=e?JSON.stringify(t,me):JSON.stringify(t);return null==n?t:JSON.parse(n)},t}(),me=function(){var t=new WeakSet;return function(e,n){if("object"==typeof n&&null!==n){if(t.has(n))return;t.add(n)}return n}};function be(t){return t.replace(/(\/+)/g,"/")}var we,Oe=function(){function t(){}return t.ready=function(t){"complete"===document.readyState?t():document.addEventListener("DOMContentLoaded",(function(){return t()}),{once:!0})},t.param=function(t){return Object.entries(t).map((function(t){var e=t[0],n=t[1];return"".concat(encodeURIComponent(e),"=").concat(null==n?"":"string"==typeof n?encodeURIComponent(n):encodeURIComponent(JSON.stringify(n)))})).join("&")},t.domFromString=function(e){var n=document.createElement("div");n.insertAdjacentHTML("afterbegin",e),Array.from(n.querySelectorAll("script")).forEach((function(e){var n=document.createElement("script");Array.from(e.attributes).forEach((function(t){n.setAttribute(t.nodeName,t.nodeValue)})),n.textContent=e.textContent,t.replaceWith(e,n,!1)}));var o=Array.from(n.children);return o.forEach((function(t){n.removeChild(t)})),o},t.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}},t.width=function(t){var e=getComputedStyle(t);return 0===t.offsetWidth?0:t.offsetWidth-(parseInt(e.getPropertyValue("border-left-width"),10)+parseInt(e.getPropertyValue("border-right-width"),10))-(parseInt(e.getPropertyValue("padding-left"),10)+parseInt(e.getPropertyValue("padding-right"),10))},t.height=function(t){var e=getComputedStyle(t);return 0===t.offsetHeight?0:t.offsetHeight-(parseInt(e.getPropertyValue("border-top-width"),10)+parseInt(e.getPropertyValue("border-bottom-width"),10))-(parseInt(e.getPropertyValue("padding-top"),10)+parseInt(e.getPropertyValue("padding-bottom"),10))},t.empty=function(t){Array.from(t.childNodes).forEach((function(e){t.removeChild(e)}))},t.replaceWith=function(t,e,n){var o=t.parentElement,r=Array.from(e.querySelectorAll("script")),i=[];r.forEach((function(t){i.push({script:t,type:t.type}),t.type=null})),o.replaceChild(e,t),i.forEach((function(t){t.script.type=t.type})),n&&xe.runScripts(r,void 0)},t.append=function(t,e,n){var o=[];e.forEach((function(e){if("script"===e.tagName.toLocaleLowerCase()){var n=e,r=n.type;n.type=null,t.appendChild(n),n.type=r,o.push(n)}else t.appendChild(e)})),n&&o.length>0&&xe.runScripts(o,void 0)},t}(),xe=function(){function t(){}return t.runScripts=function(t,e){var n=this,o=t[0],r=t.slice(1);if(null!=o){var i=document.createElement("script");if(Array.from(o.attributes).forEach((function(t){i.setAttribute(t.nodeName,t.nodeValue)})),i.textContent=o.textContent,i.type&&i.src){var a=function(){i.onload=null,i.onerror=null,document.head.removeChild(i),n.runScripts(r,e)};return i.onload=a,i.onerror=a,void document.head.appendChild(i)}setTimeout((function(){document.head.appendChild(i),document.head.removeChild(i),n.runScripts(r,e)}))}else null==e||e()},t}(),Ae=function(){function t(t,e,n,o,r){var i=this;this.log=t,this.message=e,this.depth=n,this.time=o,this.source=function(){return i.log.fullIdentifier()},r&&(this.data=r)}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){void 0!==t&&this.log.logData()&&(this._data=ye.DeepClone(t,!0))},enumerable:!1,configurable:!0}),t}(),ke=(we=function(t,e){return we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},we(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}we(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ce=function(t){function e(){var e=t.call(this,"Sys.Insght")||this;return e.history={},e.add("system","insights",e.log),e.log.add("this log is usually empty, as it's just a helper tool"),e}return ke(e,t),e.prototype.add=function(t,e,n){t in this.history||(this.history[t]=new Se(t)),this.history[t].logs.push({key:e,log:n})},e.prototype.show=function(t,e,n,o){if(t){var r=this.history[t];if(r)if(void 0!==e){var i=r.logs.length>=e&&r.logs[e];if(i)if(i.log){console.log("Will dump the log for ".concat(t,"[").concat(e,"] '").concat(i.key,"'"));var a=!1;void 0===n&&(a=!0,n=0,o=25),i.log.dumpList(n||0,o),a&&i.log.entries.length>o&&console.warn("Only showing ".concat(o," of ").concat(i.log.entries.length," logs. To show all, add start param '..., 0)' or start/length '..., 0, 100)'"))}else console.error("found index ".concat(e," on part '").concat(t,"' but it has no logs"));else console.error("index ".concat(e," not found in part '").concat(t,"'"))}else{var s=0,c=r.logs.map((function(e){return"$2sxc.insights('".concat(t,"', ").concat(s++,"); - will show for '").concat(e.key,"'")})).join("\n");console.log("'".concat(t,"' contains ").concat(r.logs.length," entries. Copy/paste the code to to see the logs: \n")+c)}else console.error("part '".concat(t,"' not found"))}else{var u=Object.keys(this.history);console.log("".concat("This is the $2sxc JS Insights - see https://go.2sxc.org/insights \nAdd ?debug=true to the url to log more data. \nCopy/paste code lines below to see details. \n----------------------------------------------------------------------\n").concat(u.length," insights-sections found: \n")+u.map((function(t){return"$2sxc.insights('".concat(t,"');")})).join("\n"))}},e}(fe),Se=function(t){this.name=t,this.logs=[]},Te=window.$2sxc&&window.$2sxc._insights||new Ce,Pe="/desktopmodules/tosic_sexycontent/",_e="RequestVerificationToken",je=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ee="You must either include jQuery on the page or inject the jsApi parameters to prevent auto-detection.",Ie=function(t){function e(e){var n=t.call(this,"Env.DnnLdr",e.log)||this;return n.env=e,n}return je(e,t),e.prototype.dnnSfFallback=function(){var t=this,e=this.log.call("dnnSfFallback");Oe.ready((function(){return t.dnnSfLoadWhenDocumentReady()})),e.done("started dom-ready watcher")},e.prototype.dnnSfLoadWhenDocumentReady=function(){var t=this.log.call("dnnSfLoadWhenDocumentReady");if(void 0===window.$)throw t.done("error"),"Can't load pageid, moduleid, etc. and $ is not available. \n ".concat(Ee);var e=window.$.ServicesFramework;if(void 0===e)throw t.done("error"),"Can't load pageid, moduleid etc. and DNN SF is not available. \n ".concat(Ee);var n=e(0),o=n.getServiceRoot("2sxc"),r={page:n.getTabId(),root:"unknown",api:o,appApi:o,rvtHeader:_e,rvt:n.getAntiForgeryValue(),uiRoot:Pe,platform:"dnn"};this.env.load(r,"dnn SF"),t.done()},e}(fe),Le="input[name=__RequestVerificationToken]",De=function(){function t(t){this.mainLoader=t,this.log=new ge("ldr.dynmic",t.log)}return t.prototype.startMetaTagObserver=function(t){var e=this;this.observer||(this.observer=new MutationObserver((function(n){for(var o=0,r=n;o<r.length;o++){var i=r[o];"attributes"===i.type&&i.attributeName===t&&e.mainLoader.updateEnv(JSON.parse(e.mainLoader.getMetaContent()))}})),this.log.add("start observing meta tag"),this.observer.observe(this.mainLoader.getJsApiMetaTag(),{attributes:!0,childList:!1,subtree:!1}))},t.prototype.startInputRvtObserver=function(){var t=this;if(!this.inputRvtObserver){this.inputRvtObserver=new MutationObserver((function(e){for(var n=0,o=e;n<o.length;n++){var r=o[n];"attributes"===r.type&&"value"===r.attributeName&&t.loadRvtFromHiddenInput(r.target)}})),this.log.add("start observing Rvt Input");var e=document.querySelector(Le);null!=e?(this.loadRvtFromHiddenInput(e),this.inputRvtObserver.observe(e,{attributes:!0,childList:!1,subtree:!1})):console.error("Can't find Oqtane RVT field with selector ".concat(Le,"\n")+"So we cannot watch it for changes.\nThis will probably cause the $2sxc to fail.")}},t.prototype.loadRvtFromHiddenInput=function(t){this.log.add("Input Rvt updated"),t&&t.value&&this.mainLoader.env.updateRvt(t.value)},t}(),Me=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Re="content",Ne=function(t){function e(e){var n=t.call(this,"Env.MetaLd",e.log)||this;return n.env=e,n.retries=0,n.dynamicPageHelper=new De(n),n}return Me(e,t),e.prototype.loadMetaFromHeader=function(t){var e=this;void 0===t&&(t=!1);var n=this.log.call("loadMetaFromHeader","".concat(t));if(this.env.ready)return n.done("loadMeta - ready");this.log.add("loadMetaFromHeader: start, retry:"+this.retries+", force fallback: "+t);var o=this.getMetaContent();if(!o)return this.retries++,t||this.retries>=100?(new Ie(this.env).dnnSfFallback(),n.done()):(setTimeout((function(){e.loadMetaFromHeader()}),10),n.done("will retry"));this.updateEnv(JSON.parse(o)),this.dynamicPageHelper.startMetaTagObserver(Re),n.done()},e.prototype.updateEnv=function(t){this.log.add("meta env info updated"),this.env.load(t,"meta header"),"oqtane"===t.platform&&this.dynamicPageHelper.startInputRvtObserver()},e.prototype.getMetaContent=function(){var t=this.getJsApiMetaTag();return t?t.getAttribute(Re):null},e.prototype.getJsApiMetaTag=function(){return document.querySelector("meta[name=".concat("_jsApi","]"))},e.prototype.startMetaTagObserver=function(){var t=this;this.observer||(this.observer=new MutationObserver((function(e){for(var n=0,o=e;n<o.length;n++){var r=o[n];"attributes"===r.type&&r.attributeName===Re&&t.updateEnv(JSON.parse(t.getMetaContent()))}})),this.log.add("start observing meta tag"),this.observer.observe(this.getJsApiMetaTag(),{attributes:!0,childList:!1,subtree:!1}))},e}(fe),Be=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fe=function(t){function e(){var e=t.call(this,"Environment",null,"starting")||this;return e.ready=!1,e.source="",e.log.keepData=!0,Te.add("system","environment",e.log),e.metaLoader=new Ne(e),"undefined"!=typeof _jsApi?(e.log.add("found _jsApi, will use"),e.load(_jsApi,"global variable _jsApi")):(e.log.add("will start initializing"),e.metaLoader.loadMetaFromHeader()),e}return Be(e,t),e.prototype.load=function(t,e){var n=this.log.call("load");if(t.root&&!t.api){n.add("root provided, api missing, will auto-complete");var o=t.root.endsWith("/")?"":"/";t.api="".concat(t.root).concat(o).concat("desktopmodules/2sxc/api/")}this.header=t,this.replacedRvt&&(this.header.rvt=this.replacedRvt),this.ready=!0,this.source=e||"external/unknown"+(this.replacedRvt?"+rvt":""),n.return(t,"loaded from "+this.source)},e.prototype.updateRvt=function(t){t&&(this.replacedRvt=t,this.header.rvt=t)},e.prototype.api=function(){return this.ensureReadyOrThrow("api"),this.header.api},e.prototype.appApi=function(){return this.ensureReadyOrThrow("appApi"),this.header.appApi},e.prototype.page=function(){return this.ensureReadyOrThrow("page"),this.header.page},e.prototype.rvtHeader=function(){return this.ensureReadyOrThrow("rvtHeader"),this.header.rvtHeader||_e},e.prototype.rvt=function(){return this.ensureReadyOrThrow("rvt"),this.header.rvt},e.prototype.uiRoot=function(){return this.ensureReadyOrThrow("uiRoot"),this.header.uiRoot||Pe},e.prototype.platform=function(){return this.ensureReadyOrThrow("platform"),this.header.platform||"dnn"},e.prototype.dialogQuery=function(){var t;return null!==(t=this.header.dialogQuery)&&void 0!==t?t:null},e.prototype.ensureReadyOrThrow=function(t){if(!this.ready&&(this.log.add("ensureReady - force last attempt to load MetaHeader for "+t),this.metaLoader.loadMetaFromHeader(!0),!this.ready))throw"Can't find ".concat(t," - something went wrong, pls contact 2sxc.org")},e}(fe),He=function(){function t(t,e){this.api=t,this.sxc=e}return t.prototype.makePromise=function(t){var e=this.api.headers();if(null==window.$)throw new Error("JQuery is now removed from 2sxc installation. Please use newer api like fetch or include JQuery in your project");var n=window.$.ajax({async:!0,dataType:t.dataType||"json",data:JSON.stringify(t.data),contentType:"application/json",type:t.method,url:this.getActionUrl(t),beforeSend:function(t){for(var n in e)e.hasOwnProperty(n)&&t.setRequestHeader(n,e[n])}});return t.preventAutoFail||n.fail(this.sxc.showDetailedHttpError),n},t.prototype.getActionUrl=function(t){var e=t.url||"app/auto/api/"+t.controller+"/"+t.action;return this.sxc.http.apiUrl(e,t.endpoint)+(t.params?"?"+Oe.param(t.params):"")},t}(),Ue=function(){return Ue=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ue.apply(this,arguments)},qe=function(){function t(t){this.sxc=t}return t.prototype.get=function(t,e,n,o){return this.request(t,e,n,o,"GET")},t.prototype.post=function(t,e,n,o){return this.request(t,e,n,o,"POST")},t.prototype.delete=function(t,e,n,o){return this.request(t,e,n,o,"DELETE")},t.prototype.put=function(t,e,n,o){return this.request(t,e,n,o,"PUT")},t.prototype.request=function(t,e,n,o,r){if("object"!=typeof e&&void 0!==e&&(e={id:e}),"string"==typeof t){var i=t.split("/"),a=i[0],s=i[1];""!==a&&""!==s||console.warn("Error: controller or action not defined. Will continue with likely errors."),t={controller:a,action:s,params:e,data:n,url:i.length>2?t:null,preventAutoFail:o}}var c={method:null===r?"POST":r,params:null,preventAutoFail:!1},u=new He(this,this.sxc);return t=Object.assign({},c,t),u.makePromise(t)},t.prototype.fetchRaw=function(t,e,n){var o={},r=this.sxc.ctx,i=t.toLocaleLowerCase();(null==r?void 0:r._autoAppIdsInUrl)&&i.includes("app/auto/")&&((null==r?void 0:r.appId)&&!i.includes("appid=")&&(o.appId=r.appId),(null==r?void 0:r.zoneId)&&!i.includes("zoneid=")&&(o.zoneId=r.zoneId)),t=this.url(t,o),n=n||(e?"POST":"GET");var a=this.headers(n);if(e)try{JSON.parse(e)}catch(t){e=JSON.stringify(e)}return fetch(t,Ue({headers:a,method:n},e&&{body:e}))},t.prototype.fetch=function(t,e,n){return console.warn("You are calling 'fetch' on the sxc.webApi. This is deprecated will stop in 2sxc v15, please use fetchRaw(...) or fetchJson(...) instead."),this.fetchJson(t,e,n)},t.prototype.fetchJson=function(t,e,n){return this.fetchRaw(t,e,n).then((function(t){return t.json()}))},t.prototype.headers=function(t){var e=this.sxc.http.headers(this.sxc.id,this.sxc.cbid,this.sxc.ctx);return t?("GET"===t.toLocaleUpperCase()?e.Accept="application/json":(e.Accept="application/json",e["Content-Type"]="application/json"),e):e},t.prototype.url=function(t,e){if(null==t)return t;var n=t.split("#")[0].split("?"),o=(t=n[0]).split("/");if(2===o.length&&o[0]&&o[1]){var r=o[0],i=o[1];t="app/auto/api/".concat(r,"/").concat(i)}return[t=this.sxc.http.apiUrl(t),e="".concat(n[1]||"","&").concat(e?"string"==typeof e?e:Oe.param(e):"").split("&").filter((function(t){return!!t})).join("&")].filter((function(t){return!!t})).join("?")},t}(),Ve=function(t,e){this.sxc=t,this.partName=e},ze=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),We=function(t){function e(e,n,o){var r=t.call(this,e,"data")||this;if(r.name=n,r.webApi=e.webApi,o+=" name ",null==n)throw o+"is empty";if(-1!=n.indexOf("/")||-1!=n.indexOf("\\"))throw o+"has slashes - not allowed";if(-1!=n.indexOf("?"))throw o+'has "?" - not allowed';return r}return ze(e,t),e}(Ve),Ge=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Je="app/auto/data",$e=function(t){function e(e,n){var o=t.call(this,e,n,"ContentType")||this;return o.name=n,o}return Ge(e,t),e.prototype.getAll=function(){return this.getInternal()},e.prototype.getOne=function(t){return this.getInternal(t)},e.prototype.getMany=function(t,e){throw"not implemented - probably v13.5 or something"},e.prototype.getInternal=function(t,e){var n="".concat(Je,"/").concat(this.name);return!t||"string"!=typeof t&&"number"!=typeof t||(n+="/"+t),this.webApi.fetchJson(this.webApi.url(n,e))},e.prototype.create=function(t,e){var n="".concat(Je,"/").concat(this.name);if(null!=e){"string"==typeof e&&(e={Target:Yt.Entity,Guid:e});try{t.For=e}catch(t){}}return this.webApi.fetchJson(this.webApi.url(n),t,"POST")},e.prototype.update=function(t,e){var n="".concat(Je,"/").concat(this.name,"/").concat(t);return this.webApi.fetchJson(this.webApi.url(n),e,"POST")},e.prototype.delete=function(t){var e="".concat(Je,"/").concat(this.name,"/").concat(t);return this.webApi.fetchRaw(this.webApi.url(e),void 0,"DELETE").then((function(t){return null}))},e}(We),Ke=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Qe=function(t){function e(e,n){var o=t.call(this,e,n,"Query")||this;return o.name=n,o}return Ke(e,t),e.prototype.getAll=function(t,e){return this.getInternal(void 0,t,e)},e.prototype.getStream=function(t,e,n){if(-1!==t.indexOf(","))throw"parameter 'stream' can only contain one stream name for 'getStream'";return this.getInternal(t,e,n).then((function(e){return null!=e&&e.hasOwnProperty(t)?e[t]:[]}))},e.prototype.getStreams=function(t,e,n){return this.getInternal(t,e,n)},e.prototype.getInternal=function(t,e,n){var o="app/auto/query/"+this.name;return t&&"string"==typeof t&&(o+="?stream="+t),this.webApi.fetchJson(this.webApi.url(o,e),n)},e}(We),Xe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ye=function(t){function e(e){return t.call(this,e,"cms")||this}return Xe(e,t),e.prototype.run=function(t){throw'cms.run() requires editing to be on, or page-feature "2sxc.JsCms" to be enabled to work'},e}(Ve),Ze=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tn=function(){return tn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},tn.apply(this,arguments)},en=function(t){function e(e,n,o,r,i){var a=t.call(this,"SxcInstance",null,"Generating for "+e+":"+n)||this;a.id=e,a.cbid=n,a.cacheKey=o,a.root=r,a.ctx=i,a._isSxcInstance=!0,a.manage=null,a.cms=new Ye(a);try{r._manage&&r._manage.initInstance(a)}catch(t){console.error("error in 2sxc - will only log but not throw",t)}var s,c=a.loadEnv(r);return a.env=c.env,a.http=c.http,a.webApi=new qe(a),(s=a.data).on||(s.on=function(){throw nn},Object.defineProperty(s,"sourceUrl",{get:function(){throw nn}})),r._translateInit&&a.manage&&a.manage.context&&a.manage.context.app&&a.manage.context.app.currentLanguage&&r._translateInit(a.manage),a}return Ze(e,t),e.prototype.loadEnv=function(t){var e,n,o=null===(n=null===(e=this.manage)||void 0===e?void 0:e.editContext)||void 0===n?void 0:n.JsApi;if(!o)return{env:t.env,http:t.http};var r=t.env.headers,i=o?tn(tn({},r),o):r,a=new Fe;return a.load(i,"sxc-instance"),{env:a,http:new sn(a)}},e.is=function(t){return t._isSxcInstance},e.prototype.data=function(t){return new $e(this,t)},e.prototype.query=function(t){return new Qe(this,t)},e.prototype.resolveServiceUrl=function(t){var e=t.split("/")[0].toLowerCase();return-1===de.indexOf(e)?t:this.http.apiRoot(le)+e+"/"+t.substring(t.indexOf("/")+1)},e.prototype.showDetailedHttpError=function(t){if(window.console&&console.log(t),404===t.status&&t.config&&t.config.url&&t.config.url.indexOf("/dist/i18n/")>-1)return window.console&&console.log("just fyi: failed to load language resource; will have to use default"),t;if(0===t.status||-1===t.status)return t;var e="Had an error talking to the server (status "+t.status+").",n=t.responseText?JSON.parse(t.responseText):t.data;if(n){var o=n.Message;o&&(e+="\nMessage: "+o);var r=n.MessageDetail||n.ExceptionMessage;r&&(e+="\nDetail: "+r),r&&0===r.indexOf("No action was found")&&(r.indexOf("that matches the name")>0?e+="\n\nTip from 2sxc: you probably got the action-name wrong in your JS.":r.indexOf("that matches the request.")>0&&(e+="\n\nTip from 2sxc: Seems like the parameters are the wrong amount or type.")),o&&0===o.indexOf("Controller")&&o.indexOf("not found")>0&&(e+="\n\nTip from 2sxc: you probably spelled the controller name wrong or forgot to remove the word 'controller' from the call in JS. To call a controller called 'DemoController' only use 'Demo'.")}return e+="\n\nif you are an advanced user you can learn more about what went wrong - discover how on 2sxc.org/help?tag=debug",alert(e),t},e.prototype.isEditMode=function(){var t;return!0===(null===(t=this.manage)||void 0===t?void 0:t._isEditMode())},e.prototype.recreate=function(t){return t&&delete this.root._controllers[this.cacheKey],this.root(this.id,this.cbid)},e}(fe),nn='Warning Obsolete Feature on 2sxc JS: the .data has been obsolete for a long time and is repurposed. \nIf you are calling ".data.on(...)" or ".data.sourceUrl" you are running very old code. \nGuidance to fix this: https://go.2sxc.org/brc-13-id.',on=function(){function t(){}return t.is=function(t){var e=t;return void 0!==e.zoneId&&void 0!==e.appId},t.ensureCompleteOrThrow=function(t){if(t.zoneId&&t.appId)return t;var e="It looks like the id given is a ContextIdentifier, but it's missing either zoneId or appId.";throw console.error(e,t),e},t.toCacheKey=function(t){return this.ensureCompleteOrThrow(t),"".concat(t.zoneId,"/").concat(t.appId,"/").concat(t.pageId,"/").concat(t.moduleId,"/").concat(t.blockId)},t}();(new ue).isDebug();var rn,an=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),sn=function(t){function e(e){var n=t.call(this,"Sxc.Http")||this;return n.env=e,n}return an(e,t),e.prototype.headers=function(t,e,n){var o,r,i,a=this.log.call("headers","".concat(t,", ").concat(e)),s={},c=(null!==(o=null==n?void 0:n.pageId)&&void 0!==o?o:this.env.page()).toString();return t=null!==(r=null==n?void 0:n.moduleId)&&void 0!==r?r:t,e=null!==(i=null==n?void 0:n.blockId)&&void 0!==i?i:e,(null==n?void 0:n._noContextInHttpHeaders)||(t&&(s.ModuleId=t.toString()),e&&(s.ContentBlockId=e.toString()),s.TabId=c,s.PageId=c),s[this.env.rvtHeader()]=this.env.rvt(),a.return(s,"headers(id:".concat(t,", cbid:").concat(e,")"))},e.prototype.apiRoot=function(t){var e=this.log.call("apiRoot"),n=this.env.api().replace("e.x.t",t);return e.return(n,"apiRoot('".concat(t,"')"))},e.prototype.appApiRoot=function(){var t,e=this.log.call("appApiRoot"),n=null!==(t=this.env.appApi())&&void 0!==t?t:this.apiRoot(le);return e.return(n,"appApiRoot()")},e.prototype.apiUrl=function(t,e){var n=this.log.call("apiUrl");if(this.log.add("apiUrl(url:'".concat(t,"', endpointName:'").concat(e,"')")),null==t)return t;if(!t||0==t.indexOf("http:")||0==t.indexOf("https:")||0==t.indexOf("//"))return n.return(t);if(!e&&(0==t.indexOf("/")||0==t.indexOf(".")))return n.return(t);var o=t.toLocaleLowerCase().startsWith("app")?this.appApiRoot():this.apiRoot(e||le);return"/"!=o[o.length-1]&&(o+="/"),"/"==t[0]&&(t=t.slice(1)),n.return(o+t)},e}(fe),cn=function(){function t(){}return t.cViewWithoutContent="_LayoutElement",t.UseExistingTemplate=-1,t}(),un={cms:{autoDump:!1,run:!0},parts:{commandInfo:!1,ToolbarConfigLoaderV10:!1,RuleManager:!1,CommandTippy:!1}};!function(t){t.quickDialog="dist/quick-dialog/",t.eavUi="dist/ng-edit/"}(rn||(rn={}));var ln,pn={cls:{scMenu:"sc-menu"},attr:{toolbar:"toolbar",toolbarData:"data-toolbar",settings:"settings",settingsData:"data-settings"},publishAllowed:"DraftOptional",sel:{scMenu:".sc-menu",tagScMenu:"ul.sc-menu"}},dn={InstanceId:"data-cb-instance",Context:"data-edit-context",ContentBlockId:"data-cb-id"},fn={ContentBlock:cn,DialogPaths:rn,IDs:pn,AttrNames:dn,ClsNames:{UnInitialized:"sc-uninitialized",UnAvailable:"sc-unavailable"},Toolbar:{attrToMarkInitalized:"2sxc-tagtoolbar",attr:{full:"sxc-toolbar",hover:"sxc-toolbar-hover",disable:"data-disable-toolbar"},classes:{oldHover:"sc-element"},selectors:{ofOldHover:".sc-element"},eventNames:{onInit:"toolbar-init"}},Cb:{classes:{name:"sc-content-block"},selectors:{ofName:".sc-content-block"}},Debug:un,Sel:{SxcDivs:"div[".concat(dn.Context,"]")}},hn=function(){function t(){}return t.get=function(t,e){return window.$2sxc(t,e)},t.getEditContext=function(e,n){var o=n?t.getContainerTag(n):t.getTag(e);return t.getEditContextOfTag(o)},t.getEditContextOfTag=function(t){var e=null==t?void 0:t.getAttribute(fn.AttrNames.Context);return JSON.parse(e||"{ }")},t.getContainerTag=function(t){return t.closest(fn.Sel.SxcDivs)},t.getTag=function(t){return document.querySelector("div[".concat(fn.AttrNames.ContentBlockId,"='").concat(t.cbid,"']"))},t}(),gn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vn=function(t){function e(e,n){var o,r,i,a,s,c,u=this;if((u=t.call(this)||this).isContent=!0,u.settingsId=null,u.resourcesId=null,u.supportsAjax=!1,e.contentBlock){var l=e.contentBlock;u.id=l.AppId,u.isContent=null===(o=l.IsContent)||void 0===o||o,u.resourcesId=null!==(r=l.AppResourcesId)&&void 0!==r?r:null,u.settingsId=null!==(i=l.AppSettingsId)&&void 0!==i?i:null,u.appPath=l.AppUrl,u.hasContent=l.HasContent,u.supportsAjax=null!==(a=l.SupportsAjax)&&void 0!==a&&a,u.zoneId=l.ZoneId,u.appName=l.appName}return n&&n.ctx&&(u.id=null!==(s=u.id)&&void 0!==s?s:n.ctx.appId,u.zoneId=null!==(c=u.id)&&void 0!==c?c:n.ctx.zoneId),e.Language&&(u.currentLanguage=e.Language.Current,u.primaryLanguage=e.Language.Primary,u.allLanguages=e.Language.All),u}return gn(e,t),e}((function(){})),yn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mn=function(t){function e(e){var n,o=this;o=t.call(this)||this;var r=e.contentBlock;return r?(o.isCreated=r.IsCreated,o.isList=r.IsList,o.queryId=r.QueryId,o.templateId=r.TemplateId,o.templatePath=r.TemplatePath,o.templateIsShared=r.templateIsShared,o.edition=null!==(n=r.Edition)&&void 0!==n?n:null,o.contentTypeId=r.ContentTypeName,o.contentGroupId=r.Guid,o.viewName=r.viewName,o.renderMs=r.renderMs,o.renderLightspeed=r.renderLightspeed,o):o}return yn(e,t),e}((function(){})),bn=function(t,e){var n,o,r,i,a;this.isEditable=!1,this.allowPublish=!0,this.sxcVersion=pe,this.parameters=null,this.sxcRootUrl="",t.Environment&&(this.id=t.Environment.InstanceId,this.isEditable=null!==(n=t.Environment.IsEditable)&&void 0!==n&&n,this.sxcVersion=null!==(o=t.Environment.SxcVersion)&&void 0!==o?o:pe,this.parameters=t.Environment.parameters,this.sxcRootUrl=null!==(r=t.Environment.SxcRootUrl)&&void 0!==r?r:""),this.id||(this.id=null!==(a=null===(i=null==e?void 0:e.ctx)||void 0===i?void 0:i.moduleId)&&void 0!==a?a:-2742),t.contentBlockReference&&(this.allowPublish=t.contentBlockReference.publishingMode===fn.IDs.publishAllowed)},wn=function(t){},On=function(t,e){var n,o,r,i;t.Environment&&(this.id=t.Environment.PageId),this.id=null!==(i=null!==(r=null!==(n=this.id)&&void 0!==n?n:null===(o=null==e?void 0:e.ctx)||void 0===o?void 0:o.pageId)&&void 0!==r?r:window.$2sxc.env.page())&&void 0!==i?i:-2742},xn=function(t){var e;this.problems=null===(e=t.error)||void 0===e?void 0:e.problems,t.error&&(this.error=t.error.type)},An=function(t){t.Environment},kn=function(t){t.Ui&&(this.autoToolbar=t.Ui.AutoToolbar)},Cn=function(t){this.publishingMode=pn.publishAllowed,this.id=2742e8,this.parentGuid=null,this.parentField=null,this.parentIndex=0,this.partOfPage=!1,Object.assign(this,t)},Sn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tn=function(t){function e(e){var n=t.call(this)||this;return e&&e.User?(n.CanDevelop=e.User.CanDevelop,n.CanAdmin=e.User.CanAdmin,n):n}return Sn(e,t),e.fromContext=function(t){var n=new e;return n.CanDevelop=t.user.CanDevelop,n.CanAdmin=t.user.CanAdmin,n},e}((function(){})),Pn=function(){function t(t,e){this._isContext=!0,this.app=new vn(t,e),this.instance=new bn(t,e),this.user=new Tn(t),this.page=new On(t,e),this.system=new xn(t),this.tenant=new An(t),this.ui=new kn(t)}return t.is=function(t){var e=t;return void 0!==e.sxc&&void 0!==e.instance},t}(),_n=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jn=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.item=new wn(e),o.contentBlockReference=new Cn(e.contentBlockReference),o.contentBlock=new mn(e),o}return _n(e,t),e}(Pn),En=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),In=function(){return In=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},In.apply(this,arguments)},Ln=function(t){function e(e,n){return t.call(this,e,n)||this}return En(e,t),e.prototype.forButton=function(t){var e=In({},this);return e.button=t,e},e}(jn),Dn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Mn=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o._isCtxComplete=!0,o}return Dn(e,t),e.getRule=function(t){var e,n,o;return null===(o=null===(n=null===(e=t.toolbar)||void 0===e?void 0:e.settings)||void 0===n?void 0:n._rules)||void 0===o?void 0:o.find(t.button.id)},e.findContext=function(t,n){var o,r=null;en.is(t)?o=t:"number"==typeof t?o=window.$2sxc(t,n):(o=window.$2sxc(t),r=hn.getContainerTag(t));var i=e.getContextInstance(o,r);return i.sxc=o,i},e.contextCopy=function(t,n){var o=e.findContext(t,n);o.sxc=null;var r=ye.DeepClone(o);return o.sxc=window.$2sxc(t),r},e.getContextInstance=function(t,n){return new e(hn.getEditContext(t,n),t)},e.is=function(t){return t._isCtxComplete},e}(Ln),Rn=function(){return Rn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Rn.apply(this,arguments)},Nn="icon-sxc-",Bn="Toolbar.",Fn=un.parts.CommandTippy,Hn=function(){function t(t){this.name=t}return t.prototype.mergeDefaults=function(t,e,n,o,r){var i=this;if("boolean"!=typeof o)throw"partOfPage in commands not provided, order will be wrong!";this.buttonDefaults=Rn({icon:function(){return"".concat(Nn).concat(e)},title:function(){return"".concat(Bn).concat(t)},uiActionOnly:function(){return n},partOfPage:function(){return o},color:function(){},tippy:function(t,e){var n,o,a=null===(n=Mn.getRule(t))||void 0===n?void 0:n.ui,s=null==a?void 0:a.note;if(!s&&r.notes){var c=r.notes(t);c&&c.length>0&&(s=c[0])}if(null==s?void 0:s.note){var u=null!==(o=null==s?void 0:s.asHtml)&&void 0!==o&&o,l={content:s.note,theme:"light",arrow:!0,delay:[s.delay,s.linger],allowHTML:u,onMount:function(t){(null==s?void 0:s.background)&&(t.popper.querySelector(".tippy-content").style.background=s.background)}};s.interactive&&(l=i.tippyMakeInteractive(l)),l=i.tippyAddLinks(l,s),Fn&&console.log("Command-Tippy",s,l),Xt(e,l)}}},r)},t.prototype.tippyAddLinks=function(t,e){if(!e.links||0===e.links.length)return t;var n=e.links.map((function(t){var e;return'<a class="tippy-button '.concat(t.primary?"tippy-button-primary":"",'" href="').concat(t.url,'" target="_blank">').concat(null!==(e=t.label)&&void 0!==e?e:"🔗 more","</a>")}));return Rn(Rn({},this.tippyMakeInteractive(t)),{allowHTML:!0,content:"<div>".concat(e.note,'<div>\n      <br>\n      <div class="tippy-buttons">').concat(n,"</div>")})},t.prototype.tippyMakeInteractive=function(t){return Rn(Rn({},t),{interactive:!0,appendTo:function(){return document.body}})},t.build=function(e,n,o,r,i,a){var s=new t(e);return s.mergeDefaults(n,o,r,i,a),s},t.clone=function(e,n){var o=new t(n);return o.buttonDefaults=e.buttonDefaults,o},t}(),Un=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qn=function(t){function e(){var e=t.call(this,"Cmd.Catlog")||this;return e.commandList=[],e.list={},e.get=function(t){return e.list[t]},Te.add("system","command-catalog",e.log),e}return Un(e,t),e.singleton=function(){var t;return null!==(t=this._singleton)&&void 0!==t?t:this._singleton=new e},e.add=function(t,e,n,o,r,i){return this.singleton().add(t,e,n,o,r,i)},e.addCommand=function(t){return this.singleton().addCommand(t)},e.prototype.add=function(t,e,n,o,r,i){var a=this.addDef(Hn.build(t,e,n,o,r,i));return this.log.add("add command '".concat(t,"'"),a),a},e.prototype.addCommand=function(t){var e=this.addDef(t);this.log.add("add command '".concat(e.name,"'"),e)},e.prototype.addDef=function(t){return this.list[t.name]?this.list[t.name]!==t&&(this.list[t.name]=t):(this.commandList.push(t),this.list[t.name]=t),t},e}(fe),Vn=function(){function t(){}return t.isPartOfBlockList=function(t){return!(!t.contentBlock.isList||!t.button.command.params.useModuleList||-1===To.getIndex(t))},t.isBlockReference=function(t){return!!t.button.command.params.useModuleList},t.isFieldList=function(t){var e,n=null===(e=t.button)||void 0===e?void 0:e.command.params;return!(!(null==n?void 0:n.fields)||!(null==n?void 0:n.parent))},t.isList=function(t){return this.isPartOfBlockList(t)||this.isFieldList(t)},t.isReferencedItem=function(t){return this.isBlockReference(t)||this.isFieldList(t)},t}(),zn=function(){function t(){}return t.disable=function(t){t.setAttribute(fn.Toolbar.attr.disable,"true")},t.isDisabled=function(t){return!!hn.getTag(t).getAttribute(fn.Toolbar.attr.disable)},t.getFirstAttribute=function(e,n,o){return t.tryGetAttrText(e,n)||t.tryGetAttrText(e,o)||"{}"},t.tryGetAttrText=function(t,e){var n=t.attributes.getNamedItem(e);return n&&n.textContent},t.addClasses=function(t,e){if(e){e.indexOf(",")&&(e=e.replace(","," "));for(var n=e.split(" "),o=0;o<n.length;o++)n[o]&&t.classList.add(n[o])}},t}(),Wn=function(){},Gn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jn=function(t){function e(e){return t.call(this,e)||this}return Gn(e,t),e}(fe),$n=Nn;!function(t){t.setButtonActivationClasses=function(t,e){for(var n=function(t,n){e.forEach((function(e){e.classList.remove("enable-".concat(t),"disable-".concat(t))}))},o=0,r=Object.entries(new Yn);o<r.length;o++){var i=r[o],a=i[0];i[1],n(a)}for(var s=function(t,n){e.forEach((function(e){e.classList.add("".concat(n?"enable":"disable","-").concat(t))}))},c=0,u=Object.entries(t);c<u.length;c++){var l=u[c];s(a=l[0],l[1])}},t.btn=function(t,e,n,o,r,i){return"<a class='sc-content-block-menu-btn sc-cb-action ".concat($n).concat(e," ").concat(o?" sc-invisible ":"").concat(r?" ".concat(fn.ClsNames.UnAvailable," "):"").concat(i,"' data-action='").concat(t,"' data-i18n='[title]QuickInsertMenu.").concat(n,"'></a>")},t.selectedOverlay=Oe.domFromString('<div class="sc-content-block-menu sc-content-block-selected-menu sc-i18n"></div>').map((function(e){return e.append(Oe.domFromString(t.btn("delete","trash-empty","Delete"))[0],Oe.domFromString(t.btn("sendToPane","move","Move",null,null,"sc-cb-mod-only"))[0],Oe.domFromString('<div id="paneList"></div>')[0]),e}))[0]}(ln||(ln={})),ln.selectedOverlay.toggleOverlay=function(t,e){if(t){var n=Ga.get(t);n.yh=n.y+20,Ga.positionAndAlign(ln.selectedOverlay,n),ln.selectedOverlay.target=t,ln.setButtonActivationClasses(e,Array.from(ln.selectedOverlay.querySelectorAll("a")))}else ln.selectedOverlay.style.display="none"};var Kn,Qn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xn="auto",Yn=function(){this.addContent=!0,this.addApp=!0,this.select=!0,this.paste=!0,this.delete=!0,this.move=!0},Zn=function(){this.enable="auto"},to=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qn(e,t),e.getDefault=function(){return{enable:!0,buttons:new Yn,innerBlocks:{enable:Xn},modules:{enable:Xn}}},e}(Zn),eo=function(){function t(){}return t.getFromDom=function(t){var e=JSON.parse(t.getAttribute(Za.blocks.cb.context)||null)||{};return e.appList=[],null!=e&&"string"==typeof e.apps&&e.apps.length>1&&(e.appList=e.apps.split(",").map((function(t){return t.trim()})).filter((function(t){return!!t}))),e},t}(),no=function(){return no=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},no.apply(this,arguments)},oo="sc-tb-show-",ro="end",io="start",ao="auto",so="never",co="right",uo="left",lo="hover",po="default",fo="always",ho="scroll",go=function(){function t(t){var e=this;this.autoAddMore=ao,this.hover=co,this.show=lo,this.delayShow=0,this.follow=po,this.classes="",this.class="",this.color="",null!=t&&Object.keys(this).forEach((function(n){var o=n;t[o]&&(e[n]=t[o])})),this.follow===po&&(this.follow="none")}return t.dropEmptyProperties=function(t){var e=no({},t);return e.autoAddMore||delete e.autoAddMore,e.classes||delete e.classes,e},t.bestAddMorePos=function(t){var e,n,o=null!==(e=null==t?void 0:t.autoAddMore)&&void 0!==e?e:ao;return o===ao?(null===(n=null==t?void 0:t.hover)||void 0===n?void 0:n.startsWith(uo))?io:ro:o===ro||o===io||o===so?o:"right"===o||!0===o?ro:o},t.getDefaults=function(){return new t({autoAddMore:ao,hover:co,show:lo,follow:po})},t.getForEmpty=function(){return new t({autoAddMore:ao,hover:uo,show:lo,follow:po})},t.getForEmptyAsRule=function(){return"settings&autoAddMore=".concat(ao,"&hover=").concat(uo,"&show=").concat(lo,"&follow=").concat(po)},t}(),vo=function(){function t(){}return t.getWorkflow=function(e){if(!e)return t.getDummyManager();for(var n=0,o=e;o&&n++<100;){var r=o.commandWorkflow;if(r)return r;o=o.parentElement}return t.getDummyManager()},t.getDummyManager=function(){return Kn||(Kn=new bo(null,!0)),Kn},t.isCancelled=function(t){return this._isCancelled(t)},t._isCancelled=function(t){return null!=t&&(!1===t||!0===t.cancel)},t}(),yo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mo=function(){return mo=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},mo.apply(this,arguments)},bo=function(t){function e(e,n){void 0===n&&(n=!1);var o=t.call(this,"Cmd.Wrkflw",e,"constructor")||this;return o.isDummy=n,o.steps=[],o}return yo(e,t),e.prototype.add=function(t){var e=this;t&&(Array.isArray(t)?t.forEach((function(t){return e.addOne(t)})):this.addOne(t))},e.prototype.addOne=function(t){t=Ao.initDefaults(t);var e=this.log.call("add","'".concat(t.name,"' for '").concat(t.command,"'-'").concat(t.phase,"'"));if(!t){var n="Trying to add workflow step but didn't get anything";throw e.add(n),n}this.steps.push(t),e.done()},e.prototype.run=function(t){var e=this,n=this.log.call("run","'".concat(t.command,"' for '").concat(t.phase,"'"));if(this.isDummy)return n.done("Dummy workflow, nothing to run, will return a resolved promise"),wo(t);var o=this.steps.filter((function(e){return e.command===t.command||e.command===Bs.all})).filter((function(e){return e.phase===t.phase||e.phase===Oo.all})).filter((function(t){return t.code})).sort((function(t){return t.priority}));return 0===o.length?(n.done("no steps found for this command / phase, will return a resolved promise"),wo(t)):new Promise((function(n,r){for(var i=Promise.resolve(t),a=function(n){var r=o[n];i=i.then((function(n){return e.runNextPromiseIfNotCancelled(n,t,r.code)}))},s=0;s<o.length;s++)a(s);i.then((function(t){n(t)})),i.catch(r)}))},e.prototype.attach=function(t,e){var n,o=this.log.call("attach");t&&(t.commandWorkflow=this,Te.add("workflow",null===(n=e.toolbar)||void 0===n?void 0:n.identifier,this.log),o.done())},e.prototype.runNextPromiseIfNotCancelled=function(t,e,n){var o=vo.isCancelled(t);return(t=t&&"boolean"!=typeof t?t:mo({},e)).cancel=o,o?wo(t):n(t)},e}(fe);function wo(t){return Promise.resolve(t)}var Oo,xo=function(t,e,n,o){void 0===o&&(o=null),this.command=t,this.phase=e,this.context=n,this.result=o,this.cancel=!1};!function(t){t.all="all",t.before="before",t.after="after"}(Oo||(Oo={}));var Ao=function(){function t(){}return t.initDefaults=function(t){var e,n,o,r;if(t.name=null!==(e=t.name)&&void 0!==e?e:"",t.command=null!==(n=t.command)&&void 0!==n?n:Bs.all,t.phase=null!==(o=t.phase)&&void 0!==o?o:Oo.before,t.priority=null!==(r=t.priority)&&void 0!==r?r:1,!t.code||"function"!=typeof t.code)throw"Tried preparing a workflow step, but the promise either doesn't exist or is not a promise factory";return t},t}(),ko=function(){function t(){}return t.raiseToolbarInitEvent=function(t,e,n){var o,r=new bo(null);r.attach(t,n);var i=new CustomEvent(fn.Toolbar.eventNames.onInit,{bubbles:!0,detail:{element:t,identifier:null===(o=n.toolbar)||void 0===o?void 0:o.identifier,workflow:r}});null==e||e.dispatchEvent(i)},t}(),Co=function(){function t(t,e,n){var o,r=this;this.hoverTag=t,this.context=e,this.translator=n,this.toolbarElement=null,this.initialized=!1,this.alwaysShow=!1,this.delayShow=0,this.delayShowTimeout=null,this.watcherActive=!1,this.updateFn=function(){return r.updatePosition(!1)};var i=e.toolbar.settings;this.follow=i.follow,this.alwaysShow="always"===i.show,this.delayShow=null!==(o=i.delayShow)&&void 0!==o?o:0,this.addMouseEvents(t),this.alwaysShow&&this.showPermanently()}return t.prototype.addMouseEvents=function(t){var e=this;t.addEventListener("mouseenter",(function(){0==e.delayShow?e.show():e.delayShowTimeout=setTimeout((function(){e.show()}),e.delayShow)})),this.alwaysShow||t.addEventListener("mouseleave",(function(t){e.delayShowTimeout&&clearTimeout(e.delayShowTimeout),e.initializeIfNecessary();var n=t.relatedTarget;e.toolbarElement.contains(n)||e.toolbarElement===n||e.hide()}))},t.prototype.initializeIfNecessary=function(){var t,e=this;if(!this.initialized){var n=So.getNextToolbarId(),o="".concat(this.context.instance.id,"-").concat(this.context.contentBlockReference.id,"-").concat(n);this.toolbarElement=new Vo(this.context).generate(),this.alwaysShow||this.toolbarElement.addEventListener("mouseleave",(function(t){var n=t.relatedTarget;e.hoverTag.contains(n)||e.hoverTag===n||e.hide()})),document.body.append(this.toolbarElement),this.toolbarElement.setAttribute(So.TagToolbarForAttr,o),this.hoverTag.setAttribute(So.TagToolbarAttr,o);var r=this.toolbarElement.style;r.position="absolute",this.alwaysShow||(r.display="none",r.transition="top 0.5s ease-out"),null===(t=this.translator)||void 0===t||t.autoTranslateMenus(),this.initialized=!0,ko.raiseToolbarInitEvent(this.toolbarElement,this.hoverTag,this.context)}},t.prototype.updatePosition=function(t){var e={top:"auto",left:"auto",right:"auto",viewportOffset:this.hoverTag.getBoundingClientRect().top,bodyOffset:So.getBodyScrollOffset(),tagScrollOffset:0,tagOffset:Oe.offset(this.hoverTag),tagWidth:this.hoverTag.offsetWidth,tagHeight:this.hoverTag.offsetHeight,mousePos:So.mousePosition,win:{scrollY:window.scrollY,width:document.documentElement.clientWidth},padding:4};e.tagScrollOffset=Math.min(e.viewportOffset-e.bodyOffset.top,0),e.top=e.tagOffset.top+4-e.bodyOffset.top;var n=this.follow===fo||"initial"===this.follow&&t||this.follow===ho&&0!==e.tagScrollOffset,o=this.toolbarElement.classList;n?e.top=e.mousePos.y+e.win.scrollY-e.bodyOffset.top-10:o.contains("sc-tb-hover-middle")&&(e.top=e.top+e.tagHeight/2-20),o.contains("sc-tb-hover-right")?e.right=e.win.width-e.tagOffset.left-e.tagWidth+0-e.bodyOffset.left:e.left=e.tagOffset.left+4+e.bodyOffset.left;var r=this.toolbarElement.style;r.top="number"==typeof e.top?"".concat(e.top,"px"):e.top,r.left="number"==typeof e.left?"".concat(e.left,"px"):e.left,r.right="number"==typeof e.right?"".concat(e.right,"px"):e.right},t.prototype.hide=function(){this.alwaysShow||(this.toolbarElement.style.display="none",this.disableScrollWatcher())},t.prototype.show=function(){this.initializeIfNecessary(),this.toolbarElement.style.display="block",this.updatePosition(!0),this.activateScrollWatcher()},t.prototype.showPermanently=function(){this.show(),window.addEventListener("load",this.updateFn),document.addEventListener("readystatechange",this.updateFn),window.addEventListener("resize",this.updateFn)},t.prototype.activateScrollWatcher=function(){this.watcherActive||(this.follow===ho||this.follow===fo)&&(window.addEventListener("scroll",this.updateFn),this.follow===fo&&window.addEventListener("mousemove",this.updateFn),this.watcherActive=!0)},t.prototype.disableScrollWatcher=function(){this.watcherActive&&(window.removeEventListener("scroll",this.updateFn),window.removeEventListener("mousemove",this.updateFn),this.watcherActive=!1)},t}(),So=function(){function t(){}return t.getNextToolbarId=function(){return t.lastMenuId++},t.getBodyScrollOffset=function(){var t=document.body.style.position,e=document.body;if("relative"===t||"absolute"===t){var n=Oe.offset(e);return{top:n.top,left:n.left}}return{top:0,left:0}},t.cleanupOrphanedToolbars=function(){document.querySelectorAll("[".concat(t.TagToolbarForAttr,"]")).forEach((function(e){var n=e.getAttribute(t.TagToolbarForAttr);document.querySelectorAll("[".concat(t.TagToolbarAttr,'="').concat(n,'"]')).length||e.remove()}))},t.TagToolbarAttr="data-tagtoolbar",t.TagToolbarForAttr="data-tagtoolbar-for",t.mousePosition={x:0,y:0},t.lastMenuId=0,t}();window.addEventListener("mousemove",(function(t){So.mousePosition.x=t.clientX,So.mousePosition.y=t.clientY}));var To=function(){function t(){}return t.getIndex=function(t){var e,n=Mn.is(t)?t.button.command.params:t;return null!==(e=n.index)&&void 0!==e?e:n.sortOrder},t}(),Po=function(){return Po=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Po.apply(this,arguments)},_o=function(){function t(t,e){this.name=t,this.params=e,e||(this.params={}),this.command=qn.singleton().get(t)}return t.mergeAdditionalParams=function(t,e){var n={};return t&&(t.name&&(n.action=t.name),t.params&&(n=Po(Po(Po({},n),t.params),e))),t.params=n,n},t}(),jo=function(){function t(e,n){var o;this.classes="",this.inlineWindow=function(){return!1},this.command=e;var r=t.splitName(n);this.id=r.id,(null===(o=null==e?void 0:e.command)||void 0===o?void 0:o.buttonDefaults)&&ye.TypeSafeAssign(this,e.command.buttonDefaults)}return t.splitName=function(t){var e=t.split("=");return{id:e[0],name:e[1]||t}},t.is=function(t){return void 0!==t.command},t.isArray=function(e){return e.length&&t.is(e[0])},t.isPropGen=function(t){return"function"==typeof t},t}(),Eo=function(t,e){var n=this;this.button=t,this.context=e,this.action=function(){return n.button.command},this.classes=function(){return n.button.classes||""},this.color=function(){return Io(n.button.color,n.context,void 0)},this.dialog=function(){return Io(n.button.dialog,n.context,n.button.command.name)},this.disabled=function(){return Io(n.button.disabled,n.context,!1)},this.dynamicClasses=function(){return Io(n.button.dynamicClasses,n.context,"")},this.fullScreen=function(){return Io(n.button.fullScreen,n.context,!1)},this.icon=function(){return Io(n.button.icon,n.context,"")},this.inlineWindow=function(){return Io(n.button.inlineWindow,n.context,!1)},this.newWindow=function(){return Io(n.button.newWindow,n.context,!1)},this.addParamsToLink=function(){return Io(n.button.addParamsToLink,n.context,{})},this.partOfPage=function(){return Io(n.button.partOfPage,n.context,!1)},this.showCondition=function(){return Io(n.button.showCondition,n.context,!0)},this.tippy=function(t,e){var o,r;return null===(r=(o=n.button).tippy)||void 0===r?void 0:r.call(o,t,e)},this.title=function(){return Io(n.button.title,n.context,"unknown-title")},this.uiActionOnly=function(){return Io(n.button.uiActionOnly,n.context,!0)}};function Io(t,e,n){if(null==t)return n;var o=jo.isPropGen(t)?t(e):t;return void 0===o?n:o}!function(){function t(t){this.buttons=t,this.defaults={},this.buttons=t||[]}t.is=function(t){return void 0!==t.buttons},t.isArray=function(t){return t.length&&void 0!==t[0].buttons}}();var Lo=function(){function t(){this.groups=[],this.debug=!1,this.identifier=t.createIdentifier()}return t.createIdentifier=function(){return"Toolbar"+Math.floor(99999*Math.random())},t}(),Do=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Mo=function(t){function e(e,n){var o=t.call(this,n,e.log)||this;return o.parent=e,o}return Do(e,t),e}(fe),Ro=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),No=function(){return No=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},No.apply(this,arguments)},Bo=function(t){function e(e){return t.call(this,e,"Rnd.Button")||this}return Ro(e,t),e.prototype.render=function(t,e){var n,o,r,i,a,s=this.log.call("render","contex: obj, group: ".concat(e,", btn: ").concat(t.button.id,"/").concat(null===(n=t.button.command)||void 0===n?void 0:n.name)),c=new Eo(t.button,t),u=Mn.getRule(t);u&&s.data("rule found, will try to merge params",u);var l=_o.mergeAdditionalParams(c.action(),null==u?void 0:u.params),p=null===(r=null===(o=t.toolbar)||void 0===o?void 0:o.groups)||void 0===r?void 0:r[e],d=null==p?void 0:p.name,f=document.createElement("a"),h=c.disabled();h||f.setAttribute("onclick",this.generateRunJs(u,t,l));var g=(h?" disabled":"")+(c.action()?" sc-".concat(c.action().name):"")+" in-group-".concat(e)+(d?" in-group-".concat(d):"")+" "+(null!==(i=null==u?void 0:u.ui.class)&&void 0!==i?i:"")+" "+(null!==(a=null==u?void 0:u.ui.classes)&&void 0!==a?a:"")+" "+c.classes()+" "+c.dynamicClasses();s.add("classes: "+g),zn.addClasses(f,g),this.setTitle(u,f,c);var v=document.createElement("div");return v.appendChild(this.iconTag(c,u)),f.appendChild(v),this.processColorRules(c,u,t,v),c.tippy(t,f),s.return(f)},e.prototype.setTitle=function(t,e,n){var o,r=this.log.call("setTitles"),i=null===(o=null==t?void 0:t.ui)||void 0===o?void 0:o.title;if(i)if(0===i.indexOf("i18n:")){var a=i.substring(5);r.add("i18nTitle: ".concat(a)),e.setAttribute("data-i18n","[title]".concat(a))}else r.add("uiTitle: ".concat(i)),e.setAttribute("title",i);else a=n.title(),r.add("i18nTitle: ".concat(a)),a&&e.setAttribute("data-i18n","[title]".concat(a));r.done()},e.prototype.processColorRules=function(t,e,n,o){var r,i,a,s=this.log.call("processColorRules"),c=null!==(a=null!==(i=null===(r=null==e?void 0:e.ui)||void 0===r?void 0:r.color)&&void 0!==i?i:t.color())&&void 0!==a?a:n.toolbar.settings.color;if(c&&"number"==typeof c&&(c=c.toString()),c&&"string"==typeof c){var u=c.split(",");u[0]&&(o.style.background=Fo(u[0])),u[1]&&(o.style.color=Fo(u[1]))}return s.done(null!=c?c:"no color")},e.prototype.generateRunJs=function(t,e,n){var o=null==t?void 0:t.context,r=(o=o&&0!==Object.keys(o).length?No(No({},o),{complete:!0}):void 0)?JSON.stringify(o):"".concat(e.instance.id,", ").concat(e.contentBlockReference.id);if("code"===(null==n?void 0:n.action)){n.action;var i=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}(n,["action"]),a={action:n.action,params:i};return"$2sxc(".concat(r,").cms.run(").concat(JSON.stringify(a),", event);")}return"$2sxc(".concat(r,").manage.run(").concat(JSON.stringify(n),", event);")},e.prototype.iconTag=function(t,e){var n,o=this.log.call("iconTag"),r=(null===(n=null==e?void 0:e.ui)||void 0===n?void 0:n.icon)||t.icon();if(r.indexOf("<svg")>-1)return(i=document.createElement("template")).innerHTML=r,o.return(i.content.firstChild,r);var i=document.createElement("i");return zn.addClasses(i,r),i.setAttribute("aria-hidden","true"),o.return(i,r)},e}(Mo);function Fo(t){return t&&t.match("^([A-Fa-f0-9]{6,8})$")?"#"+t:t}var Ho=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Uo=function(t){function e(e){return t.call(this,e,"Rnd.Groups")||this}return Ho(e,t),e.prototype.generate=function(t){for(var e=this.log.call("generate"),n=[],o=t.toolbar.groups,r=0;r<o.length;r++)n=n.concat(this.generateGroup(o[r],t,r));return e.return(n,"total tags: ".concat(n.length))},e.prototype.generateGroup=function(t,e,n){for(var o=this.log.call("generateGroup","group #".concat(n)),r=[],i=t.buttons,a=0;a<i.length;a++){var s=e.forButton(i[a]),c=this.parent.button.render(s,n),u=document.createElement("li");u.appendChild(c),r.push(u)}return o.return(r,"tags: ".concat(r.length))},e}(Mo),qo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Vo=function(t){function e(e){var n,o=this;return(o=t.call(this,"Rnd.Toolbr")||this).context=e,Te.add("toolbar-render",(null===(n=e.toolbar)||void 0===n?void 0:n.identifier)||"",o.log),o.groups=new Uo(o),o.button=new Bo(o),o}return qo(e,t),e.prototype.render=function(){return this.log.call("render").return(this.generate().outerHTML)},e.prototype.generate=function(){var t,e,n=this.log.call("generate"),o=this.context;n.data("toolbar config",o.toolbar);var r=this.groups.generate(o),i=document.createElement("ul");i.setAttribute("toolbar-identifier",null===(t=o.toolbar)||void 0===t?void 0:t.identifier),i.classList.add(pn.cls.scMenu),i.classList.add("group-0");var a=o.toolbar.settings,s=null===(e=a.hover)||void 0===e?void 0:e.split("-");null==s||s.forEach((function(t){return i.classList.add("".concat("sc-tb-hover-").concat(t))})),i.classList.add("".concat(oo).concat(a.show)),-1===To.getIndex(o.toolbar.params)&&i.classList.add("listContent"),o.toolbar.params.fields&&i.classList.add("sc-sublist"),zn.addClasses(i,a.class||a.classes),i.setAttribute("group-count",o.toolbar.groups.length.toString());for(var c=0;c<r.length;c++)i.appendChild(r[c]);return n.return(i,"done")},e}(fe),zo=function(){function t(){}return t.loadFromTag=function(t){try{var e=zn.tryGetAttrText(t,fn.Toolbar.attr.full);if(e){var n=JSON.parse(e);return Array.isArray(n)?{toolbar:n}:n}var o=fn.IDs.attr,r=zn.getFirstAttribute(t,o.toolbar,o.toolbarData),i=zn.getFirstAttribute(t,o.settings,o.settingsData);return{toolbar:JSON.parse(r),settings:JSON.parse(i)}}catch(e){return console.error('error in settings JSON - probably invalid - make sure you quote properties like "name": ...',t,e),null}},t}();function Wo(t){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wo(t)}function Go(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $o(t,e,n){return e&&Jo(t.prototype,e),n&&Jo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ko(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qo(t,e){return Qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qo(t,e)}function Xo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qo(t,e)}function Yo(t,e){if(e&&("object"===Wo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ko(t)}function Zo(t){return Zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zo(t)}function tr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function er(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function nr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function or(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(n),!0).forEach((function(e){tr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rr={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){console&&console[t]&&console[t].apply(console,e)}},ir=new(function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Go(this,t),this.init(e,n)}return $o(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||rr,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,o){return o&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,or(or({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}}]),t}()),ar=function(){function t(){Go(this,t),this.observers={}}return $o(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach((function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter((function(t){return t!==e})):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];if(this.observers[t]){var r=[].concat(this.observers[t]);r.forEach((function(t){t.apply(void 0,n)}))}if(this.observers["*"]){var i=[].concat(this.observers["*"]);i.forEach((function(e){e.apply(e,[t].concat(n))}))}}}]),t}();function sr(){var t,e,n=new Promise((function(n,o){t=n,e=o}));return n.resolve=t,n.reject=e,n}function cr(t){return null==t?"":""+t}function ur(t,e,n){t.forEach((function(t){e[t]&&(n[t]=e[t])}))}function lr(t,e,n){function o(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function r(){return!t||"string"==typeof t}for(var i="string"!=typeof e?[].concat(e):e.split(".");i.length>1;){if(r())return{};var a=o(i.shift());!t[a]&&n&&(t[a]=new n),t=Object.prototype.hasOwnProperty.call(t,a)?t[a]:{}}return r()?{}:{obj:t,k:o(i.shift())}}function pr(t,e,n){var o=lr(t,e,Object);o.obj[o.k]=n}function dr(t,e){var n=lr(t,e),o=n.obj,r=n.k;if(o)return o[r]}function fr(t,e,n){var o=dr(t,n);return void 0!==o?o:dr(e,n)}function hr(t,e,n){for(var o in e)"__proto__"!==o&&"constructor"!==o&&(o in t?"string"==typeof t[o]||t[o]instanceof String||"string"==typeof e[o]||e[o]instanceof String?n&&(t[o]=e[o]):hr(t[o],e[o],n):t[o]=e[o]);return t}function gr(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var vr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function yr(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,(function(t){return vr[t]})):t}var mr="undefined"!=typeof window&&window.navigator&&void 0===window.navigator.userAgentData&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,br=[" ",",","?","!",";"];function wr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wr(Object(n),!0).forEach((function(e){tr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(t){if(t[e])return t[e];for(var o=e.split(n),r=t,i=0;i<o.length;++i){if(!r)return;if("string"==typeof r[o[i]]&&i+1<o.length)return;if(void 0===r[o[i]]){for(var a=2,s=o.slice(i,i+a).join(n),c=r[s];void 0===c&&o.length>i+a;)a++,c=r[s=o.slice(i,i+a).join(n)];if(void 0===c)return;if(null===c)return null;if(e.endsWith(s)){if("string"==typeof c)return c;if(s&&"string"==typeof c[s])return c[s]}var u=o.slice(i+a).join(n);return u?xr(c,u,n):void 0}r=r[o[i]]}return r}}var Ar=function(t){Xo(r,t);var e,n,o=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Zo(e);if(n){var r=Zo(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return Yo(this,t)});function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Go(this,r),e=o.call(this),mr&&ar.call(Ko(e)),e.data=t||{},e.options=n,void 0===e.options.keySeparator&&(e.options.keySeparator="."),void 0===e.options.ignoreJSONStructure&&(e.options.ignoreJSONStructure=!0),e}return $o(r,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator,i=void 0!==o.ignoreJSONStructure?o.ignoreJSONStructure:this.options.ignoreJSONStructure,a=[t,e];n&&"string"!=typeof n&&(a=a.concat(n)),n&&"string"==typeof n&&(a=a.concat(r?n.split(r):n)),t.indexOf(".")>-1&&(a=t.split("."));var s=dr(this.data,a);return s||!i||"string"!=typeof n?s:xr(this.data&&this.data[t]&&this.data[t][e],n,r)}},{key:"addResource",value:function(t,e,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},i=this.options.keySeparator;void 0===i&&(i=".");var a=[t,e];n&&(a=a.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(o=e,e=(a=t.split("."))[1]),this.addNamespaces(e),pr(this.data,a,o),r.silent||this.emit("added",t,e,n,o)}},{key:"addResources",value:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"!=typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(t,e,r,n[r],{silent:!0});o.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,o,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[t,e];t.indexOf(".")>-1&&(o=n,n=e,e=(a=t.split("."))[1]),this.addNamespaces(e);var s=dr(this.data,a)||{};o?hr(s,n,r):s=Or(Or({},s),n),pr(this.data,a,s),i.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?Or(Or({},{}),this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"hasLanguageSomeTranslations",value:function(t){var e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find((function(t){return e[t]&&Object.keys(e[t]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),r}(ar),kr={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,o,r){var i=this;return t.forEach((function(t){i.processors[t]&&(e=i.processors[t].process(e,n,o,r))})),e}};function Cr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Sr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cr(Object(n),!0).forEach((function(e){tr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Tr={},Pr=function(t){Xo(r,t);var e,n,o=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Zo(e);if(n){var r=Zo(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return Yo(this,t)});function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Go(this,r),e=o.call(this),mr&&ar.call(Ko(e)),ur(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,Ko(e)),e.options=n,void 0===e.options.keySeparator&&(e.options.keySeparator="."),e.logger=ir.create("translator"),e}return $o(r,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==t)return!1;var n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var o=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,r=e.ns||this.options.defaultNS||[],i=n&&t.indexOf(n)>-1,a=!(this.options.userDefinedKeySeparator||e.keySeparator||this.options.userDefinedNsSeparator||e.nsSeparator||function(t,e,n){e=e||"",n=n||"";var o=br.filter((function(t){return e.indexOf(t)<0&&n.indexOf(t)<0}));if(0===o.length)return!0;var r=new RegExp("(".concat(o.map((function(t){return"?"===t?"\\?":t})).join("|"),")")),i=!r.test(t);if(!i){var a=t.indexOf(n);a>0&&!r.test(t.substring(0,a))&&(i=!0)}return i}(t,n,o));if(i&&!a){var s=t.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:t,namespaces:r};var c=t.split(n);(n!==o||n===o&&this.options.ns.indexOf(c[0])>-1)&&(r=c.shift()),t=c.join(o)}return"string"==typeof r&&(r=[r]),{key:t,namespaces:r}}},{key:"translate",value:function(t,e,n){var o=this;if("object"!==Wo(e)&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);var i=void 0!==e.returnDetails?e.returnDetails:this.options.returnDetails,a=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,s=this.extractFromKey(t[t.length-1],e),c=s.key,u=s.namespaces,l=u[u.length-1],p=e.lng||this.language,d=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&"cimode"===p.toLowerCase()){if(d){var f=e.nsSeparator||this.options.nsSeparator;return i?(h.res="".concat(l).concat(f).concat(c),h):"".concat(l).concat(f).concat(c)}return i?(h.res=c,h):c}var h=this.resolve(t,e),g=h&&h.res,v=h&&h.usedKey||c,y=h&&h.exactUsedKey||c,m=Object.prototype.toString.apply(g),b=["[object Number]","[object Function]","[object RegExp]"],w=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays,O=!this.i18nFormat||this.i18nFormat.handleAsObject,x="string"!=typeof g&&"boolean"!=typeof g&&"number"!=typeof g;if(O&&g&&x&&b.indexOf(m)<0&&("string"!=typeof w||"[object Array]"!==m)){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var A=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,g,Sr(Sr({},e),{},{ns:u})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");return i?(h.res=A,h):A}if(a){var k="[object Array]"===m,C=k?[]:{},S=k?y:v;for(var T in g)if(Object.prototype.hasOwnProperty.call(g,T)){var P="".concat(S).concat(a).concat(T);C[T]=this.translate(P,Sr(Sr({},e),{joinArrays:!1,ns:u})),C[T]===P&&(C[T]=g[T])}g=C}}else if(O&&"string"==typeof w&&"[object Array]"===m)(g=g.join(w))&&(g=this.extendTranslation(g,t,e,n));else{var _=!1,j=!1,E=void 0!==e.count&&"string"!=typeof e.count,I=r.hasDefaultValue(e),L=E?this.pluralResolver.getSuffix(p,e.count,e):"",D=e["defaultValue".concat(L)]||e.defaultValue;!this.isValidLookup(g)&&I&&(_=!0,g=D),this.isValidLookup(g)||(j=!0,g=c);var M=e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,R=M&&j?void 0:g,N=I&&D!==g&&this.options.updateMissing;if(j||_||N){if(this.logger.log(N?"updateKey":"missingKey",p,l,c,N?D:g),a){var B=this.resolve(c,Sr(Sr({},e),{},{keySeparator:!1}));B&&B.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var F=[],H=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&H&&H[0])for(var U=0;U<H.length;U++)F.push(H[U]);else"all"===this.options.saveMissingTo?F=this.languageUtils.toResolveHierarchy(e.lng||this.language):F.push(e.lng||this.language);var q=function(t,n,r){var i=I&&r!==g?r:R;o.options.missingKeyHandler?o.options.missingKeyHandler(t,l,n,i,N,e):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(t,l,n,i,N,e),o.emit("missingKey",t,l,n,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?F.forEach((function(t){o.pluralResolver.getSuffixes(t,e).forEach((function(n){q([t],c+n,e["defaultValue".concat(n)]||D)}))})):q(F,c,D))}g=this.extendTranslation(g,t,e,h,n),j&&g===c&&this.options.appendNamespaceToMissingKey&&(g="".concat(l,":").concat(c)),(j||_)&&this.options.parseMissingKeyHandler&&(g="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(l,":").concat(c):c,_?g:void 0):this.options.parseMissingKeyHandler(g))}return i?(h.res=g,h):g}},{key:"extendTranslation",value:function(t,e,n,o,r){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,Sr(Sr({},this.options.interpolation.defaultVariables),n),o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Sr(Sr({},n),{interpolation:Sr(Sr({},this.options.interpolation),n.interpolation)}));var a,s="string"==typeof t&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(s){var c=t.match(this.interpolator.nestingRegexp);a=c&&c.length}var u=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=Sr(Sr({},this.options.interpolation.defaultVariables),u)),t=this.interpolator.interpolate(t,u,n.lng||this.language,n),s){var l=t.match(this.interpolator.nestingRegexp);a<(l&&l.length)&&(n.nest=!1)}!1!==n.nest&&(t=this.interpolator.nest(t,(function(){for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return r&&r[0]===o[0]&&!n.context?(i.logger.warn("It seems you are nesting recursively key: ".concat(o[0]," in key: ").concat(e[0])),null):i.translate.apply(i,o.concat([e]))}),n)),n.interpolation&&this.interpolator.reset()}var p=n.postProcess||this.options.postProcess,d="string"==typeof p?[p]:p;return null!=t&&d&&d.length&&!1!==n.applyPostProcessor&&(t=kr.handle(d,t,e,this.options&&this.options.postProcessPassResolved?Sr({i18nResolved:o},n):n,this)),t}},{key:"resolve",value:function(t){var e,n,o,r,i,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach((function(t){if(!a.isValidLookup(e)){var c=a.extractFromKey(t,s),u=c.key;n=u;var l=c.namespaces;a.options.fallbackNS&&(l=l.concat(a.options.fallbackNS));var p=void 0!==s.count&&"string"!=typeof s.count,d=p&&!s.ordinal&&0===s.count&&a.pluralResolver.shouldUseIntlApi(),f=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,h=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);l.forEach((function(t){a.isValidLookup(e)||(i=t,!Tr["".concat(h[0],"-").concat(t)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(i)&&(Tr["".concat(h[0],"-").concat(t)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(h.join(", "),'" won\'t get resolved as namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((function(n){if(!a.isValidLookup(e)){r=n;var i,c=[u];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(c,u,n,t,s);else{var l;p&&(l=a.pluralResolver.getSuffix(n,s.count,s));var h="".concat(a.options.pluralSeparator,"zero");if(p&&(c.push(u+l),d&&c.push(u+h)),f){var g="".concat(u).concat(a.options.contextSeparator).concat(s.context);c.push(g),p&&(c.push(g+l),d&&c.push(g+h))}}for(;i=c.pop();)a.isValidLookup(e)||(o=i,e=a.getResource(n,t,i,s))}})))}))}})),{res:e,usedKey:n,exactUsedKey:o,usedLng:r,usedNS:i}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,o):this.resourceStore.getResource(t,e,n,o)}}],[{key:"hasDefaultValue",value:function(t){var e="defaultValue";for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&void 0!==t[n])return!0;return!1}}]),r}(ar);function _r(t){return t.charAt(0).toUpperCase()+t.slice(1)}var jr=function(){function t(e){Go(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ir.create("languageUtils")}return $o(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map((function(t){return t.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=_r(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=_r(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=_r(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var e,n=this;return t?(t.forEach((function(t){if(!e){var o=n.formatLanguageCode(t);n.options.supportedLngs&&!n.isSupportedCode(o)||(e=o)}})),!e&&this.options.supportedLngs&&t.forEach((function(t){if(!e){var o=n.getLanguagePartFromCode(t);if(n.isSupportedCode(o))return e=o;e=n.options.supportedLngs.find((function(t){if(0===t.indexOf(o))return t}))}})),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e):null}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),"string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,o=this.getFallbackCodes(e||this.options.fallbackLng||[],t),r=[],i=function(t){t&&(n.isSupportedCode(t)?r.push(t):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(t)))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(t))):"string"==typeof t&&i(this.formatLanguageCode(t)),o.forEach((function(t){r.indexOf(t)<0&&i(n.formatLanguageCode(t))})),r}}]),t}(),Er=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Ir={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0==t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1==t?0:2==t?1:(t<0||t>10)&&t%10==0?2:3)}},Lr=["v1","v2","v3"],Dr={zero:0,one:1,two:2,few:3,many:4,other:5};function Mr(){var t={};return Er.forEach((function(e){e.lngs.forEach((function(n){t[n]={numbers:e.nr,plurals:Ir[e.fc]}}))})),t}var Rr=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Go(this,t),this.languageUtils=e,this.options=n,this.logger=ir.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Mr()}return $o(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:e.ordinal?"ordinal":"cardinal"})}catch(t){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(t,e);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(t,n).map((function(t){return"".concat(e).concat(t)}))}},{key:"getSuffixes",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.getRule(t,n);return o?this.shouldUseIntlApi()?o.resolvedOptions().pluralCategories.sort((function(t,e){return Dr[t]-Dr[e]})).map((function(t){return"".concat(e.options.prepend).concat(t)})):o.numbers.map((function(o){return e.getSuffix(t,o,n)})):[]}},{key:"getSuffix",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.getRule(t,n);return o?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(o.select(e)):this.getSuffixRetroCompatible(o,e):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,e){var n=this,o=t.noAbs?t.plurals(e):t.plurals(Math.abs(e)),r=t.numbers[o];this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var i=function(){return n.options.prepend&&r.toString()?n.options.prepend+r.toString():r.toString()};return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?"_plural_".concat(r.toString()):i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]?i():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}},{key:"shouldUseIntlApi",value:function(){return!Lr.includes(this.options.compatibilityJSON)}}]),t}();function Nr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Br(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nr(Object(n),!0).forEach((function(e){tr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Go(this,t),this.logger=ir.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return $o(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:yr,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?gr(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?gr(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?gr(e.nestingPrefix):e.nestingPrefixEscaped||gr("$t("),this.nestingSuffix=e.nestingSuffix?gr(e.nestingSuffix):e.nestingSuffixEscaped||gr(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=void 0!==e.alwaysFormat&&e.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,o){var r,i,a,s=this,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(t){return t.replace(/\$/g,"$$$$")}var l=function(t){if(t.indexOf(s.formatSeparator)<0){var r=fr(e,c,t);return s.alwaysFormat?s.format(r,void 0,n,Br(Br(Br({},o),e),{},{interpolationkey:t})):r}var i=t.split(s.formatSeparator),a=i.shift().trim(),u=i.join(s.formatSeparator).trim();return s.format(fr(e,c,a),u,n,Br(Br(Br({},o),e),{},{interpolationkey:a}))};this.resetRegExp();var p=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,d=o&&o.interpolation&&void 0!==o.interpolation.skipOnVariables?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(t){return u(t)}},{regex:this.regexp,safeValue:function(t){return s.escapeValue?u(s.escape(t)):u(t)}}].forEach((function(e){for(a=0;r=e.regex.exec(t);){var n=r[1].trim();if(void 0===(i=l(n)))if("function"==typeof p){var c=p(t,r,o);i="string"==typeof c?c:""}else if(o&&o.hasOwnProperty(n))i="";else{if(d){i=r[0];continue}s.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(t)),i=""}else"string"==typeof i||s.useRawValueToEscape||(i=cr(i));var u=e.safeValue(i);if(t=t.replace(r[0],u),d?(e.regex.lastIndex+=i.length,e.regex.lastIndex-=r[0].length):e.regex.lastIndex=0,++a>=s.maxReplaces)break}})),t}},{key:"nest",value:function(t,e){var n,o,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Br({},i);function s(t,e){var n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;var o=t.split(new RegExp("".concat(n,"[ ]*{"))),r="{".concat(o[1]);t=o[0],r=(r=this.interpolate(r,a)).replace(/'/g,'"');try{a=JSON.parse(r),e&&(a=Br(Br({},e),a))}catch(e){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),e),"".concat(t).concat(n).concat(r)}return delete a.defaultValue,t}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(t);){var c=[],u=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var l=n[1].split(this.formatSeparator).map((function(t){return t.trim()}));n[1]=l.shift(),c=l,u=!0}if((o=e(s.call(this,n[1].trim(),a),a))&&n[0]===t&&"string"!=typeof o)return o;"string"!=typeof o&&(o=cr(o)),o||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(t)),o=""),u&&(o=c.reduce((function(t,e){return r.format(t,e,i.lng,Br(Br({},i),{},{interpolationkey:n[1].trim()}))}),o.trim())),t=t.replace(n[0],o),this.regexp.lastIndex=0}return t}}]),t}();function Hr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Ur(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hr(Object(n),!0).forEach((function(e){tr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var qr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Go(this,t),this.logger=ir.create("formatter"),this.options=e,this.formats={number:function(t,e,n){return new Intl.NumberFormat(e,n).format(t)},currency:function(t,e,n){return new Intl.NumberFormat(e,Ur(Ur({},n),{},{style:"currency"})).format(t)},datetime:function(t,e,n){return new Intl.DateTimeFormat(e,Ur({},n)).format(t)},relativetime:function(t,e,n){return new Intl.RelativeTimeFormat(e,Ur({},n)).format(t,n.range||"day")},list:function(t,e,n){return new Intl.ListFormat(e,Ur({},n)).format(t)}},this.init(e)}return $o(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=e.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(t,e){this.formats[t.toLowerCase().trim()]=e}},{key:"format",value:function(t,e,n,o){var r=this;return e.split(this.formatSeparator).reduce((function(t,e){var i=function(t){var e=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){var o=t.split("(");e=o[0].toLowerCase().trim();var r=o[1].substring(0,o[1].length-1);"currency"===e&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===e&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach((function(t){if(t){var e=function(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return er(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?er(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.split(":")),o=e[0],r=e.slice(1).join(":").trim().replace(/^'+|'+$/g,"");n[o.trim()]||(n[o.trim()]=r),"false"===r&&(n[o.trim()]=!1),"true"===r&&(n[o.trim()]=!0),isNaN(r)||(n[o.trim()]=parseInt(r,10))}}))}return{formatName:e,formatOptions:n}}(e),a=i.formatName,s=i.formatOptions;if(r.formats[a]){var c=t;try{var u=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},l=u.locale||u.lng||o.locale||o.lng||n;c=r.formats[a](t,l,Ur(Ur(Ur({},s),o),u))}catch(t){r.logger.warn(t)}return c}return r.logger.warn("there was no format function for ".concat(a)),t}),t)}}]),t}();function Vr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function zr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vr(Object(n),!0).forEach((function(e){tr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Wr=function(t){Xo(r,t);var e,n,o=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Zo(e);if(n){var r=Zo(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return Yo(this,t)});function r(t,e,n){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Go(this,r),i=o.call(this),mr&&ar.call(Ko(i)),i.backend=t,i.store=e,i.services=n,i.languageUtils=n.languageUtils,i.options=a,i.logger=ir.create("backendConnector"),i.waitingReads=[],i.maxParallelReads=a.maxParallelReads||10,i.readingCalls=0,i.maxRetries=a.maxRetries>=0?a.maxRetries:5,i.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(n,a.backend,a),i}return $o(r,[{key:"queueLoad",value:function(t,e,n,o){var r=this,i={},a={},s={},c={};return t.forEach((function(t){var o=!0;e.forEach((function(e){var s="".concat(t,"|").concat(e);!n.reload&&r.store.hasResourceBundle(t,e)?r.state[s]=2:r.state[s]<0||(1===r.state[s]?void 0===a[s]&&(a[s]=!0):(r.state[s]=1,o=!1,void 0===a[s]&&(a[s]=!0),void 0===i[s]&&(i[s]=!0),void 0===c[e]&&(c[e]=!0)))})),o||(s[t]=!0)})),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(c)}}},{key:"loaded",value:function(t,e,n){var o=t.split("|"),r=o[0],i=o[1];e&&this.emit("failedLoading",r,i,e),n&&this.store.addResourceBundle(r,i,n),this.state[t]=e?-1:2;var a={};this.queue.forEach((function(n){var o,s,c,u,l;o=n.loaded,s=i,(u=(c=lr(o,[r],Object)).obj)[l=c.k]=u[l]||[],u[l].push(s),function(t,e){void 0!==t.pending[e]&&(delete t.pending[e],t.pendingCount--)}(n,t),e&&n.errors.push(e),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((function(t){a[t]||(a[t]={});var e=n.loaded[t];e.length&&e.forEach((function(e){void 0===a[t][e]&&(a[t][e]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(t){return!t.done}))}},{key:"read",value:function(t,e,n){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;return t.length?this.readingCalls>=this.maxParallelReads?void this.waitingReads.push({lng:t,ns:e,fcName:n,tried:r,wait:i,callback:a}):(this.readingCalls++,this.backend[n](t,e,(function(s,c){if(o.readingCalls--,o.waitingReads.length>0){var u=o.waitingReads.shift();o.read(u.lng,u.ns,u.fcName,u.tried,u.wait,u.callback)}s&&c&&r<o.maxRetries?setTimeout((function(){o.read.call(o,t,e,n,r+1,2*i,a)}),i):a(s,c)}))):a(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var i=this.queueLoad(t,e,o,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach((function(t){n.loadOne(t)}))}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=t.split("|"),r=o[0],i=o[1];this.read(r,i,"read",void 0,void 0,(function(o,a){o&&e.logger.warn("".concat(n,"loading namespace ").concat(i," for language ").concat(r," failed"),o),!o&&a&&e.logger.log("".concat(n,"loaded namespace ").concat(i," for language ").concat(r),a),e.loaded(t,o,a)}))}},{key:"saveMissing",value:function(t,e,n,o,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(t,e,n,o,null,zr(zr({},i),{},{isUpdate:r})),t&&t[0]&&this.store.addResource(t[0],e,n,o))}}]),r}(ar);function Gr(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===Wo(t[1])&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"===Wo(t[2])||"object"===Wo(t[3])){var n=t[3]||t[2];Object.keys(n).forEach((function(t){e[t]=n[t]}))}return e},interpolation:{escapeValue:!0,format:function(t,e,n,o){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Jr(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function $r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$r(Object(n),!0).forEach((function(e){tr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qr(){}function Xr(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach((function(e){"function"==typeof t[e]&&(t[e]=t[e].bind(t))}))}var Yr=function(t){Xo(r,t);var e,n,o=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Zo(e);if(n){var r=Zo(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return Yo(this,t)});function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(Go(this,r),t=o.call(this),mr&&ar.call(Ko(t)),t.options=Jr(e),t.services={},t.logger=ir,t.modules={external:[]},Xr(Ko(t)),n&&!t.isInitialized&&!e.isClone){if(!t.options.initImmediate)return t.init(e,n),Yo(t,Ko(t));setTimeout((function(){t.init(e,n)}),0)}return t}return $o(r,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof e&&(n=e,e={}),!e.defaultNS&&!1!==e.defaultNS&&e.ns&&("string"==typeof e.ns?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));var o=Gr();function r(t){return t?"function"==typeof t?new t:t:null}if(this.options=Kr(Kr(Kr({},o),this.options),Jr(e)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=Kr(Kr({},o.interpolation),this.options.interpolation)),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator),!this.options.isClone){var i;this.modules.logger?ir.init(r(this.modules.logger),this.options):ir.init(null,this.options),this.modules.formatter?i=this.modules.formatter:"undefined"!=typeof Intl&&(i=qr);var a=new jr(this.options);this.store=new Ar(this.options.resources,this.options);var s=this.services;s.logger=ir,s.resourceStore=this.store,s.languageUtils=a,s.pluralResolver=new Rr(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!i||this.options.interpolation.format&&this.options.interpolation.format!==o.interpolation.format||(s.formatter=r(i),s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new Fr(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new Wr(r(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];t.emit.apply(t,[e].concat(o))})),this.modules.languageDetector&&(s.languageDetector=r(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=r(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new Pr(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];t.emit.apply(t,[e].concat(o))})),this.modules.external.forEach((function(e){e.init&&e.init(t)}))}if(this.format=this.options.interpolation.format,n||(n=Qr),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&"dev"!==c[0]&&(this.options.lng=c[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var u=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];u.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments),t}}));var p=sr(),d=function(){var e=function(e,o){t.isInitialized&&!t.initializedStoreOnce&&t.logger.warn("init: i18next is already initialized. You should call init just once!"),t.isInitialized=!0,t.options.isClone||t.logger.log("initialized",t.options),t.emit("initialized",t.options),p.resolve(o),n(e,o)};if(t.languages&&"v1"!==t.options.compatibilityAPI&&!t.isInitialized)return e(null,t.t.bind(t));t.changeLanguage(t.options.lng,e)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),p}},{key:"loadResources",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qr,o=n,r="string"==typeof t?t:this.language;if("function"==typeof t&&(o=t),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return o();var i=[],a=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach((function(t){i.indexOf(t)<0&&i.push(t)}))};if(r)a(r);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(t){return a(t)}))}this.options.preload&&this.options.preload.forEach((function(t){return a(t)})),this.services.backendConnector.load(i,this.options.ns,(function(t){t||e.resolvedLanguage||!e.language||e.setResolvedLanguage(e.language),o(t)}))}else o(null)}},{key:"reloadResources",value:function(t,e,n){var o=sr();return t||(t=this.languages),e||(e=this.options.ns),n||(n=Qr),this.services.backendConnector.reload(t,e,(function(t){o.resolve(),n(t)})),o}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&kr.addPostProcessor(t),"formatter"===t.type&&(this.modules.formatter=t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"setResolvedLanguage",value:function(t){if(t&&this.languages&&!(["cimode","dev"].indexOf(t)>-1))for(var e=0;e<this.languages.length;e++){var n=this.languages[e];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(t,e){var n=this;this.isLanguageChangingTo=t;var o=sr();this.emit("languageChanging",t);var r=function(t){n.language=t,n.languages=n.services.languageUtils.toResolveHierarchy(t),n.resolvedLanguage=void 0,n.setResolvedLanguage(t)},i=function(i){t||i||!n.services.languageDetector||(i=[]);var a="string"==typeof i?i:n.services.languageUtils.getBestMatchFromCodes(i);a&&(n.language||r(a),n.translator.language||n.translator.changeLanguage(a),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(a)),n.loadResources(a,(function(t){!function(t,i){i?(r(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,o.resolve((function(){return n.t.apply(n,arguments)})),e&&e(t,(function(){return n.t.apply(n,arguments)}))}(t,a)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(t):i(this.services.languageDetector.detect()),o}},{key:"getFixedT",value:function(t,e,n){var o=this,r=function t(e,r){var i;if("object"!==Wo(r)){for(var a=arguments.length,s=new Array(a>2?a-2:0),c=2;c<a;c++)s[c-2]=arguments[c];i=o.options.overloadTranslationOptionHandler([e,r].concat(s))}else i=Kr({},r);i.lng=i.lng||t.lng,i.lngs=i.lngs||t.lngs,i.ns=i.ns||t.ns,i.keyPrefix=i.keyPrefix||n||t.keyPrefix;var u=o.options.keySeparator||".",l=i.keyPrefix?"".concat(i.keyPrefix).concat(u).concat(e):e;return o.t(l,i)};return"string"==typeof t?r.lng=t:r.lngs=t,r.ns=e,r.keyPrefix=n,r}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var o=this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===o.toLowerCase())return!0;var a=function(t,n){var o=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===o||2===o};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!(!this.hasResourceBundle(o,t)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!a(o,t)||r&&!a(i,t)))}},{key:"loadNamespaces",value:function(t,e){var n=this,o=sr();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach((function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)})),this.loadResources((function(t){o.resolve(),e&&e(t)})),o):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=sr();"string"==typeof t&&(t=[t]);var o=this.options.preload||[],r=t.filter((function(t){return o.indexOf(t)<0}));return r.length?(this.options.preload=o.concat(r),this.loadResources((function(t){n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){return t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),t?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr":"rtl"}},{key:"cloneInstance",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qr,o=Kr(Kr(Kr({},this.options),e),{isClone:!0}),i=new r(o),a=["store","services","language"];return a.forEach((function(e){i[e]=t[e]})),i.services=Kr({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i.translator=new Pr(i.services,i.options),i.translator.on("*",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];i.emit.apply(i,[t].concat(n))})),i.init(o,n),i.translator.options=i.options,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),r}(ar);tr(Yr,"createInstance",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Yr(t,e)}));var Zr=Yr.createInstance();Zr.createInstance=Yr.createInstance,Zr.createInstance,Zr.init,Zr.loadResources,Zr.reloadResources,Zr.use,Zr.changeLanguage,Zr.getFixedT,Zr.t,Zr.exists,Zr.setDefaultNamespace,Zr.hasLoadedNamespace,Zr.loadNamespaces,Zr.loadLanguages;const ti=Zr;function ei(t){return ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ei(t)}var ni=[],oi=ni.forEach,ri=ni.slice;function ii(t){return oi.call(ri.call(arguments,1),(function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])})),t}function ai(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":ei(XMLHttpRequest))}var si,ci,ui,li=r(154),pi=r.t(li,2);function di(t){return di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},di(t)}"function"==typeof fetch&&("undefined"!=typeof global&&global.fetch?si=global.fetch:"undefined"!=typeof window&&window.fetch&&(si=window.fetch)),ai()&&("undefined"!=typeof global&&global.XMLHttpRequest?ci=global.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(ci=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof global&&global.ActiveXObject?ui=global.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(ui=window.ActiveXObject)),si||!pi||ci||ui||(si=li||pi),"function"!=typeof si&&(si=void 0);var fi=function(t,e){if(e&&"object"===di(e)){var n="";for(var o in e)n+="&"+encodeURIComponent(o)+"="+encodeURIComponent(e[o]);if(!n)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+n.slice(1)}return t};const hi=function(t,e,n,o){return"function"==typeof n&&(o=n,n=void 0),o=o||function(){},si?function(t,e,n,o){t.queryStringParams&&(e=fi(e,t.queryStringParams));var r=ii({},"function"==typeof t.customHeaders?t.customHeaders():t.customHeaders);n&&(r["Content-Type"]="application/json"),si(e,ii({method:n?"POST":"GET",body:n?t.stringify(n):void 0,headers:r},"function"==typeof t.requestOptions?t.requestOptions(n):t.requestOptions)).then((function(t){if(!t.ok)return o(t.statusText||"Error",{status:t.status});t.text().then((function(e){o(null,{status:t.status,data:e})})).catch(o)})).catch(o)}(t,e,n,o):ai()||"function"==typeof ActiveXObject?function(t,e,n,o){n&&"object"===di(n)&&(n=fi("",n).slice(1)),t.queryStringParams&&(e=fi(e,t.queryStringParams));try{var r;(r=ci?new ci:new ui("MSXML2.XMLHTTP.3.0")).open(n?"POST":"GET",e,1),t.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.withCredentials=!!t.withCredentials,n&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.overrideMimeType&&r.overrideMimeType("application/json");var i=t.customHeaders;if(i="function"==typeof i?i():i)for(var a in i)r.setRequestHeader(a,i[a]);r.onreadystatechange=function(){r.readyState>3&&o(r.status>=400?r.statusText:null,{status:r.status,data:r.responseText})},r.send(n)}catch(t){console&&console.log(t)}}(t,e,n,o):void 0};function gi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var yi=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,e,n){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e,n||"")},request:hi,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},mi=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};gi(this,t),this.services=e,this.options=n,this.allOptions=o,this.type="backend",this.init(e,n,o)}var e,n;return e=t,n=[{key:"init",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=t,this.options=ii(n,this.options||{},yi()),this.allOptions=o,this.services&&this.options.reloadInterval&&setInterval((function(){return e.reload()}),this.options.reloadInterval)}},{key:"readMulti",value:function(t,e,n){this._readAny(t,t,e,e,n)}},{key:"read",value:function(t,e,n){this._readAny([t],t,[e],e,n)}},{key:"_readAny",value:function(t,e,n,o,r){var i,a=this,s=this.options.loadPath;"function"==typeof this.options.loadPath&&(s=this.options.loadPath(t,n)),(s=function(t){return!!t&&"function"==typeof t.then}(i=s)?i:Promise.resolve(i)).then((function(i){if(!i)return r(null,{});var s=a.services.interpolator.interpolate(i,{lng:t.join("+"),ns:n.join("+")});a.loadUrl(s,r,e,o)}))}},{key:"loadUrl",value:function(t,e,n,o){var r=this;this.options.request(this.options,t,void 0,(function(i,a){if(a&&(a.status>=500&&a.status<600||!a.status))return e("failed loading "+t+"; status code: "+a.status,!0);if(a&&a.status>=400&&a.status<500)return e("failed loading "+t+"; status code: "+a.status,!1);if(!a&&i&&i.message&&i.message.indexOf("Failed to fetch")>-1)return e("failed loading "+t+": "+i.message,!0);if(i)return e(i,!1);var s,c;try{s="string"==typeof a.data?r.options.parse(a.data,n,o):a.data}catch(e){c="failed parsing "+t+" to json"}if(c)return e(c,!1);e(null,s)}))}},{key:"create",value:function(t,e,n,o,r){var i=this;if(this.options.addPath){"string"==typeof t&&(t=[t]);var a=this.options.parsePayload(e,n,o),s=0,c=[],u=[];t.forEach((function(n){var o=i.options.addPath;"function"==typeof i.options.addPath&&(o=i.options.addPath(n,e));var l=i.services.interpolator.interpolate(o,{lng:n,ns:e});i.options.request(i.options,l,a,(function(e,n){s+=1,c.push(e),u.push(n),s===t.length&&r&&r(c,u)}))}))}}},{key:"reload",value:function(){var t=this,e=this.services,n=e.backendConnector,o=e.languageUtils,r=e.logger,i=n.language;if(!i||"cimode"!==i.toLowerCase()){var a=[],s=function(t){o.toResolveHierarchy(t).forEach((function(t){a.indexOf(t)<0&&a.push(t)}))};s(i),this.allOptions.preload&&this.allOptions.preload.forEach((function(t){return s(t)})),a.forEach((function(e){t.allOptions.ns.forEach((function(t){n.read(e,t,"read",null,null,(function(o,i){o&&r.warn("loading namespace ".concat(t," for language ").concat(e," failed"),o),!o&&i&&r.log("loaded namespace ".concat(t," for language ").concat(e),i),n.loaded("".concat(e,"|").concat(t),o,i)}))}))}))}}}],n&&vi(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();mi.type="backend";const bi=mi;var wi=r(837),Oi=r.n(wi);function xi(t){return Ci.translate(t)}var Ai,ki=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ci=new(function(t){function e(){var e=t.call(this,"Sys.Trnslt")||this;return e.locReady=!1,e.initialized=!1,Te.add("system","translator",e.log),e.i18n=ti,e}return ki(e,t),e.prototype.translate=function(t){return this.initialized&&this.i18n.isInitialized&&this.i18n.t(t)||t},e.prototype.initManager=function(t){var e=this,n=this.log.call("initManager");if(this.initialized)return n.done("already initialized");var o=t.context||this.tryToFindAContext();n.add("will initialize");var r=window.$2sxc.env.uiRoot();this.i18n.use(bi).init({lng:o.app.currentLanguage.substr(0,2),fallbackLng:"en",preload:["en"],backend:{loadPath:be(r+"dist/inpage/i18n/{{lng}}.js")}},(function(){return e.initLoc()})),this.initialized=!0,n.done()},e.prototype.tryToFindAContext=function(){var t=this.log.call("tryToFindAContext");t.add("no context found, will seek");var e=document.querySelector("div[data-cb-id]");this.initialized=!0;var n=window.$2sxc(e);this.initialized=!1;var o=hn.getEditContext(n),r=new Mn(o,n);return r.sxc=n,t.return(r)},e.prototype.initLoc=function(){var t=this.log.call("initLoc");Ai=Oi().init(ti),this.locReady=!0,this.autoTranslateMenus(),t.done()},e.prototype.autoTranslateMenus=function(){var t=this.log.call("autoTranslateMenus");if(!this.locReady)return t.done("loc not ready");var e=document.querySelectorAll(pn.sel.tagScMenu);Ai(pn.sel.tagScMenu);var n=document.querySelectorAll(".sc-i18n");Ai(".sc-i18n"),t.add("found ".concat(e.length," menus and ").concat(n.length," buttons")),t.done()},e}(fe)),Si=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ti=".sc-menu[toolbar],.sc-menu[data-toolbar],[".concat(fn.Toolbar.attr.full,"]"),Pi=function(t){function e(e){var n=t.call(this,"Tlb.Buildr",e.log)||this;return n.tlbManager=e,n}return Si(e,t),e.prototype.buildDnnModule=function(t){var e=this,n=this.log.call("buildDnnModule");if(t.getAttribute(fn.Toolbar.attr.disable))return n.done("disabled");var o=this.findChildTagsWithConfig(t);if(0===o.length&&(o=function(t){var e=t.classList.contains(fn.Cb.classes.name)?t:t.querySelector("div".concat(fn.Cb.selectors.ofName));return!1===Mn.findContext(e).ui.autoToolbar?null:(e.setAttribute(fn.Toolbar.attr.full,JSON.stringify({toolbar:[go.getForEmptyAsRule()]})),[e])}(t),null==o))return n.done("toolbars=null");o.forEach((function(t){return e.loadConfigAndInitialize(t)})),Ci.autoTranslateMenus(),n.done()},e.prototype.build=function(t){var e=this;!t.matches(Ti)||t.closest(fn.Sel.SxcDivs)?null!=t.closest(fn.Cb.selectors.ofName)&&(t.matches(Ti)&&this.loadConfigAndInitialize(t),t.querySelectorAll(Ti).forEach((function(t){return e.loadConfigAndInitialize(t)}))):this.loadConfigAndInitialize(t)},e.prototype.findChildTagsWithConfig=function(t){return Array.from(t.querySelectorAll(Ti)).filter((function(e){return e.closest(fn.Cb.selectors.ofName)===t}))},e.prototype.loadConfigAndInitialize=function(t){var e=this.log.call("loadConfigAndInitialize");if(t.getAttribute("data-".concat(fn.Toolbar.attrToMarkInitalized)))return e.done("already initialized");var n=zo.loadFromTag(t);if(null!=n)try{this.convertConfigToToolbars(t,n)}catch(t){console.error("error creating toolbar - will skip this one",t)}e.done()},e.prototype.convertConfigToToolbars=function(t,e){var n=this.log.call("convertConfigToToolbars");n.data("tag",t),n.data("config",e);var o=Mn.findContext(t);if(o.toolbar=this.tlbManager.loadConfig(o,e),t.getAttribute(fn.Toolbar.attr.full)){n.add("V2 TagToolbar detected");var r=new Co(t,o,Ci);return t.setAttribute("data-".concat(fn.Toolbar.attrToMarkInitalized),"".concat(null!=r)),this.addHoverAttributeToTag(t),n.done()}var i=new Vo(o).generate(),a=t.closest(fn.Toolbar.selectors.ofOldHover);n.data("parentTag",a),t.replaceWith(i),a&&(n.add("V1 hover-toolbar and parents found - will add attribute"),this.addHoverAttributeToTag(a)),ko.raiseToolbarInitEvent(i,i,o),n.done()},e.prototype.addHoverAttributeToTag=function(t){var e=this.log.call("addHoverAttributeToTag");if(!t)return e.done("no tag found");t.hasAttribute(fn.Toolbar.attr.hover)||(e.add("will add attribute "+fn.Toolbar.attr.hover),t.setAttribute(fn.Toolbar.attr.hover,"")),e.done()},e}(fe),_i=function(){function t(){}return t.is=function(t){return void 0!==t.command||void 0!==t.action},t.isArray=function(e){return e.length>0&&t.is(e[0])},t.toButton=function(t){var e={};return t.classes&&(e.classes=t.classes),t.dialog&&(e.dialog=t.dialog),t.disabled&&(e.disabled=t.disabled),t.icon&&(e.icon=t.icon),t.fullScreen&&(e.fullScreen=ji(t.fullScreen)),t.icon&&(e.icon=ji(t.icon)),t.inlineWindow&&(e.inlineWindow=ji(t.inlineWindow)),t.newWindow&&(e.newWindow=ji(t.newWindow)),t.partOfPage&&(e.partOfPage=ji(t.partOfPage)),t.title&&(e.title=ji(t.title)),e},t}();function ji(t){return null!=t&&("function"==typeof t?t:function(){return t})}var Ei=function(){function t(){}return t.hasActions=function(t){return"string"==typeof t.action},t.hasModify=function(t){return!!t.modify},t.noAction=function(t){return delete t.action,t},t}(),Ii=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Li=function(t){function e(e){var n=t.call(this,"Tlb.BtCfBl",e.log)||this;return n.toolbar=e,n}return Ii(e,t),e.prototype.normalize=function(t){var e=this.log.call("normalize");e.data("initial",t);var n=t;if(n._expanded||n.command)return e.return(n,"already expanded, won't modify");if("string"==typeof t)return e.return(this.btnConfigStructure(t,{}),"found name, use that");if(Ei.hasActions(t))return e.add("action found, will move down to .command",t),t.action&&(t.action=t.action.trim()),e.return({command:t,_expanded:!0},"had actions, convert to commands");throw"can't expand InPageButtonConfiguration - unexpected type signature encountered"},e.prototype.btnConfigStructure=function(t,e){return this.log.call("getFromName",t).return({command:{action:t.trim(),params:e},_expanded:!0},'name "'.concat(t,'" found, will re-map to .command.action'))},e.prototype.removeDisableButtons=function(t,e){for(var n=this.log.call("removeDisableButtons","length of groups: ".concat(e.groups.length)),o=e.groups,r=0;r<o.length;r++){var i=o[r].buttons;this.removeUnfitButtons(t,i),n.add("will disable appropriate buttons"),(0===i.length||1===i.length&&"more"===i[0].command.name)&&(n.add('found no more buttons except for the "more" - will remove that group'),o.splice(r--,1))}n.return(null)},e.prototype.addDefaultBtnSettings=function(t,e,n,o){for(var r=this.log.call("addDefaultBtnSettings","","for ".concat((function(){return t.command.name}))),i=0;i<Di.length;i++)Mi(t,e,n,o,Di[i]);r.return(null)},e.prototype.removeUnfitButtons=function(t,e){for(var n=this.log.call("removeUnfitButtons"),o="",r=0;r<e.length;r++){var i=e[r];if(i.command){t.button=i;var a=this.toolbar.toolbarV10.rules.find(i.id||i.command.name),s=null==a?void 0:a.overrideShow();if(null==s){var c=new Eo(i,t);_o.mergeAdditionalParams(c.action(),null==a?void 0:a.params),s=c.showCondition()}!1===s&&(o+="#".concat(r,' "').concat(i.command.name,'"; '),e.splice(r--,1)),n.add("btn '".concat(i.command.name,"' show ").concat(s))}}o&&n.add("removed buttons: ".concat(o)),n.return(null)},e}(fe),Di=["classes","icon","title","dynamicClasses","showCondition","disabled"];function Mi(t,e,n,o,r){var i=t;if(!i[r]){if(e&&e[r])return i[r]=e[r];if(n&&n[r])return i[r]=n[r];if(t.command&&t.command.name){var a=o.get(t.command.name);if(a&&a.buttonDefaults){var s=a.buttonDefaults;if(s[r])return i[r]=s[r]}}}}var Ri,Ni,Bi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fi=function(t){function e(e){var n=t.call(this,"Tlb.CmdLdr",e.log)||this;return n.toolbar=e,n}return Bi(e,t),e.prototype.updateToV9=function(t){if(!t.entity||!t.entity._2sxcEditInformation)return t;var e=t.entity._2sxcEditInformation;return void 0!==e.sortOrder&&(t.useModuleList=!0),void 0!==e.sortOrder&&(t.sortOrder=e.sortOrder),void 0!==t.entity.EntityId&&(t.entityId=t.entity.EntityId),delete t.entity,t},e}(fe),Hi="default",Ui="default",qi="list",Vi="edit-advanced",zi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wi=function(){return Wi=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Wi.apply(this,arguments)},Gi=function(t){function e(e){var n=t.call(this,"Tlb.GrpCnf",e.log)||this;return n.toolbar=e,n}return zi(e,t),e.prototype.expandButtonGroups=function(t){var e=this.log.call("expandButtonGroups");e.add("will expand groups - found ".concat(t.groups.length," items"));for(var n=0;n<t.groups.length;n++){var o=t.groups[n],r=o.defaults,i=this.expandButtonList(o,t.settings),a=[];if(Array.isArray(i)){e.add("will process ".concat(i.length," buttons"));for(var s=0;s<i.length;s++)a.push(this.convertToButton(i[s],t.params,t.defaults,r))}else e.add("no button array found, won't do a.nything");o.buttons=a}var c=t;return this.dropMoreIfOnlyOneGroup(c),e.return(c)},e.prototype.convertToButton=function(t,e,n,o){var r=t.command,i=r.action,a=jo.splitName(i).name;qn.singleton().get(a)||(this.log.add("couldn't find action ".concat(a," - show warning")),console.warn("warning: toolbar-button with unknown action-name:",a));var s=r.params||Ei.noAction(r);r=this.toolbar.command.updateToV9(r);var c=Wi(Wi({},s),e),u=new _o(a,c),l=new jo(u,i);return l=Wi(Wi({},l),_i.toButton(t)),this.toolbar.button.addDefaultBtnSettings(l,o,n,qn.singleton()),l},e.prototype.expandButtonList=function(t,e){var n=this,o=this.log.call("expandButtonList");o.add("initial",t);var r=t.buttons,i=[];if(Array.isArray(r)){o.add("detected array of btns (".concat(r.length,"), will ensure it's an object"));for(var a=0;a<r.length;a++){var s=r[a],c=s.action;o.add("will process actions: '".concat(c,"' for "),s),"string"==typeof c&&c.indexOf(",")>-1?(o.add("actionNames has mult values: '".concat(c,"'")),this.expandButtonAndAddToList(i,s,c)):(o.add("actionNames has 1 value",s),i.push(s))}}else"string"==typeof r?(o.add('detected that it is a string "'.concat(r,'", will split by "," and ...')),this.expandButtonAndAddToList(i,{},r)):(o.add("no special case detected, will use the buttons-object as is"),i=r);o.add("after check, found ".concat(i.length," buttons"),i),this.addMoreButton(e,i);var u=i.map((function(t){return n.toolbar.button.normalize(t)}));return o.return(u,"done")},e.prototype.expandButtonAndAddToList=function(t,e,n){var o=this.log.call("expandButtonAndAddToList","..., ..., '".concat(n,"'"),'button def "'.concat(e,' is string of mult names, will expand into array with action-properties"')),r=n.length?n.split(","):[],i=Wi({},e);delete i.action;for(var a=0;a<r.length;a++){var s=this.toolbar.button.btnConfigStructure(r[a],i);o.data("commandPart",s),t.push(s)}o.return(t)},e.prototype.addMoreButton=function(t,e){var n=this.log.call("addMoreButtons"),o=go.bestAddMorePos(t);if(o&&o!==so){this.log.add('will add a more "..." button to '.concat(o));var r=this.toolbar.button.btnConfigStructure("more",{});o===ro?e.push(r):e.unshift(r)}else this.log.add('will not add more "..." button');n.return(e)},e.prototype.dropMoreIfOnlyOneGroup=function(t){var e=this.log.call("dropMoreIfOnlyOneGroup");if(1!==t.groups.length)return e.done("not just 1 group");e.add("exactly one group found, will remove more");var n=t.groups[0].buttons,o=n.findIndex((function(t){var e;return"more"===(null===(e=t.command)||void 0===e?void 0:e.name)}));if(-1===o)return e.done("no 'more' button found");n.splice(o,1),e.done("more removed")},e}(fe),Ji="none";!function(t){t.add="+",t.addAuto="±",t.remove="-",t.system="$",t.modify="%"}(Ri||(Ri={})),function(t){t.toolbar="toolbar",t.group="group",t.button="button",t.params="params",t.settings="settings"}(Ni||(Ni={}));var $i="prefill:",Ki="filter:",Qi=function(){function t(){}return t.processParams=function(e,n){var o=n.call("processParams"),r=t.extractSubKeys(e,$i,n);r&&(e.prefill=r);var i=t.extractSubKeys(e,Ki,n);i&&(e.filters=i);var a=t.extractSubKeys(e,"form:",n);a&&(e.form=a);var s=t.extractSubKeys(e,"context:",n);return e.metadata&&(delete e.metadata,o.add("params had additional metadata - invalid, will remove. Use 'for' instead",null,ce.error)),e.for&&(e.metadata=t.processMetadata(e,n)),o.return({params:e,context:s})},t.processMetadata=function(t,e){var n=e.call("processMetadata"),o=t.for;if(!o)return n.return(void 0,"no metadata");if(delete t.for,-1===o.indexOf(","))return n.return({key:o},"only has key");var r=o.split(",").map((function(t){return t.trim()}));if(3!==r.length)return n.return(void 0,"error: metadata-for parts count expected 3: ".concat(r.length),ce.error);var i=+r[0];if(isNaN(i))return n.return(void 0,"error: first key part is not number - got ".concat(i),ce.error);var a=r[1];if("string"!==a&&"guid"!==a&&"number"!==a)return n.return(void 0,"error: key is not known type, should be string, guid or number, but got ".concat(a),ce.error);var s=r[2];return null==s||""===s?n.return(void 0,"error: key strange value: '".concat(s,"'"),ce.error):t.contentType&&null!=t.entityId?n.return({key:s,targetType:i,keyType:a}):n.return(void 0,"error: contentType and entityId missing",ce.error)},t.extractSubKeys=function(e,n,o){var r=o.call("processSubMultiKeys");if(!e)return r.return(void 0,"no params");var i=Object.keys(e).filter((function(t){return 0===t.indexOf(n)}));if(!i||0===i.length)return r.return(void 0,"no speciall '".concat(n,"' keys"));var a=n.length,s={};return i.forEach((function(o){var r=e[o];!0===r||!1===r?r=r.toString():n===Ki?r=t.filterValues(r):n===$i&&(r=t.prefillValues(r)),s[o.substring(a)]=r,delete e[o]})),r.return(s,"got list of multi-keys")},t.filterValues=function(t){if("string"==typeof t&&t.length>0&&"["===t[0]&&"]"===t[t.length-1])try{return JSON.parse(t)}catch(e){console.warn("filter:[] value is not a valid JSON array: ".concat(t))}return t},t.prefillValues=function(t){if(!t||"string"!=typeof t)return t;if(-1===t.indexOf(","))return t;if(t.indexOf('"')>=0||t.indexOf("'")>=0)return t;var e=t.split(",").map((function(t){return t.trim()})),n=e.filter((function(t){return null!==t.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i)}));return n&&n.length===e.length?e:t},t}(),Xi="base64:",Yi="json64:",Zi={name:"empty",groups:[{name:Ui,buttons:""}],defaults:{},params:{},settings:{},_isToolbarTemplate:!0},ta={name:Hi,groups:[{name:Ui,buttons:["edit","new","metadata","publish","layout"].join(",")},{name:qi,buttons:["add","add-existing","replace","remove","moveup","movedown","list"].join(",")},{name:Vi,buttons:["delete"].join(",")},{name:"view",buttons:["template","view","data","query","fields"].join(","),defaults:{classes:"group-pro"}},{name:"app",buttons:["app","app-settings","app-resources","system","insights"].join(","),defaults:{classes:"group-pro"}}],defaults:{},params:{},settings:{},_isToolbarTemplate:!0},ea={name:"sublist",groups:[{name:Ui,buttons:"edit,new,publish",defaults:{classes:"group-inlist"}},{name:qi,buttons:"add-existing,replace,remove,moveup,movedown,instance-list",defaults:{classes:"group-inlist"}},{name:Vi,buttons:"delete",defaults:{classes:"group-inlist"}}],defaults:{},params:{},settings:{},_isToolbarTemplate:!0},na=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),oa=function(t){function e(){var e=t.call(this,"Tlb.TmpMan",null,"build")||this;return e.configTemplateList=[],e.list={},Te.add("system","toolbar-template-manager",e.log),e.add(Zi),e.add(ta),e.add(ea),e}return na(e,t),e.singleton=function(){var t;return null!==(t=this._singleton)&&void 0!==t?t:this._singleton=new e},e.prototype.copy=function(t){return ye.DeepClone(this.findOrShowError(t))},e.prototype.findOrShowError=function(t){var e=this.list[t];if(e)return e;throw"try to find toolbar template '".concat(t,"' but not found")},e.prototype.add=function(t){this.list[t.name]=t},e}(fe),ra=function(){function t(){this.groups=[],this.defaults={},this.params={},this.settings={}}return t.is=function(t){return t._isToolbarTemplate},t.hasGroups=function(t){return Array.isArray(t.groups)},t}(),ia=function(){function t(){this.name="unknown",this.buttons="",this.defaults={}}return t.is=function(t){return void 0!==t.buttons},t}(),aa=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),sa=function(t){function e(e){var n=t.call(this,"Tlb.TplEdt",e.log)||this;return n.toolbar=e,n.ensureGroups=function(t){t.groups||(t.groups=[])},n.findGroup=function(t,e){return t.groups.find((function(t){return t.name===e}))},n}return aa(e,t),e.prototype.addButton=function(t,e,n,o,r){var i,a,s=r>=0;r=Math.abs(r)-(s?0:1);var c=this.log.call("addButton","..., ".concat(e,", ").concat(n,", ").concat(o,", ").concat(s?"+":"-").concat(r,", ").concat(s));if(!t)return c.done("no template");var u=this.findGroupOrDefault(t,e);u||(u=this.addGroup(t,e,1e3));var l=null!==(a=null===(i=u.buttons)||void 0===i?void 0:i.split(","))&&void 0!==a?a:[],p=n===o?o:"".concat(n,"=").concat(o),d=this.correctPosStartEnd(l,r,s),f=s?this.findInsertPosition(u,d):d;c.add("pos: ".concat(r,", startEnd: ").concat(d,", insert:").concat(f)),l.splice(f,0,p),u.buttons=l.filter((function(t){return t.length})).join(","),c.done()},e.prototype.findInsertPosition=function(t,e){return t._insertCursor=t._insertCursor||0,0===e&&(e=t._insertCursor++),e},e.prototype.correctPosStartEnd=function(t,e,n){return n||(e=t.length-e)>=0?e:t.length},e.prototype.add=function(t,e){var n=this;e.forEach((function(e){e.step===Ni.group?n.addGroup(t,e.name,e.pos):n.addButton(t,e.group,e.id,e.name,e.pos)}))},e.prototype.addGroup=function(t,e,n){var o=n>=0;n=Math.abs(n)-(o?0:1);var r=this.log.call("addGroup","..., ".concat(e,", ").concat(o?"+":"-").concat(n));this.ensureGroups(t);var i=this.findGroup(t,e);if(i)return r.return(i,"already exists");var a=new ia;a.name=e;var s=this.correctPosStartEnd(t.groups,n,o),c=o?this.findInsertPosition(t,s):s;return t.groups.splice(c,0,a),r.return(a,"created")},e.prototype.removeGroup=function(t,e){var n=this.findGroup(t,e);if(n){var o=t.groups.indexOf(n);o<0||t.groups.splice(o,1)}},e.prototype.findGroupOrDefault=function(t,e){var n=this.log.call("findGroup",e);if(this.ensureGroups(t),0===t.groups.length)return n.return(null,"no groups");var o=this.findGroup(t,e);return o?n.return(o,"found"):n.return(t.groups[0],"not found, return first)")},e}(fe),ca=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ua=function(t){function e(e,n){var o=t.call(this,"Tlb.BdRule",n)||this;return o.ruleString=e,o.group=Hi,o.pos=0,o.params={},o.ui={},o.context={},e?(o.load(),o):(o.log.add("rule is empty"),o)}return ca(e,t),e.Create=function(t){var n=t.name,o=t.ui,r=t.params,i=t.pos,a=new e("",t.log);return a.name=n,a.ui=null!=o?o:{},a.operator=Ri.add,a.setIdBasedOnOperation(a.name),a.params=null!=r?r:{},i&&(a.pos=i),a},e.prototype.overrideShow=function(){var t;return this.operator!==Ri.remove&&(this.operator===Ri.add||(this.operator!==Ri.addAuto&&this.operator===Ri.modify?null===(t=this.ui)||void 0===t?void 0:t.show:void 0))},e.prototype.load=function(){var t,e,n=this.log.call("load",this.ruleString),o=(t=this.ruleString,(e=/^([^\/?#]*)?([^?#]*)(\?([^#]*))?(#(.*))?/i.exec(t))&&null!==e?{key:e[1],params:e[4],button:e[6]}:void 0);if(!o.key)return n.done("no key, won't load");if(this.loadHeader(o.key),o.params){var r=this.loadParamsAndPrefill(o.params);this.params=r.params,this.context=r.context}return n.done()},e.prototype.loadHeader=function(t){var e,n,o=this.log.call("loadHeader",t),r=this.splitParamsArray(t),i=(null===(e=null==r?void 0:r[0])||void 0===e?void 0:e[0])||Ji,a=i[0],s=Object.values(Ri).includes(a);s||(a=i===Ni.params||i===Ni.settings||i===Ni.toolbar?Ri.system:Ri.add),this.operator=a,o.add("name part '".concat(i,"', firstChar '").concat(a,"'")),i=s?i.substring(1):i;var c=Object.values(Ni).includes(i);return this.step=c?i:Ni.button,this.setIdBasedOnOperation(i),this.name=(null===(n=null==r?void 0:r[0])||void 0===n?void 0:n[1])||i,r.length>1&&this.leadHeaderAndUi(i,r.slice(1)),o.done()},e.prototype.setIdBasedOnOperation=function(t){this.id=this.operator===Ri.add||this.operator===Ri.addAuto?"rndId"+Math.floor(99999*Math.random()):t},e.prototype.leadHeaderAndUi=function(t,e){var n=this.log.call("loadHeaderParts");if(!e.length)return n.done("nothing to load");var o=this.dicToArray(e);return o.id&&(this.id=o.id),o.name&&(this.name=o.name),"string"==typeof o.group&&(this.group=o.group,delete o.group),null!=o.pos&&(this.pos=Number(o.pos),Object.is(this.pos,-0)&&(this.pos=-1)),t!==Ni.settings&&t!==Ni.toolbar&&"string"==typeof o.show&&(o.show="true"===o.show),this.ui=o,n.return(this.ui,"button rules")},e.prototype.loadParamsAndPrefill=function(t){var e=this.log.call("loadParams",t),n=this.splitParamsDic(t);e.data("params",n);var o=Qi.processParams(n,this.log);return e.return(o)},e.prototype.dicToArray=function(t){return t.reduce((function(t,e){return t[e[0]]=e[1],t}),{})},e.prototype.splitParamsDic=function(t){return this.dicToArray(this.splitParamsArray(t))},e.prototype.splitParamsArray=function(t){return t?t.split("&").map((function(t){var e=t.indexOf("=");e<0&&(e=t.length);var n=[t.slice(0,e),t.slice(e+1)],o=n[0],r=n[1];if((null==r?void 0:r.indexOf("%"))>-1&&(r=decodeURIComponent(r)),"True"===r||"true"===r)return[o,!0];if("False"===r||"false"===r)return[o,!1];if(!isNaN(+r))return[o,Number(r)];if("string"==typeof r&&r.startsWith(Xi)){var i=r.split(Xi)[1];return[o,window.atob(i)]}return"string"==typeof r&&r.startsWith(Yi)?(i=r.split(Yi)[1],[o,JSON.parse(window.atob(i))]):[o,r]})):[]},e}(fe),la=function(){function t(t){void 0===t&&(t=void 0),t&&Object.assign(this,t)}return t.toJson64String=function(t){return"".concat(Yi).concat(window.btoa(JSON.stringify(t)))},t}();function pa(t){return window.$2sxc.http.apiUrl("".concat("sys/insights","/").concat(t))}var da=Hn.build("insights","Insights","speed",!0,!1,{dialog:function(t){return"insights-server"},showCondition:function(t){return t.user.CanDevelop},code:function(t,e){var n,o,r=pa(null!==(o=null===(n=t.button.command.params)||void 0===n?void 0:n.part)&&void 0!==o?o:"logs");return new Promise((function(t){return window.open(r,"_blank"),t()}))}});qn.addCommand(da),qn.addCommand(Hn.clone(da,"insights-server"));var fa=function(){return fa=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},fa.apply(this,arguments)},ha="thing-to-replace",ga={color:"orange",icon:'<svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path d="M480-120q-65 0-121-31t-83-89H160v-60h92q-7-26-7-52.5V-406h-86v-60h86q0-29 .5-57.5T254-580h-94v-60h120q14-28 37-49t51-35l-77-76 40-40 94 94q28-10 56.5-10t56.5 10l94-94 40 40-76 76q28 14 49.5 35.5T683-640h118v60h-95q9 28 8.5 56.5T714-466h87v60h-87q0 27 .5 53.5T708-300h93v60H685q-26 59-82.5 89.5T480-120Zm0-60q72 0 123-50.5T654-353v-167q0-72-51-122.5T480-693q-72 0-123 50.5T306-520v167q0 72 51 122.5T480-180Zm-80-140h160v-60H400v60Zm0-173h160v-60H400v60Zm80 57h.5-.5.5-.5.5-.5.5-.5Z"/></svg>',note:{note:"<strong>Obsolete Code detected in this ".concat(ha,"</strong>\n    <br>\n    This uses obsolete code which will be removed soon. You should fix the code so it won't break on a future update."),allowHtml:!0}},va="obsolete",ya="obsolete-app";function ma(t,e,n,o){return ua.Create({name:"insights",ui:fa(fa({},ga),{color:null!=o?o:ga.color,note:fa(fa({},ga.note),{links:[{url:pa("logs?key=warnings-obsolete&filter=AppId=".concat(e)),label:"Obsolete this App",primary:!0},{url:pa("logs?key=warnings-obsolete"),label:"all obsolete",primary:!1}],note:ga.note.note.replace(ha,n)})}),params:{part:"Logs?&key=warnings-obsolete"},pos:11,log:t})}var ba=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wa=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Oa=un.parts.RuleManager,xa=function(t){function e(e){var n=t.call(this,"Tlb.RlMngr",e.log,"constructor")||this;return n.rules=[],n.ruleManagerId=Math.floor(99999*Math.random()),n.debugAdded=!1,n.getParams=function(){return n.getSystemRule(Ni.params)||n.getToolbar()},n.getToolbar=function(){return n.getSystemRule(Ni.toolbar)},n.getAdd=function(){return n.filter((function(t){return t.operator===Ri.add||t.operator===Ri.addAuto}))},n.getRemoveGroups=function(){return n.filter((function(t){return t.operator===Ri.remove&&t.step===Ni.group}))},n.log.add("tempId:"+n.ruleManagerId),n}return ba(e,t),e.prototype.load=function(t){var e=this,n=this.log.call("load","".concat((function(){return t.length})));return Array.isArray(t)?(t.forEach((function(t){if("string"==typeof t)try{e.rules.push(new ua(t,e.log))}catch(t){throw t}else console.error("tried to parse a toolbar rule and expected a string, but got something else")})),n.return(this.rules,"final rules")):n.return([],"raw is empty")},e.prototype.addDeveloperInfos=function(t){var e=this;if(!this.debugAdded){if(t.system.error){var n=new la({note:"<strong>Server Insights Logs</strong> can help <br> you debug server errors.",asHtml:!0});this.rules.push(ua.Create({name:"insights",ui:{note:n,color:"red"},pos:10,log:this.log}))}var o=t.system.problems;if((null==o?void 0:o.length)>0){var r=function(t,e,n){var o=[];return void 0!==e.find((function(t){return t.code===va}))?o.push(ma(t,n,"Razor","red")):void 0!==e.find((function(t){return t.code===ya}))&&o.push(ma(t,n,"App",null)),[e.filter((function(t){return t.code!==va&&t.code!=ya})),o]}(this.log,o,t.app.id);o=r[0],r[1].forEach((function(t){return e.rules.push(t)})),Oa&&console.log("2dm - has problems",o);var i=o.map((function(t,n){var o,r=new la({type:t.severity,note:null===(o=t.message)||void 0===o?void 0:o.replace("\n","<br>"),asHtml:!0,interactive:!0});return t.link&&(r.links=[{url:t.link,label:"see docs",primary:!0}]),ua.Create({name:"info",ui:{note:r},params:{link:t.link},pos:20+n,log:e.log})}));Oa&&console.log("2dm - rules",i),i.forEach((function(t){return e.rules.push(t)}))}}},e.prototype.find=function(t){return this.rules.find((function(e){return e.id===t}))},e.prototype.filter=function(t){return this.rules.filter(t)},e.prototype.getSettings=function(){var t=this.getSystemRuleS(Ni.settings)||[],e=Object.assign.apply(Object,wa([{}],t.slice(0,1).map((function(t){return null==t?void 0:t.params})),!1)),n=this.getToolbar();return n&&t.unshift(n),{ui:Object.assign.apply(Object,wa([{}],t.map((function(t){return null==t?void 0:t.ui})),!1)),params:e}},e.prototype.getSystemRule=function(t){return this.rules.find((function(e){return e.operator===Ri.system&&e.step===t}))},e.prototype.getSystemRuleS=function(t){return this.rules.filter((function(e){return e.operator===Ri.system&&e.step===t}))},e}(fe),Aa=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ka=function(){return ka=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ka.apply(this,arguments)},Ca=function(t){function e(e){var n=t.call(this,"Tlb.TlbV09",e.log)||this;return n.configLoader=e,n.rules=new xa(e),n}return Aa(e,t),e.prototype.loadV9=function(t,e){var n=this.log.call("loadV9"),o=e.settings;Object.keys(e.toolbar).length>0&&o==={}&&(n.add("no data or settings, will use default settings for empty"),o=go.getForEmpty());var r=this.getTemplateIfNoButtonsSpecified(t,e.toolbar);n.data("after template check",r);var i=this.buildFullDefinition(t,r,o);return n.return(i,"ok")},e.prototype.getTemplateIfNoButtonsSpecified=function(t,e){var n=this.log.call("getTemplateIfNoButtonsSpecified");if(n.add("initial",e),Ei.hasActions(e))return n.return(e,"has actions, keep raw");if(ra.hasGroups(e))return n.return(e,"has groups, keep raw");if(ia.is(e))return n.return(e,"is group, keep raw");if(Array.isArray(e))return n.return(e,"is array, keep raw");n.add("no toolbar structure specified, will use standard toolbar template");var o=e.fields?ea.name:ta.name,r=this.configLoader.templates.copy(o);r.params=Array.isArray(e)&&e[0]||e,this.rules.addDeveloperInfos(t);var i=this.rules.getAdd();return this.configLoader.templateEditor.add(r,i),n.return(r,"use template")},e.prototype.buildFullDefinition=function(t,e,n){var o=this.log.call("buildFullDefinition"),r=this.ensureDefinitionTree(e,n);ra.is(e)&&e.debug&&console.log("toolbar: detailed debug on; start build full Def");var i=this.configLoader.buildTreeAndModifyAccordingToRules(t,r);return i.settings._rules=this.rules,o.return(i)},e.prototype.ensureDefinitionTree=function(t,e){var n=this.log.call("ensureDefinitionTree");if(!t)throw"preparing toolbar, with nothing to work on: ".concat(t);var o=new Lo;o.groups=this.findGroups(t);var r=t;return o.params=r.params||{},o.settings=ka(ka(ka({},go.getDefaults()),r.settings),go.dropEmptyProperties(e)),o.debug=r.debug||!1,o.defaults=r.defaults||{},n.return(o)},e.prototype.findGroups=function(t){var e=this.log.call("findGroups");return e.data("initial",t),t&&0!==Object.getOwnPropertyNames(t).length?(e.add("will detect what initial structure was given"),Array.isArray(t)?(e.add("Case 2: is array"),0===t.length?e.return([],"2a: empty array"):jo.isArray(t)?e.return([{buttons:t}],"2b: array of groups"):_i.is(t[0])?e.return([{buttons:t}],"2b: is list of buttons, return 1 group"):(console.warn("error detecting groups in this toolbar"),e.return([],"2x: error, it's array but can't detect type, use []"))):(e.add("Case 3: not array"),_i.is(t)?e.return([{buttons:[t]}],"Case 3a: not array, but has action/buttons properties, will wrap config into array"):(e.add('Case 3: not array and no "action", will return it or blank'),ra.hasGroups(t)?e.return(t.groups,"4: found groups"):(e.add("can't detect what this is - show warning"),console.warn("toolbar tried to build toolbar but couldn't detect type of this:",[]),e.return([],"warning"))))):e.return([],"case 0: empty object, use []")},e}(fe),Sa=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ta=(un.parts.ToolbarConfigLoaderV10,function(t){function e(e){var n=t.call(this,"Tlb.TlbV10",e.log,"constructor")||this;return n.configLoader=e,n.rules=new xa(e),n}return Sa(e,t),e.prototype.loadV10=function(t,e,n){var o,r,i=this,a=this.log.call("loadV10");this.rules.load(n);var s=this.rules.getSettings(),c=null==s?void 0:s.ui;0===Object.keys(c||{}).length&&(c=null==s?void 0:s.params);var u=new go(c),l=this.rules.getToolbar(),p=this.rules.getParams(),d=e.toolbar.fields||(null===(o=null==p?void 0:p.params)||void 0===o?void 0:o.fields)?ea.name:ta.name,f=null!==(r=null==l?void 0:l.name)&&void 0!==r?r:d,h=this.configLoader.templates.copy(f);h.settings=u,p&&(h.params=p.params),this.rules.getRemoveGroups().forEach((function(t){return i.configLoader.templateEditor.removeGroup(h,t.name)})),this.rules.addDeveloperInfos(t);var g=this.rules.getAdd();this.configLoader.templateEditor.add(h,g);var v=this.configLoader.buildTreeAndModifyAccordingToRules(t,h);return v.identifier||(v.identifier=Lo.createIdentifier()),v.settings._rules=this.rules,a.return(v,"ok")},e}(fe)),Pa=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_a=function(t){function e(e){var n=t.call(this,"Tlb.TlbCnf")||this;return n.templates=oa.singleton(),n}return Pa(e,t),e.prototype.setLoggingAndCreateHelpers=function(t){var e=t&&t.debug;void 0===e&&Array.isArray(t)&&t.length&&(e=t[0].debug),(e=e||!1)&&(this.log.keepData=!0,"live"===e.toString()&&(this.log.liveDump=!0),this.log.add("found debug=".concat(e,", will enable intense logging"))),this.toolbarV09=new Ca(this),this.toolbarV10=new Ta(this),this.groups=new Gi(this),this.button=new Li(this),this.command=new Fi(this),this.templateEditor=new sa(this)},e.prototype.load=function(t,e){var n=this.log.call("load","","expand start",{context:t,config:e}),o=e.toolbar=e.toolbar||{};return this.setLoggingAndCreateHelpers(o),Array.isArray(o)&&o.length>=0&&"string"==typeof o[0]?n.return(this.toolbarV10.loadV10(t,e,o),"v10 done"):n.return(this.toolbarV09.loadV9(t,e),"V9 done")},e.prototype.buildTreeAndModifyAccordingToRules=function(t,e){var n=this.log.call("buildFullDefinition"),o=this.groups.expandButtonGroups(e);return this.button.removeDisableButtons(t,o),n.return(o)},e}(fe),ja=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ea=function(t){function e(){var e=t.call(this,"Tlb.Mngr",null,"init")||this;return Te.add("system","toolbar-manager",e.log),e.toolbarFinder=new Pi(e),e}return ja(e,t),e.singleton=function(){var t;return null!==(t=this._singleton)&&void 0!==t?t:this._singleton=new e},e.prototype.buildModule=function(t){this.toolbarFinder.buildDnnModule(t)},e.prototype.build=function(t){this.toolbarFinder.build(t)},e.prototype.loadConfig=function(t,e){return this.getLoader(JSON.stringify(e.toolbar||"")).load(t,e)},e.prototype.getLoader=function(t){var e=new _a(this);return Te.add("toolbar",t,e.log),e},e}(fe),Ia=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),La=function(t){function e(e,n){var o=t.call(this,"QE.MdCbIn",e.log)||this;return o.sxcInstance=n,o}return Ia(e,t),e.prototype.create=function(t,e,n,o,r,i){if(!r)return alert("can't add content-block as we couldn't find the list"),Promise.resolve();var a=r.querySelectorAll("div.sc-content-block");n>a.length&&(n=a.length);var s={parentId:t,field:e,index:n,app:o,guid:i},c=this.sxcInstance.webApi.fetchJson(this.sxcInstance.webApi.url("cms/block/block",s),void 0,"POST").then((function(t){var e=Oe.domFromString(t)[0];a.length>0&&n>0?a[a.length>n-1?n-1:a.length-1].after(e):r.prepend(e),window.$2sxc(e),Ea.singleton().buildModule(e)}));return Promise.resolve(c)},e.prototype.move=function(t,e,n,o){var r={parent:t,fields:e,index:n,toIndex:o},i=this.sxcInstance.webApi.fetchRaw(this.sxcInstance.webApi.url("cms/list/move",r),void 0,"POST").then((function(){console.log("done moving!"),window.location.reload()}));return Promise.resolve(i)},e.prototype.delete=function(t,e,n){if(!confirm(xi("QuickInsertMenu.ConfirmDelete")))return null;var o={parent:t,fields:e,index:n},r=this.sxcInstance.webApi.fetchRaw(this.sxcInstance.webApi.url("cms/list/Delete",o),void 0,"DELETE").then((function(){console.log("done deleting!"),window.location.reload()}));return Promise.resolve(r)},e}(fe),Da=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ma=function(t){function e(){return t.call(this,"QE.CntBlk")||this}return Da(e,t),e.prototype.getInstanceModifier=function(t){var e=window.$2sxc(t);return new La(this,e)},e.prototype.delete=function(t){return this.getInstanceModifier(t.list).delete(t.parentGuid,t.field,this.findClipListIndex(t))},e.prototype.create=function(t,e,n,o,r,i){return this.getInstanceModifier(r).create(t,e,n,o,r,i)},e.prototype.move=function(t,e){var n=this.findClipListIndex(t),o=this.findClipListIndex(e);this.getInstanceModifier(t.list).move(e.parentGuid,e.field,n,o)},e.prototype.isRealMove=function(t,e){return this.findClipListIndex(t)+1!==this.findClipListIndex(e)},e.prototype.findClipListIndex=function(t){return this.findListIndex(t.item,t.index)},e.prototype.findListIndex=function(t,e){var n,o,r=hn.getEditContextOfTag(t);return null!==(o=null===(n=null==r?void 0:r.contentBlockReference)||void 0===n?void 0:n.parentIndex)&&void 0!==o?o:e},e.onCbButtonClick=function(){var t=os.singleton().main.activeContentBlock,e=Za.blocks.cb.findClosestList(t),n=e.querySelectorAll(Za.blocks.cb.selector),o=eo.getFromDom(e),r=o.guid||null,i=t.classList.contains(Za.blocks.cb.class)?Array.from(n).indexOf(t)+1:0,a=this.getAttribute("data-action");if(a)return Xa.singleton().do(a,e,i,Za.blocks.cb.id);var s=Xa.singleton().modCb.findListIndex(t,i-1)+1,c=this.getAttribute("data-type");return Xa.singleton().modCb.create(o.parent,o.field,s,c,e,r)},e}(Jn),Ra=function(t,e){this.x=t,this.y=e},Na=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ba=function(t){function e(){var e=t.call(this,"QE.DnnMod")||this;return e.modInternal=new qa(e),e}return Na(e,t),e.prototype.delete=function(t){if(confirm("are you sure?")){var e=this.modInternal.getModuleId(t.item.className);this.modInternal.delete(e)}},e.prototype.move=function(t,e){t.index;var n=e.index,o=this.modInternal.getModuleId(t.item.className),r=this.modInternal.getPaneName(e.list);this.modInternal.move(o,r,n)},e.prototype.isRealMove=function(t,e){return this.modInternal.getPaneName(t.list)!==this.modInternal.getPaneName(e.list)||t.index!==e.index},e.prototype.showSendToPane=function(){var t=os.singleton(),e=Za.blocks.mod.findClosestList(t.main.activeModule);if(e){var n=t.selected.querySelector("#paneList");n.matches(":empty")||Oe.empty(n),n.append(this.modInternal.getMoveButtons(this.modInternal.getPaneName(e)))}},e.onModuleButtonClick=function(){var t=this.getAttribute("data-type"),e=os.singleton().main.activeModule,n=Za.blocks.mod.findClosestList(e),o=0;e.classList.contains("DnnModule")&&(o=Array.from(n.querySelectorAll(".DnnModule")).indexOf(e)+1);var r=this.getAttribute("data-action");if(r)return Xa.singleton().do(r,n,o,Za.blocks.mod.id);var i=Xa.singleton().modDnn.modInternal;return i.create(i.getPaneName(n),o,t)},e}(Jn),Fa=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ha=function(){return Ha=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ha.apply(this,arguments)},Ua=function(t){return window.$.dnnSF(t)},qa=function(t){function e(e){return t.call(this,"QE.ModMng",e.log)||this}return Fa(e,t),e.prototype.delete=function(t){var e=Ua(t).getTabId();return Va({modId:t,url:Ua().getServiceRoot("2sxc")+"dnn/module/delete",method:"GET",data:{tabId:e,modId:t},success:function(){return window.location.reload()}})},e.prototype.create=function(t,e,n){return Va({modId:null,url:Ua().getServiceRoot("internalservices")+"controlbar/GetPortalDesktopModules",method:"GET",data:"category=All&loadingStartIndex=0&loadingPageSize=100&searchTerm=",success:function(o){var r="Default"===n?" Content":" App",i=null;return o.forEach((function(t,e){t.ModuleName===r&&(i=t)})),i?function(t,e,n){var o={Module:n,Page:"",Pane:t,Position:-1,Sort:e,Visibility:0,AddExistingModule:!1,CopyModule:!1};return Va({modId:null,url:Ua().getServiceRoot("internalservices")+"controlbar/AddModule",method:"POST",data:o,success:function(){return window.location.reload()}})}(t,e,i.ModuleID):alert(r+" module not found.")}})},e.prototype.move=function(t,e,n){var o={TabId:Ua(t).getTabId(),ModuleId:t,Pane:e,ModuleOrder:2*n+0};Va({modId:t,url:Ua(t).getServiceRoot("internalservices")+"ModuleService/MoveModule",method:"POST",data:o,success:function(){return window.location.reload()}})},e.prototype.getPaneName=function(t){return t.getAttribute("id").replace("dnn_","")},e.prototype.getModuleId=function(t){var e=t.match(/DnnModule-([0-9]+)(?:\W|$)/);return e&&2===e.length?Number(e[1]):null},e.prototype.getMoveButtons=function(t){for(var e=os.singleton().cachedPanes,n=Oe.domFromString("<div></div>")[0],o=0;o<e.length;o++){var r=this.getPaneName(e[o]);if(""==(t===r?" selected ":"")){var i=Oe.domFromString("<a data='".concat(r,"'>").concat(r,"</a>"))[0];n.append(i)}}var a=this;return n.querySelectorAll("a").forEach((function(t){t.addEventListener("click",(function(){var t=Xa.singleton().clipboard,e=a.getModuleId(t.item.className),n=this.getAttribute("data");a.move(e,n,0)}))})),n},e}(fe);function Va(t){var e={},n={setRequestHeader:function(t,n){e[t]=n}};Ua(t.modId).setModuleHeaders(n);var o={headers:Ha({"X-Requested-With":"XMLHttpRequest"},e),method:t.method},r=t.url;if(t.data)switch(t.method){case"GET":r+="string"==typeof t.data?"?".concat(t.data):"?".concat(Oe.param(t.data));break;case"POST":o.body=new URLSearchParams(Oe.param(t.data)),o.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"}var i=t.success;return fetch(r,o).then((function(t){if(t.status>=200&&t.status<300)return t.text();throw new Error(t.statusText)})).then((function(t){var e;try{e=JSON.parse(t)}catch(n){e=t}return null==i||i(e),e})).catch((function(t){alert("Error while talking to server: ".concat(t.message))}))}var za,Wa=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Ga=function(){function t(){}return t.get=function(t){return{element:t,x:Oe.offset(t).left,w:Oe.width(t),y:Oe.offset(t).top,yh:Oe.offset(t).top+(t.matches(Za.eitherCbOrMod)?Oe.height(t):0)}},t.getBodyPosition=function(){var t=document.body.style.position,e=os.singleton();return"relative"===t||"absolute"===t?new Ra(Oe.offset(e.body).left,Oe.offset(e.body).top):new Ra(0,0)},t.positionAndAlign=Ja,t.refresh=$a,t}();function Ja(t,e){var n=os.singleton();return t.style.left="".concat(e.x-n.bodyOffset.x,"px"),t.style.top="".concat(e.yh-n.bodyOffset.y,"px"),t.style.width="".concat(Oe.width(e.element),"px"),t.style.display="block",t}function $a(t){var e="sc-cb-highlight-for-insert",n=new Date;(!za||n.getTime()-za.getTime()>1e3)&&(za=n,function(){var t=os.singleton();if(t.bodyOffset=Ga.getBodyPosition(),t.config.innerBlocks.enable){var e=Za.blocks.cb.findAllLists().filter((function(t){return t.matches(":not(.".concat(Za.blocks.cb.singleItem,"), :empty"))})),n=[];e.forEach((function(t){n.push.apply(n,Array.from(t.querySelectorAll(Za.blocks.cb.selector)))})),t.contentBlocks=Wa(Wa([],e,!0),n,!0)}if(t.config.modules.enable){var o=t.cachedPanes,r=[];o.forEach((function(t){r.push.apply(r,Array.from(t.querySelectorAll(Za.blocks.mod.selector)))})),t.modules=Wa(Wa([],o,!0),r,!0)}}());var o=new Ra(t.clientX,t.clientY),r=os.singleton();r.config.innerBlocks.enable&&r.contentBlocks&&(r.nearestCb=Ka(r.contentBlocks,o)),r.config.modules.enable&&r.modules&&(r.nearestMod=Ka(r.modules,o)),r.modActions.forEach((function(t){t.classList.toggle("sc-invisible",null===r.nearestMod)})),r.cbActions.forEach((function(t){t.classList.toggle("sc-invisible",null===r.nearestCb)}));var i,a,s,c,u=r.main._parentNode;if(null!==r.nearestCb||null!==r.nearestMod){var l=r.nearestCb||r.nearestMod,p=Za.blocks.mod.findClosestList(l.element),d=Za.blocks.cb.findClosestList(l.element),f=null!=d?d:p;if(i=f,a=eo.getFromDom(i),s=!0,c=!0,a.appList.length>0&&(s=a.appList.indexOf("Content")>-1,c=a.appList.length-(s?1:0)>0),os.singleton().cbActions.forEach((function(t){t.classList.toggle("hide-content",!s),t.classList.toggle("hide-app",!c)})),p){var h=p.getAttribute("id")||"";h.length>4&&(h=h.substr(4)),r.modActions.filter((function(t){return t.matches("[titleTemplate]")})).forEach((function(t){t.setAttribute("title",t.getAttribute("titleTemplate").replace("{0}",h))}))}Ja(r.main,l),r.main.activeContentBlock=r.nearestCb?r.nearestCb.element:null,r.main.activeModule=r.nearestMod?r.nearestMod.element:null,r.main._parentNode=f,f.classList.add(e)}else r.main._parentNode=null,r.main.style.display="none";u&&u!==r.main._parentNode&&u.classList.remove(e)}function Ka(t,e){var n=null,o=30,r=e.x+window.scrollX,i=e.y+window.scrollY;return t.forEach((function(t){var e=Ga.get(t);if(!(r<e.x||r>e.x+e.w)){var a=Math.abs(i-e.yh);a<30&&a<o&&(n=e,o=a)}})),n}var Qa=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xa=function(t){function e(){var e=t.call(this,"Q-E.Clpbrd")||this;return e.clipboard=new Wn,e.mods={},Te.add("Q-E","clipboard",e.log),e.mods.cb=e.modCb=new Ma,e.mods.mod=e.modDnn=new Ba,Oe.ready((function(){return e.initializeSecondaryButtons()})),e}return Qa(e,t),e.singleton=function(){var t;return null!==(t=this._singleton)&&void 0!==t?t:this._singleton=new e},e.prototype.initializeSecondaryButtons=function(){var t=this.log.call("initializeSecondaryButtons"),e=this;os.singleton().selected.querySelectorAll("a").forEach((function(t){t.addEventListener("click",(function(){var t=this.getAttribute("data-action");switch(t){case"delete":return e.mods[e.clipboard.type].delete(e.clipboard);case"sendToPane":return e.modDnn.showSendToPane();default:throw new Error("unexpected action: ".concat(t))}}))})),t.done()},e.prototype.do=function(t,e,n,o){var r=this.log.call("do","".concat(t,", ..., ").concat(n)),i=this.createSpecs(o,e,n);switch(t){case"select":this.mark(i);break;case"paste":var a=this.clipboard.index,s=i.index;if(this.clipboard.type!==i.type)return alert("can't move module-to-block; move only works from module-to-module or block-to-block");if(isNaN(a)||isNaN(s))return this.clearUi();var c=i.type===Za.blocks.cb.id?this.modCb:this.modDnn;if(!c.isRealMove(this.clipboard,i))return this.clearUi();c.move(this.clipboard,i),this.clearUi()}return r.return(null)},e.prototype.mark=function(t){var e,n,o=this.log.call("mark");if(o.data("specs",t),t){if(this.clipboard&&this.clipboard.item===t.item)return o.return(this.clearUi());this.clipboard=t}if(this.removeSelectionMarker(),!this.clipboard.item)return o.done();var r=this.clipboard.item;r.classList.add(Za.selected),(null===(e=r.previousElementSibling)||void 0===e?void 0:e.matches("iframe"))&&r.previousElementSibling.classList.add(Za.selected),this.setSecondaryActionsState(!0);var i=os.singleton(),a=(null===(n=this.clipboard)||void 0===n?void 0:n.type)===Za.blocks.cb.id?i.config.innerBlocks.buttons:i.config.modules.buttons;i.selected.toggleOverlay(r,a),o.done()},e.prototype.clearUi=function(){var t=this.log.call("clearUi");this.removeSelectionMarker(),this.clipboard=null,this.setSecondaryActionsState(!1),os.singleton().selected.toggleOverlay(!1),t.done()},e.prototype.removeSelectionMarker=function(){document.querySelectorAll(".".concat(Za.selected)).forEach((function(t){return t.classList.remove(Za.selected)}))},e.prototype.setSecondaryActionsState=function(t){var e=this.log.call("setSecondaryActionsState"),n=Array.from(document.querySelectorAll("a.sc-content-block-menu-btn"));(n=n.filter((function(t){return t.classList.contains("icon-sxc-paste")}))).forEach((function(e){return e.classList.toggle(fn.ClsNames.UnAvailable,!t)})),e.done()},e.prototype.createSpecs=function(t,e,n){var o=this.log.call("createSpecs","".concat(t,", ..., ").concat(n)),r=e.querySelectorAll(Za.blocks[t].selector),i=n>=r.length?r[r.length-1]:r[n],a=eo.getFromDom(e)||{parent:"dnn",field:e.id,parentGuid:null};return o.return({parent:a.parent,parentGuid:a.parentGuid,field:a.field,list:e,item:i,index:n,type:t})},e}(fe),Ya={cb:{id:"cb",class:"sc-content-block",selector:".sc-content-block",findAllLists:function(){return Array.from(document.querySelectorAll(".sc-content-block-list"))},findClosestList:function(t){return t.closest(".sc-content-block-list")},context:"data-list-context",singleItem:"single-item"},mod:{id:"mod",class:"DnnModule",selector:".DnnModule",findAllLists:function(){for(var t=[],e=document.querySelectorAll("*"),n=0;n<e.length;n++){var o=e[n];if(o.matches(".DNNEmptyPane, .dnnDropEmptyPanes"))t.push(o);else for(var r=o.children,i=0;i<r.length;i++)if(r[i].matches(".DnnModule")){t.push(o);break}}return t},findClosestList:function(t){if(!t)return null;if(t.matches(".DNNEmptyPane, .dnnDropEmptyPanes"))return t;for(var e=0;e<t.children.length;e++)if(t.children[e].matches(".DnnModule"))return t;return Ya.mod.findClosestList(t.parentElement)},context:null}},Za={blocks:Ya,eitherCbOrMod:".DnnModule, .sc-content-block",selected:"sc-cb-is-selected"},ts=(r(936),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),es=function(){return es=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},es.apply(this,arguments)},ns="quick-edit-config",os=function(t){function e(){var e=t.call(this,"Q-E.Main")||this;return e.body=document.body,e.main=Oe.domFromString('<div class="sc-content-block-menu sc-content-block-quick-insert sc-i18n"></div>')[0],e.template="<a class='".concat("sc-content-block-menu-addcontent"," sc-invisible' data-type='Default' data-i18n='[titleTemplate]QuickInsertMenu.AddBlockContent'>&nbsp;</a>")+"<a class='".concat("sc-content-block-menu-addapp"," sc-invisible' data-type='' data-i18n='[titleTemplate]QuickInsertMenu.AddBlockApp'>&nbsp;</a>")+"".concat(ln.btn("select","ok","Select",!0)).concat(ln.btn("paste","paste","Paste",!0,!0)),e.selected=ln.selectedOverlay,e.contentBlocks=null,e.cachedPanes=null,e.modules=null,e.nearestCb=null,e.nearestMod=null,e.cbActions=Oe.domFromString(e.template),e.modActions=Oe.domFromString(e.template.replace(/QuickInsertMenu.AddBlock/g,"QuickInsertMenu.AddModule")).map((function(t){return t.setAttribute("data-context","module"),t.classList.add("sc-content-block-menu-module"),t})),e.config=to.getDefault(),Te.add("Q-E","manager",e.log),e.modActions.forEach((function(t){t.addEventListener("click",Ba.onModuleButtonClick)})),e.cbActions.forEach((function(t){t.addEventListener("click",Ma.onCbButtonClick)})),e}return ts(e,t),e.singleton=function(){var t;return null!==(t=this._singleton)&&void 0!==t?t:this._singleton=new e},e.prototype.start=function(){try{this.loadPageConfig(),this.config.enable&&(this.bodyOffset=Ga.getBodyPosition(),this.enable(),this.initWatchMouse())}catch(t){console.error("couldn't start quick-edit",t)}},e.prototype.reset=function(){var t=this.log.call("reset");this.loadPageConfig(),t.done()},e.prototype.loadPageConfig=function(){var t,e,n,o,r,i,a=this.log.call("loadPageConfig",null,null,{config:this.config});this.logConfig();var s,c=document.querySelectorAll("[".concat(ns,"]"));if(c.length>0){a.add("found configs",c);for(var u={},l=c.length;l>=0;l--){s=c[0].getAttribute(ns);try{var p=JSON.parse(s);a.data("additional config",p),u=es(es({},u),p),a.data("merged config",u)}catch(t){a.add("had trouble with json"),console.warn("had trouble with json",t)}}var d=to.getDefault();this.config=es(es(es({},d),u),{buttons:es(es({},d.buttons),u.buttons)})}else a.add("no configs found, will use exiting");this.config.innerBlocks.buttons=es(es({},null===(t=this.config)||void 0===t?void 0:t.buttons),null===(n=null===(e=this.config)||void 0===e?void 0:e.innerBlocks)||void 0===n?void 0:n.buttons),this.config.modules.buttons=es(es({},null===(o=this.config)||void 0===o?void 0:o.buttons),null===(i=null===(r=this.config)||void 0===r?void 0:r.modules)||void 0===i?void 0:i.buttons),this.logConfig(),this.detectWhichMenusToActivate(),a.done()},e.prototype.detectWhichMenusToActivate=function(){var t=this.config,e=this.log.call("detectWhichMenusToActivate"),n=Za.blocks.cb.findAllLists(),o=n.length>0;e.add("has Content Blocks: ".concat(o),n),null!==t.modules.enable&&t.modules.enable!==Xn||(t.modules.enable=!o),null!==t.innerBlocks.enable&&t.innerBlocks.enable!==Xn||(t.innerBlocks.enable=o),e.add("module.enable: ".concat(t.modules.enable)),e.add("innerBlocks.enable: ".concat(t.innerBlocks.enable)),e.done()},e.prototype.enable=function(){var t=this.log.call("enable");this.prepareToolbarInDom(),this.initPanes(),t.done()},e.prototype.prepareToolbarInDom=function(){var t=this,e=this.log.call("prepareToolbarInDom");this.body.append(this.main),this.body.append(this.selected),this.cbActions.forEach((function(e){return t.main.append(e)})),this.modActions.forEach((function(e){return t.main.append(e)})),ln.setButtonActivationClasses(this.config.innerBlocks.buttons,this.cbActions),ln.setButtonActivationClasses(this.config.modules.buttons,this.modActions),e.done()},e.prototype.initPanes=function(){var t=this.log.call("initPanes");this.cachedPanes=Za.blocks.mod.findAllLists(),this.cachedPanes.forEach((function(t){t.classList.add("sc-cb-pane-glow")})),t.done()},e.prototype.initWatchMouse=function(){var t=this.log.call("initWatchMouse"),e=null;document.body.addEventListener("mousemove",(function(t){null===e&&(e=window.setTimeout((function(){requestAnimationFrame((function(){Ga.refresh(t),e=null}))}),20))})),t.done()},e.prototype.logConfig=function(){this.log.add("config enabled: ".concat(this.config.enable,", mod: ").concat(this.config.modules.enable,", cb: ").concat(this.config.innerBlocks.enable,". ").concat(JSON.stringify(this.config),")"))},e}(fe),rs=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),is=function(t){function e(){var e=t.call(this,"Sys.CbEdit")||this;return Te.add("system","cb-editor-api",e.log),e}return rs(e,t),e.singleton=function(){var t;return null!==(t=this._singleton)&&void 0!==t?t:this._singleton=new e},e.prototype.prepareToAddContent=function(t,e){var n=this.log.call("prepareToAddContent");if(t.contentBlock.isCreated||!e)return n.return(Promise.resolve());var o=this.updateTemplate(t,t.contentBlock.templateId,!0);return n.return(o,"ok")},e.prototype.updateTemplateFromDia=function(t,e){var n=this.log.call("updateTemplateFromDia","..., ".concat(e)),o=zn.isDisabled(t.sxc);n.add("wasShowingPreview: ".concat(o));var r=this.updateTemplate(t,e,!1).then((function(){o&&cs.reloadAndReInitialize(t)}));return n.return(r)},e.prototype.getPreviewWithTemplate=function(t,e){var n=this.log.call("getPreviewWithTemplate","..., ".concat(e)),o={templateId:e=e||fn.ContentBlock.UseExistingTemplate,lang:t.app.currentLanguage,cbid:t.contentBlockReference.id,originalparameters:JSON.stringify(t.instance.parameters),edition:t.contentBlock.edition};n.data("params",o);var r=t.sxc.webApi.fetchRaw(t.sxc.webApi.url("cms/block/render",o)).then((function(t){return t.text()}));return n.return(r)},e.prototype.updateTemplate=function(t,e,n){var o=this.log.call("updateTemplate"),r=this.saveTemplate(t,e,n).then((function(e){if(!e)return null;var n=e.replace(/[\",\']/g,"");return console&&console.log("created content group {".concat(n,"}")),t.contentBlock.contentGroupId=n})).catch((function(){return alert("error - result not ok, was not able to create ContentGroup")}));return o.return(r)},e.prototype.saveTemplate=function(t,e,n){var o=this.log.call("saveTemplate"),r={templateId:e,forceCreateContentGroup:n,newTemplateChooserState:!1};o.data("params",r);var i=t.sxc.webApi.fetchJson(t.sxc.webApi.url("cms/block/template",r),void 0,"POST");return o.return(i)},e}(fe),as=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ss=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},cs=new(function(t){function e(){var e=t.call(this,"Rnd.Rndrer")||this;return Te.add("system","renderer",e.log),e}return as(e,t),e.prototype.showMessage=function(t,e){hn.getTag(t.sxc).innerHTML=e},e.prototype.reloadAndReInitialize=function(t,e,n){var o,r=this,i=this.log.call("reloadAndReInitialize","..., forceAjax: ".concat(e,", preview: ").concat(n),null,{context:t}),a=(null!==(o=t.commandWorkflow)&&void 0!==o?o:vo.getDummyManager()).run(new xo(Bs.refresh,Oo.before,t)).then((function(o){var a,s;if(vo.isCancelled(o))return i.add("Workflow return false, will cancel and not refresh."),Promise.resolve();var c=window;return(null===(s=null===(a=c.ToSic)||void 0===a?void 0:a.Sxc)||void 0===s?void 0:s.Oqtane)?(console.log("Oqtane detected, will reload using Blazor"),c.ToSic.Sxc.Oqtane.reloadModule(t.sxc.id),Promise.resolve()):e||t.app.supportsAjax?(i.add("is ajax, calling ajaxReload"),r.ajaxLoad(t,fn.ContentBlock.UseExistingTemplate,n).then((function(t){if(window.dnn_tabVersioningEnabled){i.add("system is using tabVersioning - will inform DNN");try{window.dnn.ContentEditorManager.triggerChangeOnPageContentEvent()}catch(t){}}return i.return(t)})).catch((function(t){return console.log("Error in reloadAndReInitialize",t)}))):(i.done("not ajax - reloading page"),window.location.reload(),Promise.resolve())}));return a},e.prototype.ajaxLoad=function(t,e,n){var o=this,r=this.log.call("ajaxLoad");return r.add("starting promise chain"),is.singleton().getPreviewWithTemplate(t,e).then((function(e){r.add("get preview done, let's replace the content"),o.replaceContentBlock(t,e,n)})).then((function(){r.add("replace done, resetting quickE"),os.singleton().reset(),r.done()}))},e.prototype.replaceContentBlock=function(t,e,n){var o=this.log.call("replaceContentBlock");try{try{var r=JSON.parse(e),i=r.Resources.map((function(t){return"js"===t.Type?'<script type="text/javascript" src="'.concat(t.Url,'"><\/script>'):"css"===t.Type?'<link rel="stylesheet" href="'.concat(t.Url,'">'):void 0})).filter((function(t){return null!=t})).join("\n"),a=Oe.domFromString(i),s=Oe.domFromString(r.Html)[0];Oe.append(document.head,a,!1),n&&zn.disable(s),Oe.replaceWith(hn.getTag(t.sxc),s,!1);var c=ss(ss([],a.filter((function(t){return"script"===t.tagName.toLocaleLowerCase()})),!0),Array.from(s.querySelectorAll("script")),!0);xe.runScripts(c,void 0)}catch(o){s=Oe.domFromString(e)[0],n&&zn.disable(s),Oe.replaceWith(hn.getTag(t.sxc),s,!0)}t.sxc.recreate(!0)}catch(t){console.log("Error while rendering template:",t)}o.done()},e}(fe)),us=new(function(){function t(){}return t.prototype.addItem=function(t,e){return ls(t,"cms/block/item",{index:e},"post")},t.prototype.removeFromList=function(t){var e=t.button.command.params;return ls(t,"cms/list/delete",{index:To.getIndex(e),parent:e.parent,fields:e.fields},"delete")},t.prototype.changeOrder=function(t,e,n){var o=t.button.command.params;return ls(t,"cms/list/move",{parent:o.parent,fields:o.fields,index:e,toIndex:n},"post")},t.prototype.publish=function(t,e,n){return ls(t,"cms/block/publish",{part:e,index:n},"post")},t.prototype.publishId=function(t,e){return ls(t,"cms/edit/publish",{id:e},"post")},t}());function ls(t,e,n,o,r){return void 0===o&&(o="get"),void 0===r&&(r={}),("post"===o?t.sxc.webApi.fetchRaw(t.sxc.webApi.url(e,n),r,"POST"):"delete"===o?t.sxc.webApi.fetchRaw(t.sxc.webApi.url(e,n),void 0,"DELETE"):t.sxc.webApi.fetchJson(t.sxc.webApi.url(e,n))).then((function(){cs.reloadAndReInitialize(t)}))}qn.add("add","AddDemo","plus-circled",!1,!0,{showCondition:function(t){return Vn.isList(t)},code:function(t){return us.addItem(t,To.getIndex(t)+1)}}),qn.add("add-existing","AddExisting","add-existing",!1,!0,{dialog:function(t){return"replace"},showCondition:function(t){return Vn.isList(t)},configureLinkGenerator:function(t,e){if(Vn.isFieldList(t)){var n=t.button.command.params;e.items=[{Add:!0,Index:To.getIndex(n)+1,Parent:n.parent,Field:n.fields}]}else if(Vn.isPartOfBlockList(t)){var o=e.items[0];o.Add=!0,o.Index++,e.items=[o]}}}),qn.add("app","App","settings",!0,!1,{showCondition:function(t){return t.user.CanAdmin}}),qn.add("app-import","Dashboard","",!0,!1,{}),qn.add("app-resources","AppResources","translate",!0,!1,{dialog:function(t){return"edit"},disabled:function(t){return null===t.app.resourcesId},title:function(t){return"".concat(Bn,"AppResources").concat(null===t.app.resourcesId?"Disabled":"")},showCondition:function(t){return!!t.user.CanAdmin},configureLinkGenerator:function(t,e){e.items=[{EntityId:t.app.resourcesId}]},dynamicClasses:function(t){return null!==t.app.resourcesId?"":"empty"}}),qn.add("app-settings","AppSettings","sliders",!0,!1,{dialog:function(){return"edit"},disabled:function(t){return null===t.app.settingsId},title:function(t){return"Toolbar.AppSettings".concat(null===t.app.settingsId?"Disabled":"")},showCondition:function(t){return t.user.CanAdmin},configureLinkGenerator:function(t,e){e.items=[{EntityId:t.app.settingsId}]},dynamicClasses:function(t){return null!==t.app.settingsId?"":"empty"}}),qn.add("apps","Zone","manage",!0,!1,{showCondition:function(t){return!!t.user.CanAdmin}});var ps=Hn.build("fields","ContentType","fields",!0,!1,{dialog:function(t){return"contenttype"},addParamsToLink:ds,showCondition:function(t){return!!t.user.CanDevelop&&!!ds(t).contentType}});function ds(t){return{contentType:t.button.command.params.contentType||t.contentBlock.contentTypeId}}qn.addCommand(ps),qn.addCommand(Hn.clone(ps,"contenttype"));var fs=Hn.build("data","ContentItems","table",!0,!1,{dialog:function(t){return"contentitems"},addParamsToLink:ds,showCondition:function(t){return!!t.user.CanAdmin&&!!ds(t).contentType},configureLinkGenerator:function(t,e){if(t.button.command.params.filters){var n=JSON.stringify(t.button.command.params.filters);n.indexOf("+")>-1&&(n=btoa(n)),e.urlParams.filters=n}}});qn.addCommand(fs),qn.addCommand(Hn.clone(fs,"contentitems")),qn.add("copy","Copy","copy",!1,!0,{dialog:function(t){return"edit"},showCondition:function(t){return!!t.button.command.params.entityId},configureLinkGenerator:function(t,e){var n=t.button.command.params.entityId,o=ds(t).contentType;if(!o)throw new Error("can't copy: missing contentType");e.items=[{DuplicateEntity:n,ContentTypeName:o}]}});var hs="params",gs="context",vs="event",ys="Running 'code' command, ",ms="".concat(ys,"but no 'call' found to run - see console for debug info."),bs="".concat(ys,"but 'call' doesn't seem to be a string."),ws=Hn.build("code","Custom","bomb",!0,!1,{code:function(t,e){return new Promise((function(n,o){var r=t.button.command.params;function i(t){console.warn(t,r),alert(t+"\n See console for details."),n()}var a=r.call;if(!a)return i(ms);if("string"!=typeof a)return i(bs);if(-1!==a.indexOf("(")||-1!==a.indexOf(" "))return i("".concat(ys,"but 'call' contained '(' or ' ' characters - not allowed."));a+="(".concat(hs,", ").concat(gs,", ").concat(vs,")");var s={};Object.entries(r).forEach((function(t){var e=t[0],n=t[1];"function"!=typeof n&&(s[e]=n)})),s.action,s.call;var c=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}(s,["action","call"]);try{var u=new Function(hs,gs,vs,a);n(u(c,t,e))}catch(t){console.error("error in custom button-code: ",r),o(t)}}))}});qn.addCommand(ws);var Os="context",xs="event",As="Trying to run Custom-Code action, but no 'call' (v10+, recommended) or 'customCode' (v9, old) found to run - see console for debug info.";qn.add("custom","Custom","bomb",!0,!1,{code:function(t,e){return new Promise((function(n,o){var r=t.button.command.params,i=r.customCode;i||"string"==typeof(i=r.call)&&-1===i.indexOf(" ")&&-1===i.indexOf("(")&&(i+="(".concat(Os,", ").concat(xs,")")),i||(console.warn(As,r),alert(As),n());try{n(new Function(Os,xs,i)(t,e))}catch(t){console.error("error in custom button-code: ",r),o(t)}}))}});qn.add("delete","Delete","cancel",!0,!1,{showCondition:function(t){var e=t.button.command.params;return!(e.useModuleList||!e.entityId||!e.entityGuid||!e.entityTitle)},code:function(t){var e=t.button.command.params,n=e.title||e.entityTitle;return function(t,e,n,o){if(!confirm(xi("Delete.Confirm").replace("{id}",String(e)).replace("{title}",o)))return Promise.resolve();var r={zoneId:t.app.zoneId,appId:t.app.id};return t.sxc.webApi.fetchRaw(t.sxc.webApi.url("app/auto/content/any/".concat(n),r),void 0,"DELETE").then((function(t){if(t.status>=200&&t.status<300)location.reload();else if(t.status>=400&&t.status<500){var e=xi("Delete.ErrCheckConsole");401===t.status&&alert(xi("Delete.ErrPermission")+e),400===t.status&&alert(xi("Delete.ErrInUse")+e)}})).catch((function(t){console.log(t)}))}(t,e.entityId,e.entityGuid,n)}}),qn.add("edit","Edit","pencil",!1,!0,{addParamsToLink:function(t){return{mode:"edit"}},showCondition:function(t){return!!t.button.command.params.entityId||!!t.button.command.params.useModuleList}});var ks=un.parts.commandInfo,Cs={info:"Info",warning:"Warning",error:"Error",help:"Help",link:"Link"},Ss={info:"info",warning:"warning",error:"warning",help:"Help",link:"Link"},Ts={info:"gray",warning:"orange",error:"red"};function Ps(t){var e,n,o,r;ks&&console.log("2dm - note: ctx-ui",null==t?void 0:t.ui);var i=null!==(o=null===(n=null===(e=Mn.getRule(t))||void 0===e?void 0:e.ui)||void 0===n?void 0:n.note)&&void 0!==o?o:{};return i.type=null!==(r=i.type)&&void 0!==r?r:"info",ks&&console.log("2dm - note",i),i}qn.add("info","Info","info",!0,!1,{icon:function(t){var e;return Nn+(null!==(e=Ss[Ps(t).type])&&void 0!==e?e:"info")},title:function(t){var e;return Bn+(null!==(e=Cs[Ps(t).type])&&void 0!==e?e:"Info")},color:function(t){var e,n;return Ts[null!==(n=null===(e=Ps(t))||void 0===e?void 0:e.type)&&void 0!==n?n:"info"]},code:function(t,e){ks&&console.log("2dm - info-button code",t);var n=t.button.command.params,o=null==n?void 0:n.link,r=null==n?void 0:n.target;return ks&&console.log("2dm - info-button code - link",o),o?(dc.applyLinkToButton(e,o,r)||window.open(o,null!=r?r:"_blank"),Promise.resolve()):(console.log("info-button clicked, but nothing will happen, because no link was specified in the params. This may be expected/ok."),Promise.resolve())}});var _s=Hn.build("list","Sort","list-numbered",!1,!0,{dialog:function(t){return"instance-list"},showCondition:function(t){return Vn.isList(t)},configureLinkGenerator:function(t,e){if(Vn.isFieldList(t)){var n=t.button.command.params;e.items=[{Add:!1,Index:To.getIndex(n),Parent:n.parent,Field:n.fields}]}}});qn.addCommand(_s),qn.addCommand(Hn.clone(_s,"instance-list")),qn.add("layout","ChangeLayout","glasses",!0,!0,{inlineWindow:function(t){return!0},code:function(t,e){var n="["+Za.blocks.cb.context+"]",o=hn.getTag(t.sxc).closest(n);if(o){var r=eo.getFromDom(o);t.button.command.params.apps=r.apps}return dc.openDialog(t,e)},notes:function(t){var e=t.app,n=t.contentBlock,o='<a href="https://go.2sxc.org/lightspeed" target="_blank">⚡ LightSpeed Cache</a>',r=n.renderLightspeed?"<strike>".concat(n.renderMs,"ms</strike> 0ms using ").concat(o):"".concat(n.renderMs,"ms (no ").concat(o,")"),i="App: ".concat(e.appName," <br>\n    View: ").concat(n.viewName," <br>\n    Page: ").concat(t.page.id,", Module: ").concat(t.instance.id," <br>\n    ⌛ ").concat(r," <br>"),a="<strong>Layout</strong> <br>\n    ".concat(i);return[new la({type:"info",note:a,asHtml:!0,background:"#DFC2F2",delay:1e3,interactive:!0})]}});var js=function(){return js=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},js.apply(this,arguments)},Es=Hn.build("metadata","Metadata","tag",!1,!1,{addParamsToLink:function(t){return{mode:"new"}},dialog:function(t){return"edit"},dynamicClasses:function(t){return t.button.command.params.entityId?"":"empty"},showCondition:function(t){return!!t.button.command.params.metadata},configureLinkGenerator:function(t,e){var n={Metadata:js({keyType:"string",targetType:10},e.context.button.command.params.metadata)};e.items[0]=js(js({},e.items[0]),n)}}),Is=Hn.build("image","Image","focus",!1,!1,{addParamsToLink:Es.buttonDefaults.addParamsToLink,dialog:Es.buttonDefaults.dialog,classes:"single-field",dynamicClasses:Es.buttonDefaults.dynamicClasses,showCondition:Es.buttonDefaults.showCondition,configureLinkGenerator:Es.buttonDefaults.configureLinkGenerator});qn.addCommand(Es),qn.addCommand(Is),qn.add("more","MoreActions","options btn-mode",!0,!1,{code:function(t,e){return new Promise((function(t,n){var o=e.target.closest(pn.sel.tagScMenu),r=Number(o.getAttribute("data-state")||0),i=(r+1)%Number(o.getAttribute("group-count"));o.classList.remove("group-".concat(r)),o.classList.add("group-".concat(i)),o.setAttribute("data-state",String(i)),e.preventDefault();var a=o.closest("."+fn.Toolbar.classes.oldHover);a&&"true"!==o.getAttribute("listener")&&(a.addEventListener("mouseenter",(function(t){o.style.opacity="1"})),a.addEventListener("mouseleave",(function(t){0!==t.screenX&&0!==t.screenY?o.style.opacity="0":(o.style.opacity="1",console.warn("workaround for toolbar hide onmouseleave issue",t.screenX,t.screenY,t.target))})),o.setAttribute("listener","true")),t()}))}}),qn.add("movedown","MoveDown","move-down",!1,!0,{showCondition:function(t){return Vn.isList(t)},code:function(t){var e=To.getIndex(t);return us.changeOrder(t,e,e+1)}}),qn.add("moveup","MoveUp","move-up",!1,!0,{showCondition:function(t){return!(!Vn.isList(t)||0===To.getIndex(t))},code:function(t){var e=To.getIndex(t);return us.changeOrder(t,e,Math.max(e-1,0))}}),qn.add("new","New","plus",!1,!0,{addParamsToLink:function(t){return{mode:"new"}},dialog:function(t){return"edit"},showCondition:function(t){return!!t.button.command.params.contentType||Vn.isList(t)},code:function(t,e){var n=t.button.command.params;return n.index=To.getIndex(n)+1,n.entityId&&0!==n.entityId&&(delete n.entityId,delete n.entityGuid),n.useModuleList&&n.contentType&&delete n.useModuleList,dc.openDialog(t,e)}}),qn.add("publish","Unpublished","eye-off",!1,!1,{showCondition:function(t){return!1===t.button.command.params.isPublished},disabled:function(t){return!t.instance.allowPublish||!1!==t.button.command.params.isPublished},code:function(t,e){var n=t.button.command.params;return new Promise((function(e,o){if(n.isPublished)return alert(xi("Toolbar.AlreadyPublished")),e();if(n.entityId)return us.publishId(t,n.entityId);var r=To.getIndex(t),i=-1===r?"listcontent":"content",a=-1===r?0:r;return us.publish(t,i,a)}))}}),qn.add("remove","Remove","minus-circled",!1,!0,{showCondition:function(t){return Vn.isList(t)},code:function(t){return new Promise((function(e,n){return confirm(xi("Toolbar.ConfirmRemove"))?us.removeFromList(t):e()}))}}),qn.add("replace","Replace","replace",!1,!0,{showCondition:function(t){return Vn.isReferencedItem(t)},configureLinkGenerator:function(t,e){if(Vn.isFieldList(t)){var n=t.button.command.params;e.items=[{Add:!1,Index:To.getIndex(n),Parent:n.parent,Field:n.fields}]}}});var Ls=Hn.build("template","Develop","code",!0,!1,{newWindow:function(t){return!0},dialog:function(t){return"develop"},showCondition:function(t){return!!t.user.CanDevelop},configureLinkGenerator:function(t,e){var n=t.contentBlock,o={EntityId:n.templateId};n.templatePath&&(o.Path=n.templatePath),n.edition&&(o.Edition=n.edition),e.items=[o]},addParamsToLink:function(t){return{isshared:t.contentBlock.templateIsShared}}});qn.addCommand(Ls),qn.addCommand(Hn.clone(Ls,"template-develop"));var Ds=Hn.build("query","QueryEdit","filter",!0,!1,{dialog:function(t){return"pipeline-designer"},addParamsToLink:function(t){return{pipelineId:t.contentBlock.queryId}},newWindow:function(t){return!0},disabled:function(t){return null===t.app.settingsId||!t.contentBlock.queryId},title:function(t){return"".concat(Bn,"QueryEdit").concat(null===t.contentBlock.queryId?"Disabled":"")},showCondition:function(t){return!!t.user.CanDevelop&&!t.app.isContent},dynamicClasses:function(t){return t.contentBlock.queryId?"":"empty"}});qn.addCommand(Ds),qn.addCommand(Hn.clone(Ds,"template-query"));var Ms=Hn.build("view","TemplateSettings","sliders",!0,!1,{dialog:function(t){return"edit"},showCondition:function(t){return!!t.user.CanDevelop&&!t.app.isContent},configureLinkGenerator:function(t,e){e.items=[{EntityId:t.contentBlock.templateId}]}});qn.addCommand(Ms),qn.addCommand(Hn.clone(Ms,"template-settings"));var Rs=Hn.build("system","Zone","manage",!0,!1,{dialog:function(t){return"zone"},showCondition:function(t){return!!t.user.CanAdmin}});qn.addCommand(Rs),qn.addCommand(Hn.clone(Rs,"zone"));var Ns=function(){},Bs={all:"all",refresh:"refresh"},Fs=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Hs=function(){return Hs=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Hs.apply(this,arguments)},Us=function(t){function e(e){return t.call(this,"Cmd.RunPrm",e,"start")||this}return Fs(e,t),e.prototype.getParamsFromNameOrParams=function(t){var e=this.log.call("getParamsFromNameOrParams","".concat(t)),n="string"==typeof t;e.add("adapting settings; name string: ".concat(n,"; name = ").concat(t));var o=n?{action:t}:t;return e.return(o)},e.prototype.expandParamsWithDefaults=function(t){var e=this.log.call("expandParamsWithDefaults"),n=t.action;e.add("will add defaults for ".concat(n," from buttonConfig"));var o=qn.singleton().get(n).buttonDefaults;return e.data("defaults to merge",o),e.return(Hs(Hs({},o),t))},e.is$sxcRunParams=function(t){var n=t;return(null!=n.tag||null!=n.context&&(on.is(n.context)||en.is(n.context)))&&e.isRunParamsInstance(n)},e.isRunParamsInstance=function(t){var e=t;return null!=e.action||null!=e.params},e.ensureRunParamsInstanceOrError=function(t){if(!e.isRunParamsInstance(t))throw"".concat(Vs," with at least ").concat(qs);if(t.context)throw"".concat(Vs," without 'context' since it already provides the context")},e}(fe),qs="'action' and/or 'params'",Vs="sxc instance run() expects runParams",zs=function(){function t(){}return t.fromContext=function(e){var n=new t;return n.appId=e.app.id,n.isContent=e.app.isContent,n.isInnerContent=e.instance.id!==e.contentBlockReference.id,n.hasContent=e.app.hasContent,n.isList=e.contentBlock.isList,n.templateId=e.contentBlock.templateId,n.contentTypeId=e.contentBlock.contentTypeId,n.supportsAjax=e.app.supportsAjax,n.debug=window.$2sxc.debug.load,n},t}(),Ws=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gs=function(t){function e(e){var n=t.call(this,"QDl.IfBrig",e.log)||this;return n.changed=!1,n}return Ws(e,t),e.prototype.uncachedSxc=function(){if(!this.instanceSxc)throw"can't find sxc-instance of IFrame, probably it wasn't initialized yet";return this.instanceSxc.recreate(!0)},e.prototype.getContext=function(){return this.log.call("getContext").return(Mn.findContext(this.uncachedSxc()))},e.prototype.getAdditionalDashboardConfig=function(){return this.log.call("getAdditionalDashboardConfig").return(zs.fromContext(this.getContext()))},e.prototype.hide=function(){ic.singleton().setVisible(!1)},e.prototype.run=function(t){this.uncachedSxc().manage.run(t)},e.prototype.cancel=function(){ic.singleton().cancel(this)},e.prototype.showMessage=function(t){var e=this.log.call("showMessage");cs.showMessage(this.getContext(),'<p class="no-live-preview-available">'.concat(t,"</p>")),this.scrollToTarget(this.tagModule),e.done()},e.prototype.reloadAndReInit=function(){var t=this;return this.changed=!1,cs.reloadAndReInitialize(this.getContext(),!0,!0).then((function(){return t.scrollToTarget(t.tagModule)})).then((function(){return Promise.resolve(t.getAdditionalDashboardConfig())}))},e.prototype.setTemplate=function(t,e,n){var o=this,r=this.log.call("setTemplate","tid: ".concat(t,", tname: ").concat(e,", final: ").concat(n));this.changed=!0;var i=this.getAdditionalDashboardConfig(),a=this.getContext(),s=i.isContent||i.supportsAjax;s||this.showMessage("refreshing <b>".concat(e,"</b>..."));var c=n||!s?is.singleton().updateTemplateFromDia(a,t):cs.ajaxLoad(a,t,!0);return n&&(c=c.then((function(){return ic.singleton().setVisible(!1)}))),c=s?c.then((function(){return o.scrollToTarget(o.tagModule)})):c.then((function(){return window.parent.location.reload()})),r.return(c.then((function(){return s})))},e.prototype.setup=function(t,e){var n=this.log.call("setup");n.data("rewire with sxc: ",t),this.changed=!1,this.instanceSxc=t,this.tagModule=hn.getTag(t).parentElement,this.sxcCacheKey=t.cacheKey,e&&(this.dialogName=e),n.done()},e.prototype.isConfiguredFor=function(t,e){var n=this.log.call("isConfiguredFor","id:".concat(t,", dialog:").concat(e)),o=this.sxcCacheKey===t&&this.dialogName===e;return n.return(o)},e.prototype.scrollToTarget=function(t){var e=this.log.call("scrollToTarget");Oe.offset(t).top,e.done()},e}(fe),Js=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$s=function(t){function e(e){var n=t.call(this,"Ses.State")||this;return n.key=e,Te.add("system","session-state "+e,n.log),n}return Js(e,t),e.prototype.set=function(t){this.log.add("state '".concat(this.key,"' set(").concat(t,")"));try{sessionStorage.setItem(this.key,t)}catch(t){}},e.prototype.remove=function(){this.log.add("state '".concat(this.key,"' remove()"));try{sessionStorage.removeItem(this.key)}catch(t){}},e.prototype.get=function(){var t=function(t){try{var e=sessionStorage.getItem(t);return JSON.parse(e)}catch(t){return null}}(this.key);this.log.add("state '".concat(this.key,"' get() = '").concat(t,"'"));try{return t}catch(t){}},e}(fe),Ks=new $s("dia-cbid"),Qs=new $s("cancelled-dialog"),Xs=(r(144),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),Ys="inpage-frame-wrapper",Zs="inpage-frame",tc="iframe",ec='<div class="'.concat(Ys,'"><div class="').concat(Zs,'"></div></div>'),nc=function(t){function e(e){var n=t.call(this,"QDl.Contnr",e.log)||this;return n.isFullscreen=!1,n.resizeWatcher=null,n}return Xs(e,t),e.prototype.getOrCreate=function(){var t=document.querySelector(".".concat(Ys));return null!=t?t:this.buildContainerAndIFrame()},e.prototype.buildContainerAndIFrame=function(){var t=this.log.call("buildContainerAndIFrame"),e=Oe.domFromString(ec)[0];document.querySelectorAll("#personaBar-iframe").length>0&&e.classList.add("persona-bar-visible");var n=document.createElement(tc);n.style.cssText="color-scheme: auto;";var o=function(t,e){var n=e.log.call("build");n.data("prototype",Gs.prototype);var o=t;return o.bridge=new Gs(e),n.data("extensions",o.bridge),n.return(o)}(n,this);return e.querySelector(".".concat(Zs)).append(o),document.body.append(e),this.watchForResize(e),t.return(e,"ok")},e.prototype.getIFrame=function(t){return t||(t=this.getOrCreate()),t.querySelector(tc)},e.prototype.setSize=function(t){var e=this.log.call("setSize");this.getOrCreate().style.minHeight=t?"100%":"225px",this.isFullscreen=t,e.done()},e.prototype.watchForResize=function(t){var e=this;if(!this.resizeWatcher){var n=this.log.call("watchForResize");this.resizeWatcher=window.setInterval((function(){try{var o=e.getIFrame(t);if(!o)return void n.onlyAddIfNew("no iframe");var r=o.contentDocument.body.offsetHeight;if(o.previousHeight===r)return void n.onlyAddIfNew("no height change");o.style.minHeight=t.style.minHeight,o.style.height=r+"px",o.previousHeight=r,e.isFullscreen&&(o.style.height="100%",o.style.position="absolute"),n.onlyAddIfNew("changed to "+r)}catch(t){n.add("error",t)}}),200),n.return(null,"watcher added")}},e}(fe),oc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),rc=null,ic=function(t){function e(){var e=t.call(this,"Qdl.Managr")||this;return Te.add("quick-dialog","manager",e.log),e.container=new nc(e),e}return oc(e,t),e.singleton=function(){var t;return null!==(t=this._singleton)&&void 0!==t?t:this._singleton=new e},e.prototype.isVisible=function(){return null!=rc},e.prototype.setVisible=function(t){var e=this.log.call("setVisible"),n=this.container.getOrCreate();n.classList.toggle("dia-select",t),this.rememberDialogState(this.container.getIFrame(n),t),rc=t?this.container.getIFrame():null,e.done()},e.prototype.showOrToggleFromToolbar=function(t,e,n,o){var r=this.log.call("showOrToggleFromToolbar","ctx, url: '".concat(e,"', isFullScreen:").concat(n,", name:'").concat(o,"'"));this.container.setSize(n);var i=this.container.getIFrame();if(this.isVisible()){r.add("is already visible");var a=o&&rc&&rc.bridge.isConfiguredFor(t.sxc.cacheKey,o)?this.promise:null;if(this.cancel(rc.bridge),a)return r.return(a,"just toggle off")}var s=this.setUrlToQuickDialog(e);return i.bridge.setup(t.sxc,o),i.setAttribute("src",s),i.contentWindow&&i.contentWindow.reboot&&i.contentWindow.reboot(),this.setVisible(!0),r.return(this.promiseRestart(),"restart")},e.prototype.cancel=function(t){var e=this.log.call("cancel");this.setVisible(!1),Qs.set("true"),this.resolvePromise(t.changed),e.done()},e.prototype.rememberDialogState=function(t,e){var n=this.log.call("rememberDialogState");if(n.add("qDialog persistDia(..., ".concat(e,")")),e){var o=t.bridge.getContext().contentBlockReference.id.toString();return n.add("contentBlockId: ".concat(o,")")),n.return(Ks.set(o))}return n.return(Ks.remove(),"remove")},e.prototype.promiseRestart=function(){var t=this;return this.promise=new Promise((function(e){return t.resolvePromise=e})),this.promise},e.prototype.setUrlToQuickDialog=function(t){var e=this.log.call("setUrlToQuickDialog",t);return t=t.replace(fn.DialogPaths.eavUi,fn.DialogPaths.quickDialog),e.return(t)},e}(fe),ac=function(t,e){window.$2sxc;var n,o,r,i,a,s,c,u,l,p=null===(n=t.sxc)||void 0===n?void 0:n.ctx;if(!0===(null==p?void 0:p.complete)){this.zoneId=p.zoneId,this.appId=p.appId,null!=p.moduleId&&(this.mid=p.moduleId);var d=null!==(o=null==p?void 0:p.blockId)&&void 0!==o?o:this.mid;null!=d&&d&&(this.cbid=d)}else this.zoneId=null!==(r=null==p?void 0:p.zoneId)&&void 0!==r?r:t.app.zoneId,this.appId=null!==(i=null==p?void 0:p.appId)&&void 0!==i?i:t.app.id,this.mid=null!==(a=null==p?void 0:p.moduleId)&&void 0!==a?a:t.instance.id,this.cbid=null!==(s=null==p?void 0:p.blockId)&&void 0!==s?s:t.contentBlockReference.id;this.partOfPage=e,e&&(this.publishing=t.contentBlockReference.publishingMode),(null===(l=null===(u=null===(c=null==t?void 0:t.button)||void 0===c?void 0:c.command)||void 0===u?void 0:u.params)||void 0===l?void 0:l.apps)&&(this.apps=t.button.command.params.apps)},sc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),cc=function(){return cc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},cc.apply(this,arguments)},uc=function(t){function e(e,n){var o=t.call(this,"Cmd.LnkGen",n)||this;o.context=e;var r=o.log.call("constructor"),i=new Eo(e.button,e),a=i.action();o.items=a.params.items||[],r.data("items",o.items),o.urlParams=i.addParamsToLink();var s=i.dialog();return o.urlParams=cc({dialog:s||a.name},o.urlParams),r.data("urlParams",o.urlParams),o.debugUrlParam=window.$2sxc.urlParams.get("debug")?"&debug=true":"",o.buildItemsList(i),e.button.configureLinkGenerator&&e.button.configureLinkGenerator(e,o),r.done(),o}return sc(e,t),e.prototype.buildItemsList=function(t){t.action().params.useModuleList?this.addContentGroupItems(!0):t.action().params.parent?this.addItemInList():this.addItem()},e.prototype.getLink=function(){var t=this.context,e=new Eo(t.button,t),n=e.action().params,o=this.urlParams;if(n.prefill)for(var r=0;r<this.items.length;r++)this.addFieldsAndParameters(this.items[r],n);delete o.prefill,o.items=JSON.stringify(this.items);var i=e.partOfPage(),a=new ac(t,i),s=this.getDialogUrl(t);return"".concat(s,"#").concat(Oe.param(a).replace(/%2F/g,"/"),"&").concat(Oe.param(o)).concat(this.debugUrlParam)+""},e.prototype.getDialogUrl=function(t){var e,n,o=null!==(n=null===(e=t.sxc)||void 0===e?void 0:e.env)&&void 0!==n?n:window.$2sxc.env,r=o.dialogQuery();return r&&!r.startsWith("&")&&(r="&"+r),be("".concat(o.uiRoot()).concat(fn.DialogPaths.eavUi))+"?pageId=".concat(o.page(),"&sxcver=").concat(t.instance.sxcVersion).concat(r)},e.prototype.addItem=function(){var t={},e=this.context.button.command.params,n=e.contentType||e.attributeSetName;e.entityId&&(t.EntityId=e.entityId),n&&(t.ContentTypeName=n),(t.EntityId||t.ContentTypeName)&&this.items.push(this.addFieldsAndParameters(t,e))},e.prototype.addFieldsAndParameters=function(t,e){return null==e||(e.prefill&&(t.Prefill=e.prefill),e.uifields&&(t.UiFields=e.uifields),e.form&&(t.Parameters=e.form)),t},e.prototype.addContentGroupItems=function(t){var e=this,n=this.log.call("addContentGroupItems","".concat(t)),o=To.getIndex(this.context),r=-1!==o?o:0,i="new"===this.context.button.command.name,a=this.context.contentBlock.contentGroupId,s=this.context.button.command.params,c=[this.findPartName(!0)];t&&c.push(this.findPartName(!1)),c.map((function(t){return e.addContentGroupItem(a,r,t,i,s)})),n.done()},e.prototype.addContentGroupItem=function(t,e,n,o,r){var i=this.log.call("addContentGroupItem","".concat(t,", ").concat(e,", ").concat(n,", ").concat(o)),a={Add:o,Index:e,Parent:t,Field:n.toLocaleLowerCase()};this.items.push(this.addFieldsAndParameters(a,r)),i.done()},e.prototype.addItemInList=function(){var t=this,e=this.context.button.command.params,n=To.getIndex(e),o="new"===this.context.button.command.name,r=e.parent;e.fields&&e.fields.split(",").map((function(i){var a={EntityId:o?0:e.entityId,Field:i,Parent:r,Add:o,Index:n};t.items.push(t.addFieldsAndParameters(a,e))}))},e.prototype.findPartName=function(t){return(-1!==To.getIndex(this.context)?"":"List")+(t?"Content":"Presentation")},e}(fe),lc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pc=function(){return pc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},pc.apply(this,arguments)},dc=function(t){function e(e){var n=t.call(this,"Cmd.Exec",e,"start")||this;return n.runParamsHelper=new Us(n.log),n}return lc(e,t),e.prototype.detectParamsAndRun=function(t,e,n,o){var r,i=this.log.call("detectParamsAndRun","".concat(arguments.length," params")),a=!o&&n&&void 0!==n.altKey;i.add("might cycle parameters. third is event=".concat(a)),a?(i.add("cycling params; event missing & eventOrSettings seems to be an event; settings assumed empty"),o=n,r=this.runParamsHelper.getParamsFromNameOrParams(e)):r=pc(pc({},n||{}),this.runParamsHelper.getParamsFromNameOrParams(e)),o=o||window.event;var s=this.run(t,r,o);return i.return(s)},e.prototype.run=function(t,n,o,r){var i=this.log.call("run<T>"),a=this.runParamsHelper.getParamsFromNameOrParams(n);a=this.runParamsHelper.expandParamsWithDefaults(a);var s=o,c=a.action;i.add("run command '".concat(c,"'"));var u,l=new _o(c,a),p=new jo(l,l.name),d=pc(pc({},p),_i.toButton(a));t.button=d,i.data("button",t.button),(null==r?void 0:r.workflows)?(u=new bo(this.log)).add(r.workflows):u=vo.getWorkflow(null==s?void 0:s.target),t.commandWorkflow=u;var f,h=u.run(new xo(c,Oo.before,t)),g=d.code;g||(i.add("button, no code - generating code to open standard dialog"),g=e.openDialog),new Eo(d,t).uiActionOnly()?(i.add("UI command, no pre-flight to ensure content-block"),f=h.then((function(e){return vo.isCancelled(e)?Promise.resolve(null):g(t,s)}))):(i.add("command might change data, wrap in pre-flight to ensure content-block"),f=h.then((function(e){return vo.isCancelled(e)?Promise.resolve(null):is.singleton().prepareToAddContent(t,a.useModuleList).then((function(){return g(t,s)}))})));var v=f.then((function(t){return u.run(new xo(c,Oo.after,null,t)).then((function(){return t}))}));return i.return(v)},e.openDialog=function(t,n){var o=new ge("Cms.OpnDlg");Te.add("cms","open-dialog",o);var r=new uc(t,o).getLink(),i=new Eo(t.button,t),a=n||window.event;return new Promise((function(n){var o=function(){n(t),cs.reloadAndReInitialize(t)};if(i.inlineWindow())ic.singleton().showOrToggleFromToolbar(t,r,i.fullScreen(),i.dialog()).then((function(t){t&&o()}));else{var s=i.newWindow();if(s||(null==a?void 0:a.ctrlKey)||(null==a?void 0:a.shiftKey))return n(t),e.applyLinkToButton(a,r,s?"_blank":null)?void 0:void window.open(r);window.$2sxc.totalPopup.open(r,o)}}))},e.applyLinkToButton=function(t,e,n){for(var o=null==t?void 0:t.target;null!=o&&"A"!==o.tagName;)o=o.parentElement;if(null==o)return!1;var r=o,i=r.href,a=r.target;return r.href=e,n&&(r.target=n),setTimeout((function(){i?r.href=i:r.removeAttribute("href"),a?r.target=a:r.removeAttribute("target")}),100),!0},e}(fe),fc="viewBox";function hc(){new MutationObserver((function(t){document.querySelectorAll("".concat(pn.sel.scMenu," svg:not([").concat(fc,"])")).forEach((function(t){!function(t){if(!t.getAttribute(fc)){var e=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}([],t.children,!0).reduce((function(t,e){var n=e.getBBox(),o=n.x,r=n.y,i=n.width,a=n.height;return(!t.xMin||o<t.xMin)&&(t.xMin=o),(!t.xMax||o+i>t.xMax)&&(t.xMax=o+i),(!t.yMin||r<t.yMin)&&(t.yMin=r),(!t.yMax||r+a>t.yMax)&&(t.yMax=r+a),t}),{}),n=e.xMin,o=e.xMax,r=e.yMin,i=e.yMax,a="".concat(n," ").concat(r," ").concat(o-n," ").concat(i-r);t.setAttribute(fc,a)}}(t)}))})).observe(document.body,{attributes:!1,childList:!0,subtree:!0})}var gc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vc=function(t){function e(){var e=t.call(this,"Sys.Bootst",null,"Building Bootstrapper")||this;return e.initializedInstances=[],e.openedTemplatePickerOnce=!1,e.diagCancelStateOnStart=Qs.get(),Te.add("system","bootstrap",e.log),e}return gc(e,t),e.prototype.initialize=function(){var t=this.log.call("initialize");this.diagCancelStateOnStart&&Qs.remove(),this.initAllInstances(!0),this.watchDomChanges(),hc(),t.return("done")},e.prototype.initAllInstances=function(t){var e=this,n=this.log.call("initAllInstances"),o=Array.from(document.querySelectorAll(Ti)).filter((function(t){return!t.closest(fn.Sel.SxcDivs)}));this.log.add("Found ".concat(o.length," toolbars outside of 2sxc modules")),o.forEach((function(t){Ea.singleton().build(t)}));var r=document.querySelectorAll(fn.Sel.SxcDivs);this.log.add("Found ".concat(r.length," toolbars inside 2sxc modules")),r.forEach((function(n){e.initInstance(n,t)})),t&&this.tryShowTemplatePicker(),n.return("initAllInstances done")},e.prototype.watchDomChanges=function(){var t=this,e=this.log.call("watchDomChanges");new MutationObserver((function(e){window.$2sxc.stats.watchDomChanges++;var n=0;e.forEach((function(e){e.addedNodes.forEach((function(e){if(null!=e.matches){var o=e;o.matches(fn.IDs.cls.scMenu)||(n++,o.matches(fn.Sel.SxcDivs)?(t.initInstance(o,!1),ic.singleton().isVisible()||t.tryShowTemplatePicker()):o.matches(":not(.active-module)")&&o.querySelectorAll(fn.Sel.SxcDivs).length>0?o.querySelectorAll(fn.Sel.SxcDivs).forEach((function(e){t.initInstance(e,!1)})):Ea.singleton().build(o))}}))})),n&&So.cleanupOrphanedToolbars()})).observe(document.body,{attributes:!1,childList:!0,subtree:!0}),e.return("watchDomChanges done")},e.prototype.tryShowTemplatePicker=function(){var t,e,n=this.log.call("tryShowTemplatePicker"),o=Ks.get();if(o){var r=document.querySelectorAll("[".concat(fn.AttrNames.ContentBlockId,'="').concat(o,'"]'));if(r.length)if(o<0){var i=Number(r[0].attributes.getNamedItem(fn.AttrNames.InstanceId).value);e=window.$2sxc(i,o)}else e=window.$2sxc(o)}if(!e){var a=document.querySelectorAll(".".concat(fn.ClsNames.UnInitialized));if(this.diagCancelStateOnStart||this.openedTemplatePickerOnce)return n.return(!1,"cancelled");if(ic.singleton().isVisible())return n.return(!1,"should be invisible");if(1!==a.length)return n.return(!1,"has un-init modules");var s=null===(t=Array.from(a).find((function(t){return t.parentElement.matches(fn.Sel.SxcDivs)})))||void 0===t?void 0:t.parentElement;e=window.$2sxc(s)}return e&&(e.manage.run("layout"),this.openedTemplatePickerOnce=!0),n.return(!0,"tryShowTemplatePicker() done")},e.prototype.initInstance=function(t,e){var n=this.log.call("initInstance","module: obj, isFirstRun: ".concat(e,") initialized: ").concat(this.initializedInstances));if(!this.initializedInstances.find((function(e){return e===t}))){this.initializedInstances.push(t);var o=window.$2sxc(t);e||(o=o.recreate(!0));var r=this.showGlassesButtonIfUninitialized(o);!e&&r||(new ge("Bts.Module"),Ea.singleton().buildModule(t)),n.done()}},e.prototype.showGlassesButtonIfUninitialized=function(t){var e=this.log.call("showGlassesButtonIfUninitialized");if(this.isInitialized(t))return e.return(!1,"is initialized");var n=hn.getTag(t);if(0!==n.querySelectorAll(".".concat(fn.ClsNames.UnInitialized)).length)return e.return(!1,"already has button");var o=Oe.domFromString('<div class="'.concat(fn.ClsNames.UnInitialized,'" onmouseover="this.title = $2sxc.translate(this.title)" title="InPage.NewElement">')+'<div class="'.concat(Nn,'glasses"></div>')+"</div>")[0];return o.addEventListener("click",(function(){return t.manage.run("layout")})),n.append(o),e.return(!0,"ok")},e.prototype.isInitialized=function(t){var e,n=null==t?void 0:t.manage,o=null===(e=null==n?void 0:n.editContext)||void 0===e?void 0:e.contentBlock;return o&&0!==o.TemplateId},e}(fe),yc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mc=function(){return mc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},mc.apply(this,arguments)},bc="Cms.Api",wc=function(t){function e(){var e=t.call(this,bc,null)||this;return e.autoDump=fn.Debug.cms.autoDump,e}return yc(e,t),e.prototype.resetLog=function(){this.log=new ge(bc,null,"log was reset"),Te.add("cms","run",this.log)},e.prototype.run=function(t,e,n,o){return this.runInternal(t,e,n,o)},e.prototype.runInternal=function(t,e,n,o){var r,i=this.log.call("run<T>"),a=new dc(this.log);if(Us.is$sxcRunParams(t)){var s=on.is(t.context)||en.is(t.context)?window.$2sxc(t.context):t.tag,c=Mn.findContext(s);t.params=mc({action:t.action},t.params),r=function(){return a.run(c,t.params,t.event,t)}}else{var u=Pn.is(t)?t:Mn.findContext(t);r=function(){return a.detectParamsAndRun(u,e,n,o)}}var l=this.do(r);return i.return(l,"ok")},e.prototype.do=function(t){var e=this.log.call("do");this.resetLog();var n=t();return this.autoDump&&this.log.dump(),e.return(n)},e}(fe),Oc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xc=function(){return xc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},xc.apply(this,arguments)},Ac=function(t){function e(e){return t.call(this,e)||this}return Oc(e,t),e.prototype.run=function(t){return Us.ensureRunParamsInstanceOrError(t),(new wc).runInternal(xc(xc({},t),{context:this.sxc}))},e}(Ye),kc=function(){return kc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},kc.apply(this,arguments)},Cc=function(){function t(t,e){var n=this;this.editContext=t,this.context=e,this._isEditMode=function(){var t;return null!==(t=n.editContext.Environment.IsEditable)&&void 0!==t&&t}}return t.prototype.run=function(t,e,n){if(t.context||t.workflows)throw"You are calling '.manage.run(...)' with a parameter 'context' or workflows. You should probably be calling the new '.cms.run(...)' instead.";var o=Mn.findContext(this.context.sxc);return(new wc).runInternal(o,t,e,n)},t.prototype.getButton=function(t,e){return this.context.button=Ea.singleton().getLoader("getButton").groups.convertToButton(t,{},{},{}),new Vo(this.context).button.render(this.context,e).outerHTML},t.prototype.getToolbar=function(t,e){var n=Array.isArray(t)?t:kc({},t);t={settings:kc(kc({},t.settings),e),toolbar:n};var o=Ea.singleton().loadConfig(this.context,t);return this.context.toolbar=o,new Vo(this.context).render()},t.prototype._updateContentGroupGuid=function(t,e){t.contentBlock.contentGroupId=e,this.editContext.contentBlock.Guid=e},t}(),Sc=function(){function t(){this._toolbarManager=Ea.singleton()}return t.prototype.initInstance=function(t){try{var e=Mn.findContext(t),n=hn.getEditContext(t);t.manage=new Cc(n,e),t.cms=new Ac(t)}catch(t){console.error("error in 2sxc - will log but not throw",t)}},t}(),Tc=function(){function t(){}return t.prototype.finishUpgrade=function(t){window.$2sxc(t).webApi.fetchRaw("sys/install/resume").then((function(){alert("Upgrade ok, restarting the CMS and reloading..."),location.reload()})),alert("starting upgrade. This could take a few minutes. You'll see an 'ok' when it's done. Please wait...")},t}(),Pc=r(249);Oe.ready((function(){new Pc({callback:function(){document.body.classList.toggle("".concat(oo,"all"))}}).start()})),r(79);var _c=window.$2sxc;_c.context=Mn.findContext,_c._translateInit=function(t){return Ci.initManager(t)},_c.translate=xi,_c._manage=new Sc,window.$quickE=os.singleton(),_c.cms=new wc,Oe.ready((function(){(new vc).initialize(),os.singleton().start(),_c.system||(_c.system=new Tc)}))})(),$2sxcInpage=i})();
//# sourceMappingURL=https://sources.2sxc.org/17.04.00/dist/inpage/inpage.min.js.map