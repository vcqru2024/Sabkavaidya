"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_sub-dialogs_analyze-settings_analyze-settings_comp-6cd38e"],{4400:(F,u,a)=>{a.r(u),a.d(u,{AnalyzeSettingsComponent:()=>V});var c=a(4844),v=a(5876),y=a(604),C=a(1743),f=a(8112),R=a(7036),I=a(2556),t=a(4896),O=a(4648),r=a(8200),d=a(6176);let k=(()=>{class i{constructor(e){this.snackBar=e}agInit(e){this.key=e.value}refresh(e){return!0}copy(){(0,I.y)(this.key),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(O.yS))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-analyze-settings-key"]],decls:3,vars:2,consts:[["matRipple","",1,"key-box","highlight",3,"tippy","click"],[1,"key"]],template:function(n,s){1&n&&(t.I0R(0,"div",0),t.qCj("click",function(){return s.copy()}),t.I0R(1,"span",1),t.OEk(2),t.C$Y()()),2&n&&(t.E7m("tippy",s.key),t.yG2(2),t.cNF(s.key))},dependencies:[r.Y,d.UZ],styles:[".key-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.key-box[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;overflow:hidden}"]})}return i})();var m=a(2328);function G(i,l){if(1&i&&(t.I0R(0,"div",2)(1,"div"),t.OEk(2),t.C$Y(),t.I0R(3,"div",3)(4,"mat-icon"),t.OEk(5,"search"),t.C$Y()()()),2&i){const e=t.GaO();t.yG2(2),t.cNF(e.totalResults)}}function w(i,l){if(1&i){const e=t.KQA();t.I0R(0,"div",4),t.qCj("click",function(){t.usT(e);const s=t.GaO();return t.CGJ(s.openDetails())}),t.I0R(1,"div",5),t.OEk(2),t.C$Y(),t.I0R(3,"div",6)(4,"mat-icon"),t.OEk(5,"search"),t.C$Y()()()}if(2&i){const e=t.GaO();t.yG2(2),t.cNF(e.totalResults)}}let S=(()=>{class i{agInit(e){this.totalResults=e.value,this.params=e,this.stackItem=this.params.data}refresh(e){return!0}openDetails(){this.params.openDetails(this.stackItem)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-analyze-settings-total-results"]],decls:2,vars:2,consts:[["class","input-component no-click"],["matRipple","","class","input-component highlight","tippy","Open details"],[1,"input-component","no-click"],[1,"eav-grid-action-button","disabled"],["matRipple","","tippy","Open details",1,"input-component","highlight",3,"click"],[1,"text"],[1,"eav-grid-action-button"]],template:function(n,s){1&n&&t.yuY(0,G,6,1,"div",0)(1,w,6,1,"div",1),2&n&&(t.C0Y(0,s.totalResults<=1?0:-1),t.yG2(1),t.C0Y(1,s.totalResults>1?1:-1))},dependencies:[r.Y,m.qL,d.UZ],styles:[".no-click[_ngcontent-%COMP%]{cursor:default;-webkit-user-select:initial;user-select:initial}"]})}return i})();var $=a(204),z=a(600),p=a(5204),T=a(4672),x=a(4072),g=a(1904),h=a(244),A=a(7872),Y=a(5056);function E(i,l){if(1&i&&(t.I0R(0,"mat-option",8),t.OEk(1),t.C$Y()),2&i){const e=l.$implicit;t.E7m("value",e.Guid),t.yG2(1),t.cNF(e.Name)}}function M(i,l){if(1&i){const e=t.KQA();t.I0R(0,"div",1)(1,"div",2)(2,"div",3)(3,"div"),t.OEk(4),t.C$Y(),t.I0R(5,"button",4),t.qCj("click",function(){t.usT(e);const s=t.GaO();return t.CGJ(s.closeDialog())}),t.I0R(6,"mat-icon"),t.OEk(7,"close"),t.C$Y()()()(),t.I0R(8,"p",5),t.OEk(9," Settings and Resources are consolidated from many sources. Here you see what the resulting values would be. "),t.C$Y(),t.wR5(10,"router-outlet"),t.I0R(11,"mat-form-field",6)(12,"mat-label"),t.OEk(13,"Merge settings / resources of a View"),t.C$Y(),t.I0R(14,"mat-select",7),t.qCj("ngModelChange",function(s){t.usT(e);const o=t.GaO();return t.CGJ(o.changeView(s))}),t.I0R(15,"mat-option",8),t.OEk(16,"No view selected - this is how APIs see the data"),t.C$Y(),t.c53(17,E,2,2,"mat-option",8,t.oxv),t.C$Y()(),t.I0R(19,"div",9),t.wR5(20,"ag-grid-angular",10)(21,"div",11),t.C$Y()()}if(2&i){const e=t.GaO();t.yG2(4),t.oRS("Analyze ",e.part,""),t.yG2(10),t.E7m("ngModel",l.selectedView),t.yG2(1),t.E7m("value",void 0),t.yG2(2),t.oho(l.views),t.yG2(3),t.E7m("rowData",l.stack)("gridOptions",e.gridOptions)}}let V=(()=>{class i{constructor(e,n,s,o,b){this.dialogRef=e,this.route=n,this.router=s,this.viewsService=o,this.analyzeSettingsService=b,this.gridOptions=this.buildGridOptions(),this.part=this.route.snapshot.paramMap.get("part")}ngOnInit(){this.views$=new c.g([]),this.selectedView$=new c.g(void 0),this.stack$=new c.g([]),this.getViews(),this.getStack(),this.viewModel$=(0,v.E)([this.views$,this.selectedView$,this.stack$]).pipe((0,y.k)(([e,n,s])=>({views:e,selectedView:n,stack:s})))}ngOnDestroy(){this.views$.complete(),this.selectedView$.complete(),this.stack$.complete()}closeDialog(){this.dialogRef.close()}changeView(e){this.selectedView$.next(e),this.getStack()}getViews(){this.viewsService.getAll().subscribe(e=>{this.views$.next(e)})}getStack(){this.analyzeSettingsService.getStack(this.part,void 0,this.selectedView$.value,!0).subscribe(e=>{this.stack$.next(e)})}buildGridOptions(){return{...C.A,columnDefs:[{field:"Key",flex:2,minWidth:250,cellClass:"primary-action no-padding no-outline".split(" "),sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.Path,cellRenderer:k},{field:"Value",flex:2,minWidth:250,cellClass:"primary-action no-padding no-outline".split(" "),sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data._value,cellRenderer:$.u},{field:"Source",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.Source},{field:"Total",width:72,headerClass:"dense",cellClass:"secondary-action no-padding no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter",valueGetter:n=>n.data.TotalResults,cellRenderer:S,cellRendererParams:{openDetails:s=>{this.router.navigate([`details/${this.selectedView$.value}/${s.Path}`],{relativeTo:this.route})}}}]}}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(z.yI),t.GI1(p.gV),t.GI1(p.E5),t.GI1(f.sj),t.GI1(R.I))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-analyze-settings"]],decls:2,vars:3,consts:[["class","nav-component-wrapper"],[1,"nav-component-wrapper"],["mat-mdc-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"dialog-description"],["color","accent",1,"view-select-box"],[3,"ngModel","ngModelChange"],[3,"value"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],[1,"grid-more-actions-box"]],template:function(n,s){if(1&n&&(t.yuY(0,M,22,5,"div",0),t.wVc(1,"async")),2&n){let o;t.C0Y(0,(o=t.kDX(1,1,s.viewModel$))?0:-1,o)}},dependencies:[p.cP,r.Y,T.um,m.qL,x.U5,g.ue,g._G,h.Up,h.w5,A.kX,d.I5,Y.a],styles:[".view-select-box[_ngcontent-%COMP%]{width:400px}"]})}return i})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.04.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_sub-dialogs_analyze-settings_analyze-settings_comp-6cd38e.b15e31080b87a746.js.map