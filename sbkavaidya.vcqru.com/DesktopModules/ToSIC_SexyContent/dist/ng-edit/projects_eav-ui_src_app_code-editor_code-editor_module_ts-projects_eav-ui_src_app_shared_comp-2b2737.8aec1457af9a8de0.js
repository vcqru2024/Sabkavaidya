"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_code-editor_code-editor_module_ts-projects_eav-ui_src_app_shared_comp-2b2737"],{692:(A,k,a)=>{a.d(k,{O:()=>b,X:()=>C});var p=a(604),S=a(6028),E=a(4896),T=a(1332),M=a(3392);const b="admin/type/",l="admin/type/scopes";let C=(()=>{class m{constructor(x,G,R){this.http=x,this.context=G,this.dnnContext=R}apiUrl(x){return this.dnnContext.$2sxc.http.apiUrl(x)}retrieveContentType(x){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.context.appId.toString(),contentTypeId:x}})}retrieveContentTypes(x){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.context.appId.toString(),scope:x}})}getScopes(){return this.http.get(this.apiUrl(l),{params:{appId:this.context.appId.toString()}}).pipe((0,p.k)(x=>{const G=x.old;return Object.keys(G).map(j=>({name:G[j],value:j}))}))}getScopesV2(){return this.http.get(this.apiUrl(l),{params:{appId:this.context.appId.toString()}}).pipe((0,p.k)(x=>x.scopes))}save(x){return this.http.post(this.apiUrl("admin/type/save"),x,{params:{appid:this.context.appId.toString()}})}delete(x){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.context.appId.toString(),staticName:x.StaticName}})}import(x){const G=new FormData;for(const R of x)G.append("File",R);return this.http.post(this.apiUrl("admin/type/import"),G,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(x){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:x}})}static#t=this.\u0275fac=function(G){return new(G||m)(E.CoB(T.KK),E.CoB(S.e),E.CoB(M.es))};static#e=this.\u0275prov=E.wxM({token:m,factory:m.\u0275fac})}return m})()},5868:(A,k,a)=>{a.r(k),a.d(k,{CodeEditorModule:()=>se,translateLoaderFactoryCode:()=>nt});var p=a(5056),S=a(4672),E=a(6176),T=a(600),M=a(2328),b=a(4204),f=a(4648),c=a(8752),l=a(5544),y=a(4852),v=a(6028),g=a(988),d=a(8228),C=a(1224),m=a(5204),w=a(4844),x=a(5876),G=a(4816),R=a(3584),j=a(9432),B=a(8916),U=a(604),H=a(3244),F=a(8928),ot=a(6884),J=a(664),t=a(4896);function it(i,_){if(1&i&&(t.I0R(0,"div"),t.OEk(1),t.C$Y(),t.wR5(2,"br")),2&i){const e=t.GaO();t.yG2(1),t.CAO('"',e.snackBarData.fileName,'" also has a code-behind file "',e.snackBarData.codeFile,'".')}}function st(i,_){if(1&i&&t.OEk(0),2&i){const e=t.GaO(2);t.oRS(' You are editing "',e.snackBarData.edition,'" edition. ')}}function at(i,_){1&i&&t.OEk(0," You may be editing an edition which is not the one you see. ")}function rt(i,_){if(1&i&&(t.I0R(0,"div"),t.yuY(1,st,1,1),t.OEk(2),t.yuY(3,at,1,0),t.OEk(4," See "),t.I0R(5,"a",3),t.OEk(6,"docs"),t.C$Y(),t.OEk(7,". "),t.C$Y()),2&i){const e=t.GaO();t.yG2(1),t.C0Y(1,e.snackBarData.edition?1:-1),t.yG2(1),t.CAO(" There are ",e.snackBarData.otherEditions,' other editions of "',e.snackBarData.fileName,'". '),t.yG2(1),t.C0Y(3,e.snackBarData.edition?-1:3)}}function ct(i,_){if(1&i){const e=t.KQA();t.I0R(0,"button",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.openCodeBehind())}),t.OEk(1," Open code-behind file "),t.C$Y()}}let lt=(()=>{class i{constructor(e,n){this.snackRef=e,this.snackBarData=n}openCodeBehind(){this.snackBarData.openCodeBehind=!0,this.snackRef.dismissWithAction()}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(f.Yf),t.GI1(f.ED))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-code-and-edition-warnings"]],decls:5,vars:3,consts:[[1,"messages"],[1,"actions"],["mat-button","","color","primary"],["href","https://go.2sxc.org/polymorphism","target","_blank"],["mat-button","","color","primary",3,"click"]],template:function(n,o){1&n&&(t.I0R(0,"div",0),t.yuY(1,it,3,2)(2,rt,8,4,"div"),t.C$Y(),t.I0R(3,"div",1),t.yuY(4,ct,2,0,"button",2),t.C$Y()),2&n&&(t.yG2(1),t.C0Y(1,o.snackBarData.codeFile?1:-1),t.yG2(1),t.C0Y(2,o.snackBarData.otherEditions?2:-1),t.yG2(2),t.C0Y(4,o.snackBarData.codeFile?4:-1))},dependencies:[S.Gw],styles:[".messages[_ngcontent-%COMP%]{font-size:14px}.messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}"]})}return i})();const z={Templates:"Templates",Snippets:"Snippets"};var pt=a(4192),dt=a(9427),ut=a(3764),ht=a(1332),mt=a(3392);let Q=(()=>{class i{constructor(e,n,o){this.http=e,this.dnnContext=n,this.translate=o}getTooltips(e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/Code/InlineHelp"),{params:{language:e}})}getSnippets(e){return this.http.get("../ng-assets/snippets.json.js").pipe((0,U.k)(n=>{const o=this.filterAwayNotNeededSnippetsList(n.snippets,e),s=this.extractInputTypeSnippets(o),r=this.initSnippetsWithConfig(s.standardArray,e,s.inputTypeSnippets);return{list:s.standardArray,sets:r}}))}filterAwayNotNeededSnippetsList(e,n){const o=["@","["],s=h=>h.Type.indexOf("Razor")>-1?0:1,r=[];for(const h of e){const u=o.indexOf(h.set[0]);(-1===u||u===s(n))&&(u===s(n)&&(h.set=h.set.substring(1)),r.push(h))}return r}extractInputTypeSnippets(e){const n=[],o=[];for(const h of e)"\\"===h.set[0]?(h.set=h.set.substring(1),o.push(h)):n.push(h);return{standardArray:n,inputTypeSnippets:this.catalogInputTypeSnippets(o)}}catalogInputTypeSnippets(e){const n={};for(const o of e)void 0===n[o.subset]&&(n[o.subset]=[]),n[o.subset].push(o);return n}initSnippetsWithConfig(e,n,o){const s=this.makeTree(e);return s.Content=Object.assign({},s.Content,{Fields:{},PresentationFields:{}}),n.TypeContent&&this.loadContentType(s.Content.Fields,n.TypeContent,"Content",n,o),n.TypeContentPresentation&&this.loadContentType(s.Content.PresentationFields,n.TypeContentPresentation,"Content.Presentation",n,o),n.HasList?(s.List=Object.assign({},s.List,{Fields:{},PresentationFields:{}}),n.TypeList&&this.loadContentType(s.List.Fields,n.TypeList,"Header",n,o),n.TypeListPresentation&&this.loadContentType(s.List.PresentationFields,n.TypeListPresentation,"Header.Presentation",n,o)):delete s.List,n.HasApp&&(s.App.Resources={},s.App.Settings={},this.loadContentType(s.App.Resources,"App-Resources","App.Resources",n,o),this.loadContentType(s.App.Settings,"App-Settings","App.Settings",n,o)),s}makeTree(e){const n={};for(const o of e){void 0===n[o.set]&&(n[o.set]={}),void 0===n[o.set][o.subset]&&(n[o.set][o.subset]=[]);const s={key:o.name,label:this.label(o.set,o.subset,o.name),snip:o.content,help:o.help||this.help(o.set,o.subset,o.name),links:this.linksList(o.links)};n[o.set][o.subset].push(s)}return n}label(e,n,o){const s=this.getHelpKey(e,n,o,".Key");let r=this.translate.instant(s);return r===s&&(r=o),r}getHelpKey(e,n,o,s){return"SourceEditorSnippets."+e+"."+n+"."+o+s}help(e,n,o){const s=this.getHelpKey(e,n,o,".Help");let r=this.translate.instant(s);return r===s&&(r=""),r}linksList(e){if(!e)return null;const n=[],o=e.split("\n");for(const s of o){const r=s.split(":");if(3===r.length){const h={name:r[0].trim(),url:r[1].trim()+":"+r[2].trim()};n.push(h)}}return 0===n.length?null:n}loadContentType(e,n,o,s,r){this.getFields(s.AppId,n).subscribe(h=>{for(const u of h){const I=u.StaticName;e[I]={key:I,label:I,snip:this.valuePlaceholder(o,I,s),help:u.Metadata.merged.Notes||" ("+u.Type.toLowerCase()+") "};const O=(0,pt.c)(e[I]);this.attachSnippets(e,o,I,u.InputType,O,r)}if(h.length){const u=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"];for(let I=0;I<u.length;I++)e[u[I]]={key:u[I],label:u[I],snip:this.valuePlaceholder(o,u[I],s),help:this.translate.instant("SourceEditorSnippets.StandardFields."+u[I]+".Help")}}})}valuePlaceholder(e,n,o){return o.Type.indexOf("Razor")>-1?"@"+e+"."+n:"["+e.replace(".",":")+":"+n+"]"}getFields(e,n){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(ut.yK),{params:{appid:e.toString(),staticName:n}}).pipe((0,U.k)(o=>{o=o.filter(s=>s.Type!==dt.m.Empty);for(const s of o){if(!s.Metadata)continue;const r=s.Metadata;r.merged={...r.All,...r[s.Type],...r[s.InputType]}}return o}))}attachSnippets(e,n,o,s,r,h){let u=h[s];if(s.indexOf("-")){const O=s.substring(0,s.indexOf("-"));if(O){const P=h[O];P&&(u=u?u.concat(P):P)}}if(!u)return;void 0===e[o].more&&(e[o].more={});const I=e[o].more;for(let O=0;O<u.length;O++)try{I[o+"-"+u[O].name]=Object.assign({},r,{key:o+" - "+u[O].name,label:u[O].name,snip:this.localizeGenericSnippet(u[O].content,n,o),collapse:!0})}finally{}}localizeGenericSnippet(e,n,o){return e.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+n+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+o+"$2")}static#t=this.\u0275fac=function(n){return new(n||i)(t.CoB(ht.KK),t.CoB(mt.es),t.CoB(c.qS))};static#e=this.\u0275prov=t.wxM({token:i,factory:i.\u0275fac})}return i})();var X=a(1048),Z=a(168),K=a(504),gt=a(2564),N=a(8200),Ct=a(1106),ft=a(48);let yt=(()=>{class i{transform(e){if(null!=e)return Array.isArray(e)?e:Object.values(e)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275pipe=t.UTH({name:"objectToArray",type:i,pure:!0})}return i})();function vt(i,_){if(1&i){const e=t.KQA();t.I0R(0,"mat-icon",9),t.qCj("click",function(){t.usT(e);const o=t.GaO().$implicit,s=t.GaO(5);return t.CGJ(s.toggleMore(o.key))}),t.OEk(1),t.C$Y()}if(2&i){const e=t.GaO().$implicit,n=t.GaO(5);t.yG2(1),t.oRS(" ",n.toggledMores.includes(e.key)?"more_vert":"more_horiz"," ")}}function It(i,_){if(1&i&&(t.I0R(0,"div")(1,"a",12),t.OEk(2),t.C$Y()()),2&i){const e=_.$implicit;t.yG2(1),t.E7m("href",e.url,t.K6U),t.yG2(1),t.cNF(e.name)}}function Ot(i,_){if(1&i&&(t.I0R(0,"div",10),t.wR5(1,"div",11),t.wVc(2,"safeHtml"),t.c53(3,It,3,2,"div",null,t.oxv),t.C$Y()),2&i){const e=t.GaO().$implicit;t.yG2(1),t.E7m("innerHTML",t.kDX(2,1,e.help),t.E3n),t.yG2(2),t.oho(e.links)}}function xt(i,_){if(1&i&&(t.I0R(0,"div")(1,"a",12),t.OEk(2),t.C$Y()()),2&i){const e=_.$implicit;t.yG2(1),t.E7m("href",e.url,t.K6U),t.yG2(1),t.cNF(e.name)}}function St(i,_){if(1&i&&(t.I0R(0,"div",15),t.wR5(1,"div",11),t.wVc(2,"safeHtml"),t.c53(3,xt,3,2,"div",null,t.oxv),t.C$Y()),2&i){const e=t.GaO().$implicit;t.yG2(1),t.E7m("innerHTML",t.kDX(2,1,e.help),t.E3n),t.yG2(2),t.oho(e.links)}}function Tt(i,_){if(1&i){const e=t.KQA();t.I0R(0,"div")(1,"div",4)(2,"div",13),t.qCj("click",function(){const s=t.usT(e).$implicit,r=t.GaO(7);return t.CGJ(r.addSnippet(s.snip))}),t.OEk(3),t.C$Y(),t.I0R(4,"mat-icon",7),t.qCj("click",function(){const s=t.usT(e).$implicit,r=t.GaO(7);return t.CGJ(r.toggleInfo(s.key))}),t.OEk(5,"info"),t.C$Y()(),t.yuY(6,St,5,3,"div",14),t.C$Y()}if(2&i){const e=_.$implicit,n=t.GaO(7);t.yG2(2),t.E7m("tippy",e.snip),t.yG2(1),t.oRS(" ",e.label," "),t.yG2(3),t.C0Y(6,n.toggledInfos.includes(e.key)?6:-1)}}function bt(i,_){if(1&i&&(t.c53(0,Tt,7,3,"div",null,t.oxv),t.wVc(2,"objectToArray")),2&i){const e=t.GaO().$implicit;t.oho(t.kDX(2,0,e.more))}}function wt(i,_){if(1&i){const e=t.KQA();t.I0R(0,"div",3)(1,"div",4)(2,"div",5),t.qCj("click",function(){const s=t.usT(e).$implicit,r=t.GaO(5);return t.CGJ(r.addSnippet(s.snip))}),t.OEk(3),t.C$Y(),t.yuY(4,vt,2,1,"mat-icon",6),t.I0R(5,"mat-icon",7),t.qCj("click",function(){const s=t.usT(e).$implicit,r=t.GaO(5);return t.CGJ(r.toggleInfo(s.key))}),t.OEk(6,"info"),t.C$Y()(),t.yuY(7,Ot,5,3,"div",8)(8,bt,3,2),t.C$Y()}if(2&i){const e=_.$implicit,n=t.GaO(5);t.yG2(2),t.E7m("tippy",e.snip),t.yG2(1),t.oRS(" ",e.label," "),t.yG2(1),t.C0Y(4,e.more?4:-1),t.yG2(3),t.C0Y(7,n.toggledInfos.includes(e.key)?7:-1),t.yG2(1),t.C0Y(8,n.toggledMores.includes(e.key)?8:-1)}}function Et(i,_){if(1&i&&(t.c53(0,wt,9,5,"div",16,t.oxv),t.wVc(2,"objectToArray")),2&i){const e=t.GaO().$implicit;t.oho(t.kDX(2,0,e.value))}}function Mt(i,_){if(1&i){const e=t.KQA();t.I0R(0,"div")(1,"div",2),t.qCj("click",function(){const s=t.usT(e).$implicit,r=t.GaO(3);return t.CGJ(r.toggleFolder(s.key))}),t.wVc(2,"translate"),t.I0R(3,"mat-icon"),t.OEk(4),t.C$Y(),t.I0R(5,"span"),t.OEk(6),t.wVc(7,"translate"),t.C$Y()(),t.yuY(8,Et,3,2),t.C$Y()}if(2&i){const e=_.$implicit,n=t.GaO(2).$implicit,o=t.GaO();t.yG2(1),t.E7m("tippy",t.kDX(2,4,"SourceEditorSnippets."+n.key+"."+e.key+".Help")),t.yG2(3),t.oRS(" ",o.toggledFolders.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.yG2(2),t.cNF(t.kDX(7,6,"SourceEditorSnippets."+n.key+"."+e.key+".Title")),t.yG2(2),t.C0Y(8,o.toggledFolders.includes(e.key)?8:-1)}}function Pt(i,_){if(1&i&&(t.c53(0,Mt,9,8,"div",null,t.oxv),t.wVc(2,"keyvalue")),2&i){const e=t.GaO().$implicit;t.oho(t.kDX(2,0,e.value))}}function kt(i,_){if(1&i){const e=t.KQA();t.I0R(0,"div")(1,"div",1),t.qCj("click",function(){const s=t.usT(e).$implicit,r=t.GaO();return t.CGJ(r.toggleSection(s.key))}),t.wVc(2,"translate"),t.I0R(3,"mat-icon"),t.OEk(4),t.C$Y(),t.I0R(5,"span"),t.OEk(6),t.wVc(7,"translate"),t.C$Y()(),t.yuY(8,Pt,3,2),t.C$Y()}if(2&i){const e=_.$implicit,n=t.GaO();t.yG2(1),t.E7m("tippy",t.kDX(2,4,"SourceEditorSnippets."+e.key+".Help")),t.yG2(3),t.oRS(" ",n.toggledSections.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.yG2(2),t.cNF(t.kDX(7,6,"SourceEditorSnippets."+e.key+".Title")),t.yG2(2),t.C0Y(8,n.toggledSections.includes(e.key)?8:-1)}}let Ft=(()=>{class i{constructor(){this.insertSnippet=new t._w7,this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}addSnippet(e){this.insertSnippet.emit(e)}toggleSection(e){F.Co.toggleInArray(e,this.toggledSections)}toggleFolder(e){F.Co.toggleInArray(e,this.toggledFolders)}toggleInfo(e){F.Co.toggleInArray(e,this.toggledInfos)}toggleMore(e){F.Co.toggleInArray(e,this.toggledMores)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},decls:4,vars:2,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],["tippyShowDelay","750",1,"collapsible-header","section",3,"tippy","click"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"tippy","click"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"tippy","click"],["tippy","Show More","tippyShowDelay","750"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],["class","snippet-help"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"snippet-help"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"tippy","click"],["class","snippet-help snippet-help-more"],[1,"snippet-help","snippet-help-more"],["class","snippet"]],template:function(n,o){1&n&&(t.I0R(0,"div",0),t.c53(1,kt,9,8,"div",null,t.oxv),t.wVc(3,"keyvalue"),t.C$Y()),2&n&&(t.yG2(1),t.oho(t.kDX(3,0,o.snippets)))},dependencies:[K.c,N.Y,M.qL,E.UZ,ft.K,p.uq,c.sD,yt],styles:[".collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}"]})}return i})();function q(i){if(!i)return[];const _=[];for(const e of i){let n=_;const o=e.Path.split("/"),s=o[o.length-1];let r="";for(let h=0;h<o.length;h++){const u=o[h];r+=h?`/${u}`:u;const I=n.find(O=>O.name===u);if(I)n=I.children;else{const O={depth:h,name:u,pathFromRoot:r,isShared:e.Shared,isFolder:u!==s,...u!==s&&{children:[]}};n.push(O),n=O.children}}}return _}var L=a(7848);let $t=(()=>{class i{constructor(e){this.sanitizer=e}transform(e,n){let o;return o=n?8*e:0===e?8:8*e+16,this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${o}px;`)}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(Z.mI,16))};static#e=this.\u0275pipe=t.UTH({name:"depthPadding",type:i,pure:!0})}return i})(),Rt=(()=>{class i{transform(e){return null==e||e.sort((n,o)=>n.isFolder<o.isFolder?1:n.isFolder>o.isFolder?-1:0),e}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275pipe=t.UTH({name:"sortItems",type:i,pure:!0})}return i})();function Dt(i,_){1&i&&t.C_f(0)}const tt=i=>({item:i});function At(i,_){if(1&i&&t.yuY(0,Dt,1,0,"ng-container",6),2&i){const e=_.$implicit;t.GaO();const n=t.Gew(6);t.E7m("ngTemplateOutlet",n)("ngTemplateOutletContext",t.S45(2,tt,e))}}const Yt=i=>({active:i});function jt(i,_){if(1&i){const e=t.KQA();t.I0R(0,"div",8),t.qCj("click",function(){t.usT(e);const o=t.GaO().item,s=t.GaO();return t.CGJ(s.openTemplate(o.pathFromRoot,o.isShared))}),t.wVc(1,"depthPadding"),t.OEk(2),t.C$Y()}if(2&i){const e=t.GaO().item,n=t.GaO();t.m_g(t.g7$(1,5,e.depth,e.isFolder)),t.E7m("ngClass",t.S45(8,Yt,n.isToggled(e.pathFromRoot,e.isShared)))("tippy",e.name),t.yG2(2),t.oRS(" ",e.name," ")}}function Lt(i,_){1&i&&t.C_f(0)}function Vt(i,_){if(1&i&&t.yuY(0,Lt,1,0,"ng-container",6),2&i){const e=_.$implicit;t.GaO(4);const n=t.Gew(6);t.E7m("ngTemplateOutlet",n)("ngTemplateOutletContext",t.S45(2,tt,e))}}function Bt(i,_){if(1&i&&(t.c53(0,Vt,1,4,"ng-container",null,t.oxv),t.wVc(2,"sortItems")),2&i){const e=t.GaO(2).item;t.oho(t.kDX(2,0,e.children))}}const Ut=i=>({"app-shared-root":i});function Kt(i,_){if(1&i){const e=t.KQA();t.I0R(0,"div")(1,"div",9),t.qCj("click",function(){t.usT(e);const o=t.GaO().item,s=t.GaO();return t.CGJ(s.toggleItem(o.pathFromRoot,o.isShared))}),t.wVc(2,"depthPadding"),t.I0R(3,"div",10)(4,"mat-icon"),t.OEk(5),t.C$Y(),t.I0R(6,"span"),t.OEk(7),t.C$Y()(),t.I0R(8,"div",11),t.qCj("click",function(){t.usT(e);const o=t.GaO().item,s=t.GaO();return t.CGJ(s.addFile(o.pathFromRoot,o.isShared))}),t.I0R(9,"mat-icon"),t.OEk(10,"add"),t.C$Y()()(),t.yuY(11,Bt,3,2),t.C$Y()}if(2&i){const e=t.GaO().item,n=t.GaO();t.yG2(1),t.m_g(t.g7$(2,7,e.depth+1,e.isFolder)),t.E7m("ngClass",t.S45(10,Ut,e.depth<0)),t.yG2(2),t.E7m("tippy",e.name),t.yG2(2),t.oRS(" ",n.isToggled(e.pathFromRoot,e.isShared)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.yG2(2),t.cNF(e.name),t.yG2(4),t.C0Y(11,n.isToggled(e.pathFromRoot,e.isShared)?11:-1)}}function Nt(i,_){if(1&i&&t.yuY(0,jt,3,10,"div",7)(1,Kt,12,12,"div"),2&i){const e=_.item;t.C0Y(0,e.isFolder?-1:0),t.yG2(1),t.C0Y(1,e.isFolder?1:-1)}}let Wt=(()=>{class i{constructor(){this.openView=new t._w7,this.createTemplate=new t._w7,this.toggledItemsApp=[],this.toggledItemsShared=[]}ngOnChanges(e){if(null!=e.templates&&(this.tree=function Gt(i){return[{depth:-1,name:"App Files",pathFromRoot:"",isShared:!1,isFolder:!0,children:q(i.filter(e=>!e.Shared))},{depth:-1,name:"Shared App Files",pathFromRoot:"",isShared:!0,isFolder:!0,children:q(i.filter(e=>e.Shared))}]}(this.templates)),null!=e.view){const n=e.view?.previousValue;n&&this.toggleItem(n.FileName,n.IsShared),this.view&&this.showFileInTree(this.view.FileName,this.view.IsShared)}}isToggled(e,n){return(n?this.toggledItemsShared:this.toggledItemsApp).includes(e)}openTemplate(e,n){this.openView.emit({key:e,shared:n})}toggleItem(e,n){F.Co.toggleInArray(e,n?this.toggledItemsShared:this.toggledItemsApp)}addFile(e,n){this.createTemplate.emit({folder:e,isShared:n})}showFileInTree(e,n){if(null==e)return;const o=n?this.toggledItemsShared:this.toggledItemsApp;if(o.includes(e))return;const s=["",...e.split("/")];let r="";for(const h of s)r=r?`${r}/${h}`:h,!o.includes(r)&&this.toggleItem(r,n)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},outputs:{openView:"openView",createTemplate:"createTemplate"},features:[t.SYr],decls:19,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],["fileOrFolder",""],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file","tippyPlacement","left",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","file","tippyShowDelay","750",3,"style","ngClass","tippy"],["tippyShowDelay","750",1,"file",3,"ngClass","tippy","click"],[1,"folder-name-wrapper",3,"ngClass","click"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(n,o){if(1&n&&(t.I0R(0,"div",0)(1,"div"),t.c53(2,At,1,4,"ng-container",null,t.oxv),t.wVc(4,"sortItems"),t.yuY(5,Nt,2,2,"ng-template",null,1,t.gJz),t.C$Y(),t.I0R(7,"div",2)(8,"button",3)(9,"mat-icon"),t.OEk(10,"add"),t.C$Y()(),t.I0R(11,"mat-menu",null,4)(13,"button",5),t.qCj("click",function(){return o.addFile("",!1)}),t.I0R(14,"span"),t.OEk(15,"App"),t.C$Y()(),t.I0R(16,"button",5),t.qCj("click",function(){return o.addFile("",!0)}),t.I0R(17,"span"),t.OEk(18,"Shared (global)"),t.C$Y()()()()()),2&n){const s=t.Gew(12);t.yG2(2),t.oho(t.kDX(4,1,o.tree)),t.yG2(6),t.E7m("matMenuTriggerFor",s)}},dependencies:[K.c,N.Y,p.QF,p.XV,S.um,M.qL,L.aM,L.OQ,L.yG,$t,Rt],styles:[".explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper.app-shared-root[_ngcontent-%COMP%]{color:#fff;font-weight:500}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}"]})}return i})();function Ht(i,_){1&i&&(t.I0R(0,"mat-icon",20),t.OEk(1,"share"),t.C$Y())}function Jt(i,_){1&i&&(t.I0R(0,"mat-icon",21),t.OEk(1,"circle"),t.C$Y())}function zt(i,_){1&i&&t.wR5(0,"mat-spinner",22)}const Qt=(i,_,e)=>({active:i,modified:_,loading:e});function Xt(i,_){if(1&i){const e=t.KQA();t.I0R(0,"div",12),t.qCj("click",function(){const s=t.usT(e).$implicit,r=t.GaO(3);return t.CGJ(r.openView(s.viewKey))}),t.I0R(1,"div",13),t.yuY(2,Ht,2,0,"mat-icon",14),t.I0R(3,"span",15),t.OEk(4),t.C$Y()(),t.I0R(5,"div",16),t.yuY(6,Jt,2,0,"mat-icon",17)(7,zt,1,0,"mat-spinner",18),t.I0R(8,"mat-icon",19),t.qCj("click",function(){const s=t.usT(e).$implicit,r=t.GaO(3);return t.CGJ(r.closeEditor(s.viewKey))}),t.OEk(9,"close"),t.C$Y()()()}if(2&i){const e=_.$implicit;t.E7m("ngClass",t.uAc(6,Qt,e.isActive,e.isModified,e.isLoading)),t.yG2(1),t.E7m("tippy",e.label),t.yG2(1),t.C0Y(2,e.viewKey.shared?2:-1),t.yG2(2),t.cNF(e.label),t.yG2(2),t.C0Y(6,e.isModified?6:-1),t.yG2(1),t.C0Y(7,e.isLoading?7:-1)}}function Zt(i,_){if(1&i&&(t.I0R(0,"div",11),t.c53(1,Xt,10,10,"div",23,t.oxv),t.C$Y()),2&i){const e=t.GaO();t.yG2(1),t.oho(e.tabs)}}function qt(i,_){if(1&i){const e=t.KQA();t.I0R(0,"app-monaco-editor",24),t.qCj("valueChanged",function(o){t.usT(e);const s=t.GaO(),r=t.GaO();return t.CGJ(r.codeChanged(o,s.viewKey))}),t.C$Y()}if(2&i){const e=t.GaO(),n=t.GaO();t.E7m("filename",e.view.FileName)("value",e.view.Code)("options",n.monacoOptions)("snippets",e.editorSnipps)("tooltips",e.tooltips)("autoFocus",!0)}}function te(i,_){if(1&i){const e=t.KQA();t.I0R(0,"button",25),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.save())}),t.I0R(1,"mat-icon"),t.OEk(2,"done"),t.C$Y()()}}const ee=i=>({"sxc-dark":i}),et=i=>({active:i});function ne(i,_){if(1&i){const e=t.KQA();t.I0R(0,"div",1)(1,"div",2)(2,"div",3),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.toggleExplorer(o.Explorers.Templates))}),t.I0R(3,"mat-icon"),t.OEk(4,"file_copy"),t.C$Y()(),t.I0R(5,"div",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.toggleExplorer(o.Explorers.Snippets))}),t.I0R(6,"mat-icon"),t.OEk(7,"code"),t.C$Y()()(),t.I0R(8,"app-code-templates",5),t.qCj("openView",function(o){t.usT(e);const s=t.GaO();return t.CGJ(s.openView(o))})("createTemplate",function(o){t.usT(e);const s=t.GaO();return t.CGJ(s.createTemplate(o))}),t.C$Y(),t.I0R(9,"app-code-snippets",6),t.qCj("insertSnippet",function(o){t.usT(e);const s=t.GaO();return t.CGJ(s.insertSnippet(o))}),t.C$Y(),t.I0R(10,"div",7),t.yuY(11,Zt,3,0,"div",8)(12,qt,1,6,"app-monaco-editor",9),t.C$Y(),t.yuY(13,te,3,0,"button",10),t.C$Y()}if(2&i){const e=t.GaO();t.E7m("ngClass",t.S45(11,ee,"2sxc-dark"===e.monacoOptions.theme)),t.yG2(2),t.E7m("ngClass",t.S45(13,et,e.activeExplorer===e.Explorers.Templates)),t.yG2(3),t.E7m("ngClass",t.S45(15,et,e.activeExplorer===e.Explorers.Snippets)),t.yG2(3),t.E7m("hidden",e.activeExplorer!==e.Explorers.Templates)("view",_.view)("templates",_.templates),t.yG2(1),t.E7m("hidden",e.activeExplorer!==e.Explorers.Snippets)("snippets",_.explorerSnipps),t.yG2(2),t.C0Y(11,_.tabs.length>0?11:-1),t.yG2(1),t.C0Y(12,_.view?12:-1),t.yG2(1),t.C0Y(13,_.activeView?13:-1)}}const oe=[{path:"",component:(()=>{class i extends ot.C{constructor(e,n,o,s,r,h,u,I,O){super(),this.context=e,this.route=n,this.snackBar=o,this.sourceService=s,this.snippetsService=r,this.zone=h,this.titleService=u,this.dialog=I,this.viewContainerRef=O,this.Explorers=z,this.activeExplorer=z.Templates,this.monacoOptions={theme:"2sxc-dark",tabSize:2,fixedOverflowWidgets:!0},this.context.init(this.route);const P=JSON.parse(sessionStorage.getItem(J.Yv)),D="true"===sessionStorage.getItem(J.AB);P.forEach($=>{$.Path.startsWith("/")&&($.Path=$.Path.substring(1)),$.IsShared??=D}),this.urlItems=P}ngOnInit(){this.templates$=new w.g([]);const e=this.urlItems.map(n=>({key:n.EntityId?.toString()??n.Path,shared:n.IsShared}));this.activeView$=new w.g(e[0]),this.openViews$=new w.g(e),this.viewInfos$=new w.g([]),this.attachListeners(),this.sourceService.getAll().subscribe(n=>{this.templates$.next(n)}),this.subscription.add((0,x.E)([this.templates$,this.openViews$]).subscribe(([n,o])=>{if(0===n.length)return;let s=this.viewInfos$.value;const r=o.filter(h=>!s.some(u=>F.Co.objectsEqual(u.viewKey,h)));0!==r.length&&((0,G.y)(r.map(h=>{const u={viewKey:h};s=[...s,u];const I=this.sourceService.get(h.key,h.shared,this.urlItems).pipe((0,R.o)()),O=I.pipe((0,j.G)(D=>this.snippetsService.getSnippets(D))),P=I.pipe((0,j.G)(D=>this.snippetsService.getTooltips(D.Extension.substring(1))));return(0,G.y)([(0,B.of)(h),I,O,P])})).subscribe(h=>{let u=this.viewInfos$.value;h.forEach(([I,O,P,D])=>{const $=u.findIndex(Y=>F.Co.objectsEqual(Y.viewKey,I));if($<0)return;const V={viewKey:I,view:O,explorerSnipps:P.sets,editorSnipps:P.list,tooltips:D,savedCode:O.Code};u=[...u.slice(0,$),V,...u.slice($+1)],this.showCodeAndEditionWarnings(I,O,n)}),this.viewInfos$.next(u)}),this.viewInfos$.next(s))})),this.subscription.add((0,x.E)([this.activeView$,this.viewInfos$]).subscribe(([n,o])=>{const s=o.find(I=>F.Co.objectsEqual(I.viewKey,n)),r="Code Editor",h=null==s?r:`${s.view?.FileName} - ${r}`;h!==this.titleService.getTitle()&&this.titleService.setTitle(h)})),this.viewModel$=(0,x.E)([this.templates$,this.activeView$,this.openViews$,this.viewInfos$]).pipe((0,U.k)(([n,o,s,r])=>{const h=s.map(O=>{const P=r.find($=>F.Co.objectsEqual($.viewKey,O));return{viewKey:O,label:P?.view?.FileName??O.key,isActive:F.Co.objectsEqual(O,o),isModified:P?.view?.Code!==P?.savedCode,isLoading:null==P?.view}}),u=r.find(O=>F.Co.objectsEqual(O.viewKey,o));return{activeView:o,tabs:h,viewKey:u?.viewKey,view:u?.view,templates:n,explorerSnipps:u?.explorerSnipps,editorSnipps:u?.editorSnipps,tooltips:u?.tooltips}}))}ngOnDestroy(){this.templates$.complete(),this.activeView$.complete(),this.openViews$.complete(),this.viewInfos$.complete(),super.ngOnDestroy()}toggleExplorer(e){this.activeExplorer=this.activeExplorer!==e?e:null}createTemplate(e){const n={folder:e.folder,global:e.isShared,purpose:"api"===e.folder||e.folder?.startsWith("api/")?"Api":void 0};this.dialog.open(l.cE,{autoFocus:!1,data:n,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(s=>{s&&this.sourceService.create(s.name,e.isShared,s.templateKey).subscribe(()=>{this.sourceService.getAll().subscribe(r=>{this.templates$.next(r)})})})}insertSnippet(e){this.monacoEditorRef?.insertSnippet(e)}codeChanged(e,n){let o=this.viewInfos$.value;const s=o.findIndex(u=>F.Co.objectsEqual(u.viewKey,n)),r=o[s],h={...r,view:{...r.view,Code:e}};o=[...o.slice(0,s),h,...o.slice(s+1)],this.viewInfos$.next(o)}openView(e){e=this.viewInfos$.value.find(s=>!F.Co.objectsEqual(s.viewKey,e)&&s.view?.FileName===e.key&&s.view?.IsShared===e.shared)?.viewKey??e,F.Co.objectsEqual(this.activeView$.value,e)||this.activeView$.next(e);const o=this.openViews$.value;if(!o.some(s=>F.Co.objectsEqual(s,e))){const s=[...o,e];this.openViews$.next(s)}}closeEditor(e){const n=this.openViews$.value,o=n.filter(r=>!F.Co.objectsEqual(r,e)),s=this.activeView$.value;if(F.Co.objectsEqual(s,e)){const r=n[n.findIndex(h=>F.Co.objectsEqual(h,s))-1]??o[0];this.activeView$.next(r)}this.openViews$.next(o)}save(e){e??=this.activeView$.value;const n=this.viewInfos$.value.find(s=>F.Co.objectsEqual(s.viewKey,e));if(null==n?.view)return;this.snackBar.open("Saving...");const o=n.view.Code;this.sourceService.save(e.key,e.shared,n.view,this.urlItems).subscribe({next:s=>{if(!s)return void this.snackBar.open("Failed",null,{duration:2e3});let r=[...this.viewInfos$.value];const h=r.findIndex(O=>F.Co.objectsEqual(O.viewKey,e));if(h<0)return;const I={...r[h],savedCode:o};r=[...r.slice(0,h),I,...r.slice(h+1)],this.viewInfos$.next(r),this.snackBar.open("Saved",null,{duration:2e3})},error:()=>{this.snackBar.open("Failed",null,{duration:2e3})}})}showCodeAndEditionWarnings(e,n,o){const s=n.FileName,r=s.indexOf("/")>-1?s.lastIndexOf("/")+1:0,h=0===r?"":s.substring(0,r),u=s.substring(r),O=u.substring(0,u.length-n.Extension.length)+".code"+n.Extension,P=o.find($=>$.Path===h+O&&$.Shared===n.IsShared),D=o.filter($=>$.Path.endsWith(u)&&$.Shared===n.IsShared).length-1;if(P||D){const $={fileName:u,codeFile:P?.Path,edition:this.urlItems.find(Y=>Y.EntityId?.toString()===e.key&&Y.IsShared===n.IsShared&&Y.Path===n.FileName)?.Edition,otherEditions:D,openCodeBehind:!1},V=this.snackBar.openFromComponent(lt,{data:$,duration:1e4});V.onAction().subscribe(()=>{V.containerInstance.snackBarConfig.data.openCodeBehind&&this.openView({key:P?.Path,shared:P?.Shared})})}}attachListeners(){this.zone.runOutsideAngular(()=>{this.subscription.add((0,H.w)(window,"beforeunload").subscribe(e=>{this.viewInfos$.value.some(o=>null!=o.view&&o.view.Code!==o.savedCode)&&(e.preventDefault(),e.returnValue="")})),this.subscription.add((0,H.w)(window,"keydown").subscribe(e=>{83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),this.zone.run(()=>{this.save()}))}))})}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(v.e),t.GI1(m.gV),t.GI1(f.yS),t.GI1(X.M),t.GI1(Q),t.GI1(t.WW2),t.GI1(Z.OY),t.GI1(T.qW),t.GI1(t.y8U))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-code-editor"]],viewQuery:function(n,o){if(1&n&&t.CC$(y.O,5),2&n){let s;t.wto(s=t.Gqi())&&(o.monacoEditorRef=s.first)}},features:[t.eg9],decls:2,vars:3,consts:[["class","editor-root","appToggleDebug","",3,"ngClass"],["appToggleDebug","",1,"editor-root",3,"ngClass"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"ngClass","click"],["tippy","Snippets",1,"button",3,"ngClass","click"],[3,"hidden","view","templates","openView","createTemplate"],[3,"hidden","snippets","insertSnippet"],[1,"editor-group"],["class","tabs-container fancy-scrollbar-dark"],[3,"filename","value","options","snippets","tooltips","autoFocus"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S"],[1,"tabs-container","fancy-scrollbar-dark"],[1,"tab",3,"ngClass","click"],["tippyShowDelay","750",1,"tab-label-container",3,"tippy"],["class","icon-shared"],[1,"tab-label"],[1,"tab-actions-container"],["class","tab-action icon-modified","fontSet","material-icons"],["class","spinner","mode","indeterminate","diameter","14","color","white"],["tippy","Close","appClickStopPropagation","",1,"tab-action","icon-close",3,"click"],[1,"icon-shared"],["fontSet","material-icons",1,"tab-action","icon-modified"],["mode","indeterminate","diameter","14","color","white",1,"spinner"],["class","tab",3,"ngClass"],[3,"filename","value","options","snippets","tooltips","autoFocus","valueChanged"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click"]],template:function(n,o){if(1&n&&(t.yuY(0,ne,14,17,"div",0),t.wVc(1,"async")),2&n){let s;t.C0Y(0,(s=t.kDX(1,1,o.viewModel$))?0:-1,s)}},dependencies:[K.c,gt.U,N.Y,p.QF,S.uw,M.qL,Ct.O,b.cm,Ft,Wt,p.a],styles:[".sxc-dark[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;height:35px;background-color:#252526;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]:hover{overflow-x:auto}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;align-items:center;cursor:pointer;color:#ccc;font-size:13px;padding-left:10px;border-right:1px solid rgb(37,37,38);background-color:#2d2d2d;-webkit-user-select:none;user-select:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]   .icon-shared[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;margin-right:4px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]{height:100%;width:28px;display:flex;align-items:center;justify-content:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:16px;height:16px;padding:2px;font-size:16px;border-radius:5px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action.icon-modified[_ngcontent-%COMP%]{width:10px;height:10px;font-size:10px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]:hover{background-color:#5a5d5e4f}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).modified   .icon-modified[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).loading   .spinner[_ngcontent-%COMP%]{display:block}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover):not(.modified):not(.loading).active   .icon-close[_ngcontent-%COMP%]{display:flex}.mat-mdc-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]})}return i})()}];let ie=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.a4G({type:i});static#n=this.\u0275inj=t.s3X({imports:[m.qQ.forChild(oe),m.qQ]})}return i})();function nt(i){return new d.A(i,"./i18n/code-editor.",`.js?${window.sxcVersion}`)}let se=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.a4G({type:i});static#n=this.\u0275inj=t.s3X({providers:[v.e,X.M,Q,c.qS],imports:[ie,g.q,p.MD,T.sr,S.oJ,M.oB,f.uE,E.KE,L._A,c.O0.forChild((0,C.C)(nt)),y.w,b.kB,l.GW]})}return i})()},3764:(A,k,a)=>{a.d(k,{Ck:()=>y,yK:()=>c});var p=a(604),S=a(692),E=a(6028),T=a(4896),M=a(1332),b=a(3392);const f="admin/field/",c="admin/field/all",l="admin/field/GetSharedFields";let y=(()=>{class v{constructor(d,C,m){this.http=d,this.context=C,this.dnnContext=m}apiUrl(d){return this.dnnContext.$2sxc.http.apiUrl(d)}typeListRetrieve(){return this.http.get(this.apiUrl(f+"DataTypes"),{params:{appid:this.context.appId.toString()}})}getInputTypesList(){return this.http.get(this.apiUrl(f+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,p.k)(d=>d.map(m=>({dataType:m.Type.substring(0,m.Type.indexOf("-")),inputType:m.Type,label:m.Label,description:m.Description,isDefault:m.IsDefault,isObsolete:m.IsObsolete,isRecommended:m.IsRecommended,obsoleteMessage:m.ObsoleteMessage,icon:m.IsDefault?"star":m.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(f+"ReservedNames"))}getFields(d){return this.http.get(this.apiUrl(c),{params:{appid:this.context.appId.toString(),staticName:d}}).pipe((0,p.k)(C=>{if(C)for(const m of C){if(!m.Metadata)continue;const w=m.Metadata;w.merged={...w.All,...w[m.Type],...w[m.InputType]}}return C}))}getShareableFields(){return this.http.get(this.apiUrl(l),{params:{appid:this.context.appId.toString()}})}getShareableFieldsFor(d){return this.http.get(this.apiUrl(l),{params:{appid:this.context.appId.toString(),attributeId:d.toString()}})}addInheritedField(d,C,m,w){return this.http.post(this.apiUrl(f+"AddInheritedField"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:d.toString(),SourceType:C,SourceField:m,name:w}})}share(d,C=!0){return this.http.post(this.apiUrl(f+"Share"),null,{params:{appid:this.context.appId.toString(),attributeId:d.toString(),share:C}})}inherit(d,C){return this.http.post(this.apiUrl(f+"Inherit"),null,{params:{appid:this.context.appId.toString(),attributeId:d.toString(),inheritMetadataOf:C}})}reOrder(d,C){return this.http.post(this.apiUrl(f+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:C.Id.toString(),order:JSON.stringify(d)}})}setTitle(d,C){return this.http.post(this.apiUrl(S.O+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:C.Id.toString(),attributeId:d.Id.toString()}})}rename(d,C,m){return this.http.post(this.apiUrl(f+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:C.toString(),attributeId:d.toString(),newName:m}})}delete(d,C){if(d.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(f+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:C.Id.toString(),attributeId:d.Id.toString()}})}add(d,C){return this.http.post(this.apiUrl(f+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:C.toString(),Id:d.Id.toString(),Type:d.Type,InputType:d.InputType,StaticName:d.StaticName,IsTitle:d.IsTitle.toString(),Index:d.SortOrder.toString()}})}updateInputType(d,C,m){return this.http.post(this.apiUrl(f+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:d.toString(),field:C,inputType:m}})}static#t=this.\u0275fac=function(C){return new(C||v)(T.CoB(M.KK),T.CoB(E.e),T.CoB(b.es))};static#e=this.\u0275prov=T.wxM({token:v,factory:v.\u0275fac})}return v})()},4852:(A,k,a)=>{a.d(k,{O:()=>p.O,w:()=>T});var p=a(1106),S=a(5056),E=a(4896);let T=(()=>{class M{static#t=this.\u0275fac=function(c){return new(c||M)};static#e=this.\u0275mod=E.a4G({type:M});static#n=this.\u0275inj=E.s3X({imports:[S.MD]})}return M})()},1106:(A,k,a)=>{a.d(k,{O:()=>b});var p=a(4896);const E="area, base, br, col, embed, hr, img, input, link, meta, param, source, track, wbr".split(",").map(f=>f.trim().toLocaleLowerCase());class T{constructor(c,l,y,v,g,d,C){this.monaco=c,this.filename=l,this.snippets=d,this.tooltips=C,this.globalCache=this.createGlobalCache(c),this.defineThemes(this.globalCache,this.monaco),this.cachedValue=y,this.editorInstance=this.createInstance(this.monaco,l,y,v,g),this.completionItemProviders=this.addSnippets(this.monaco,this.editorInstance),this.resizeObserver=this.createResizeObserver(v,this.editorInstance),this.restoreState(this.globalCache,this.editorInstance),this.addEvents(this.editorInstance)}destroy(){this.saveState(this.globalCache,this.editorInstance),this.resizeObserver.disconnect(),this.completionItemProviders.forEach(c=>c.dispose()),this.jsTypingsLib?.dispose(),this.editorInstance.getModel().dispose(),this.editorInstance.dispose()}updateValue(c){this.cachedValue!==c&&(this.cachedValue=c,this.editorInstance.getModel().setValue(c))}focus(){this.editorInstance.focus()}onValueChange(c){this.valueChangedCallback=c}onFocus(c){this.focusedCallback=c}onBlur(c){this.blurredCallback=c}insertSnippet(c){this.editorInstance.getContribution("snippetController2").insert(c)}setSnippets(c){this.snippets=c}setTooltips(c){this.tooltips=c}setJsonSchema(c){const l=this.editorInstance.getModel().uri.toString(),y=this.monaco.languages.json.jsonDefaults.diagnosticsOptions,v=y.schemas?.some(C=>C.fileMatch[0]===l)??!1,g="link"===c?.type?{uri:c.value,fileMatch:[l]}:"raw"===c?.type?{uri:l,fileMatch:[l],schema:JSON.parse(c.value)}:void 0;if(!v&&!g)return;const d={...y,enableSchemaRequest:!0,schemas:v&&!g?y.schemas.filter(C=>C.fileMatch[0]!==l):v?y.schemas.map(C=>C.fileMatch[0]===l?g:C):[...y.schemas??[],g]};this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(d)}setJsonComments(c){if(!c)return;const l={...this.monaco.languages.json.jsonDefaults.diagnosticsOptions,comments:c};this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(l)}setJsDiagnostics(c){if(!c)return;const l={...this.monaco.languages.typescript.javascriptDefaults.getDiagnosticsOptions(),...c};this.monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions(l)}setJsTypings(c){c?this.jsTypingsLib=this.monaco.languages.typescript.javascriptDefaults.addExtraLib(c,`js-typings-${this.filename}`):this.jsTypingsLib?.dispose()}createGlobalCache(c){return null==c._2sxc&&(c._2sxc={themesAreDefined:!1,savedStates:{}}),c._2sxc}defineThemes(c,l){c.themesAreDefined||(c.themesAreDefined=!0,l.editor.defineTheme("2sxc-dark",{base:"vs-dark",inherit:!0,rules:[{token:"metatag.cs",foreground:"ffff00"}],colors:{}}))}createInstance(c,l,y,v,g){const d=c.editor.create(v,g),C=c.Uri.file(l),m=c.editor.createModel(y,void 0,C);return d.setModel(m),d}saveState(c,l){const y=l.getModel().uri.toString(),v=JSON.stringify(l.saveViewState());null==c.savedStates[y]?c.savedStates[y]={viewState:v}:c.savedStates[y].viewState=v}restoreState(c,l){const y=l.getModel().uri.toString(),v=c.savedStates[y];if(null==v)return;const g=JSON.parse(v.viewState);l.restoreViewState(g)}addSnippets(c,l){return[c.languages.registerCompletionItemProvider(l.getModel().getLanguageId(),{triggerCharacters:[">"],provideCompletionItems:(v,g)=>{if(l.getModel()!==v)return{suggestions:[]};const d=v.getValueInRange({startLineNumber:g.lineNumber,startColumn:1,endLineNumber:g.lineNumber,endColumn:g.column});if(">"!==d[d.length-1])return{suggestions:[]};const m=d.lastIndexOf("<");if(-1===m)return{suggestions:[]};const w=d.substring(m);let x=0;if(Array.from(w).forEach(B=>{'"'===B&&x++}),x%2!=0)return{suggestions:[]};if(w.startsWith("</"))return{suggestions:[]};if(w.indexOf(">")!==w.length-1)return{suggestions:[]};let G=w.indexOf(" ");if(-1===G&&(G=w.indexOf(">")),-1===G)return{suggestions:[]};const R=w.substring(1,G);return R?E.includes(R.toLocaleLowerCase())?{suggestions:[]}:/[a-zA-Z0-9_-]/.test(R)?{suggestions:[{label:`</${R}>`,kind:c.languages.CompletionItemKind.Snippet,insertText:`$0</${R}>`,insertTextRules:c.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:g.lineNumber,endLineNumber:g.lineNumber,startColumn:g.column,endColumn:g.column}}]}:{suggestions:[]}:{suggestions:[]}}}),c.languages.registerCompletionItemProvider(l.getModel().getLanguageId(),{provideCompletionItems:(v,g)=>{if(null==this.snippets||l.getModel()!==v)return{suggestions:[]};const d=v.getWordUntilPosition(g);return{suggestions:this.snippets.map(m=>m.content?{label:m.name,kind:c.languages.CompletionItemKind.Snippet,documentation:`${m.title??""}\n${m.help??""}\n${m.links??""}`,insertText:m.content,insertTextRules:c.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:g.lineNumber,endLineNumber:g.lineNumber,startColumn:d.startColumn,endColumn:d.endColumn}}:void 0).filter(m=>!!m)}}}),c.languages.registerHoverProvider(l.getModel().getLanguageId(),{provideHover:(v,g)=>{if(null==this.tooltips||l.getModel()!==v)return;const d=v.getWordAtPosition(g);if(!d)return;const C=this.tooltips.find(m=>m.Term===d.word);return C?{contents:C.Help.map(m=>({value:m})),range:{startLineNumber:g.lineNumber,endLineNumber:g.lineNumber,startColumn:d.startColumn,endColumn:d.endColumn}}:void 0}})]}createResizeObserver(c,l){const y=new ResizeObserver(()=>{l.layout()});return y.observe(c),y}addEvents(c){c.getModel().onDidChangeContent(()=>{const l=c.getModel().getValue();l!==this.cachedValue&&(this.cachedValue=l,this.valueChangedCallback?.(l))}),c.onDidFocusEditorWidget(()=>{this.focusedCallback?.()}),c.onDidBlurEditorWidget(()=>{this.blurredCallback?.()})}}const M=["editor"];let b=(()=>{class f{constructor(){this.autoFocus=!1,this.valueChanged=new p._w7,this.focused=new p._w7,this.blurred=new p._w7}ngAfterViewInit(){window.require.config({paths:{vs:["https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.46.0/min/vs"]}}),window.require(["vs/editor/editor.main"],l=>{this.monaco=l,this.createEditor(this.autoFocus)})}ngOnChanges(l){null!=l.filename&&null!=this.monacoInstance&&(this.monacoInstance.destroy(),this.createEditor(!0)),null!=l.value&&this.monacoInstance?.updateValue(this.value),null!=l.jsonSchema&&this.monacoInstance?.setJsonSchema(this.jsonSchema),null!=l.jsonComments&&this.monacoInstance?.setJsonComments(this.jsonComments),null!=l.snippets&&this.monacoInstance?.setSnippets(this.snippets),null!=l.tooltips&&this.monacoInstance?.setTooltips(this.tooltips),null!=l.jsTypings&&this.monacoInstance?.setJsTypings(this.jsTypings),null!=l.jsDiagnostics&&this.monacoInstance?.setJsDiagnostics(this.jsDiagnostics)}insertSnippet(l){this.monacoInstance?.insertSnippet(l),this.monacoInstance?.focus()}ngOnDestroy(){this.monacoInstance?.destroy()}createEditor(l){this.monacoInstance=new T(this.monaco,this.filename,this.value,this.editorRef.nativeElement,this.options,this.snippets,this.tooltips),this.monacoInstance.setJsonSchema(this.jsonSchema),this.monacoInstance.setJsonComments(this.jsonComments),this.monacoInstance.setJsTypings(this.jsTypings),this.monacoInstance.setJsDiagnostics(this.jsDiagnostics),this.monacoInstance.onValueChange(y=>{this.valueChanged.emit(y)}),this.monacoInstance.onFocus(()=>{this.focused.emit()}),this.monacoInstance.onBlur(()=>{this.blurred.emit()}),l&&this.monacoInstance.focus()}static#t=this.\u0275fac=function(y){return new(y||f)};static#e=this.\u0275cmp=p.In1({type:f,selectors:[["app-monaco-editor"]],viewQuery:function(y,v){if(1&y&&p.CC$(M,5),2&y){let g;p.wto(g=p.Gqi())&&(v.editorRef=g.first)}},inputs:{filename:"filename",value:"value",snippets:"snippets",tooltips:"tooltips",options:"options",jsonSchema:"jsonSchema",jsonComments:"jsonComments",jsTypings:"jsTypings",jsDiagnostics:"jsDiagnostics",autoFocus:"autoFocus"},outputs:{valueChanged:"valueChanged",focused:"focused",blurred:"blurred"},features:[p.SYr],decls:2,vars:0,consts:[[1,"editor"],["editor",""]],template:function(y,v){1&y&&p.wR5(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;overflow:hidden}.editor[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]})}return f})()},9084:(A,k,a)=>{a.d(k,{o:()=>v});var p=a(4896),S=a(5056),E=a(244);function T(g,d){1&g&&p.C_f(0)}function M(g,d){if(1&g&&(p.I0R(0,"mat-hint"),p.yuY(1,T,1,0,"ng-container",2),p.C$Y()),2&g){p.GaO();const C=p.Gew(4);p.yG2(1),p.E7m("ngTemplateOutlet",C)}}function b(g,d){1&g&&p.C_f(0)}function f(g,d){if(1&g&&(p.I0R(0,"mat-error"),p.yuY(1,b,1,0,"ng-container",2),p.C$Y()),2&g){p.GaO();const C=p.Gew(4);p.yG2(1),p.E7m("ngTemplateOutlet",C)}}function c(g,d){1&g&&p._Xx(0)}const l=g=>({"hint-box__short":g}),y=["*"];let v=(()=>{class g{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#t=this.\u0275fac=function(m){return new(m||g)};static#e=this.\u0275cmp=p.In1({type:g,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:y,decls:5,vars:4,consts:[[1,"hint-box",3,"ngClass","click"],["content",""],[4,"ngTemplateOutlet"]],template:function(m,w){if(1&m&&(p.kPM(),p.I0R(0,"div",0),p.qCj("click",function(){return w.toggleIsShort()}),p.yuY(1,M,2,1)(2,f,2,1),p.C$Y(),p.yuY(3,c,1,0,"ng-template",null,1,p.gJz)),2&m){let x;p.E7m("ngClass",p.S45(2,l,w.isShort)),p.yG2(1),p.C0Y(1,!1===(x=w.isError)?1:!0===x?2:-1)}},dependencies:[S.QF,S.XV,E.MX,E.wJ],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return g})()},2564:(A,k,a)=>{a.d(k,{U:()=>E});var p=a(5200),S=a(4896);let E=(()=>{class T{constructor(b){this.globalConfigService=b}onClick(b){(navigator.platform.match("Mac")?b.metaKey:b.ctrlKey)&&b.shiftKey&&b.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}static#t=this.\u0275fac=function(f){return new(f||T)(S.GI1(p.Sq))};static#e=this.\u0275dir=S.Sc5({type:T,selectors:[["","appToggleDebug",""]],hostBindings:function(f,c){1&f&&S.qCj("click",function(y){return c.onClick(y)})}})}return T})()},48:(A,k,a)=>{a.d(k,{K:()=>E});var p=a(4896),S=a(168);let E=(()=>{class T{constructor(b){this.sanitizer=b}transform(b){return this.sanitizer.bypassSecurityTrustHtml(b)}static#t=this.\u0275fac=function(f){return new(f||T)(p.GI1(S.mI,16))};static#e=this.\u0275pipe=p.UTH({name:"safeHtml",type:T,pure:!0})}return T})()},1224:(A,k,a)=>{a.d(k,{C:()=>E});var p=a(1332),S=a(8752);function E(T){return{loader:{provide:S._E,useFactory:T,deps:[p.KK]},defaultLanguage:"en",isolate:!0}}},8228:(A,k,a)=>{a.d(k,{A:()=>E});var p=a(1672),S=a(8916);class E{constructor(M,b,f){this.http=M,this.prefix=b,this.suffix=f}getTranslation(M){return this.http.get(`${this.prefix}${M}${this.suffix}`).pipe((0,p.a)(b=>(console.warn(`Translation: Failed to get language '${M}' from ${this.prefix}`,b),(0,S.of)({}))))}}}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.04.00/dist/ng-edit/projects_eav-ui_src_app_code-editor_code-editor_module_ts-projects_eav-ui_src_app_shared_comp-2b2737.8aec1457af9a8de0.js.map