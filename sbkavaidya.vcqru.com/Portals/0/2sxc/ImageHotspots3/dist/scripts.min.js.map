{"version":3,"file":"scripts.min.js","mappings":"mGAGA,2BAEqBA,SAASC,iBAAiB,sBAChCC,SAAQ,SAACC,EAAqBC,GAErCD,EAAOE,UAAUC,SAAS,oBAC5BH,EAAOI,iBAAiB,SAAS,WAG/B,GAAGJ,EAAOE,UAAUC,SAAS,mBAC3B,OAAO,EAIT,IAAME,EAAKC,MAELC,EAAcP,EAAOQ,QAAQ,aAE7BC,EAAWC,SAASH,EAAYI,QAAQF,UACxCG,EAAWF,SAASH,EAAYI,QAAQC,UACxCC,EAAON,EAAYI,QAAQE,KAG3BC,EAASd,EAAOe,wBAGhBC,EAAcT,EAAYI,QAAQM,YAClCC,EAAcX,EAAYI,QAAQQ,YAGlCC,EAAIf,EAAEgB,QAAUP,EAAOQ,KAAOZ,SAASM,GACvCO,EAAIlB,EAAEmB,QAAUV,EAAOW,IAAMf,SAASQ,GACtCQ,EAAWN,EAAIN,EAAOa,MAAQ,IAC9BC,EAAWL,EAAIT,EAAOe,OAAS,IAGrCC,MAAMrB,GAAUsB,IAAIC,IAAI,CACtBC,OAAQ,MACRC,OAAQ,CACNtB,SAAUA,EACVuB,OAAQtB,EACRuB,OAAQ,WACRC,QAAS,CACPC,EAAGC,KAAKC,MAAiB,IAAXd,GAAkB,IAChCe,EAAGF,KAAKC,MAAiB,IAAXZ,GAAkB,WAOxC5B,EAAOE,UAAUwC,IAAI,wB,uRCrD3B,EAAQ,KAER,aACA,SAGMC,EAAUC,OACE,QAAlB,EAAAD,EAAOE,mBAAW,QAAlBF,EAAOE,YAAgB,IACS,QAAhC,KAAAF,EAAOE,aAAYC,qBAAa,UAAbA,cAAkB,EAAAA,eACN,QAA/B,KAAAH,EAAOE,aAAYE,oBAAY,UAAZA,aAEnB,SAA4B,G,IAAEC,EAAS,YAAEC,EAAO,UAC1CC,EAAgB,EAAH,KACZD,GAAO,CACVE,GAAI,CACFC,KAAM,SAACC,EAAeC,G,MACdC,EAAM1D,SAAS2D,cAAc,UAAGF,EAAMG,IAAG,SAEzCC,EAA6C,QAAlC,EAAAH,MAAAA,OAAG,EAAHA,EAAKxC,wBAAwBY,aAAK,QAAI,EAEjDgC,EAA4B9D,SAAS2D,cAAc,UAAGF,EAAMG,IAAG,6BAC1B,IAAvCE,MAAAA,OAAY,EAAZA,EAAcC,aAAa,YAC7BD,EAAaE,MAAMC,SAAW,UAAGvB,KAAKwB,MAAML,GAAS,OAEvD,IAAMM,EAA8BnE,SAAS2D,cAAc,UAAGF,EAAMG,IAAG,+BACnEO,IACFA,EAAeH,MAAMI,QAAU,UAIvC,IAAAlB,cAAa,CAAEC,UAAS,EAAEC,QAASC,O,kDCnBrC,wBAA6B,G,IAAEF,EAAS,YAAEC,EAAO,UAG/CiB,SAASC,KAAK,WAAInB,EAAS,KAAKC,MCd9BmB,EAA2B,GAG/B,SAASC,EAAoB5D,GAE5B,IAAI6D,EAAeF,EAAyB3D,GAC5C,QAAqB8D,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASL,EAAyB3D,GAAY,CAGjD+D,QAAS,IAOV,OAHAE,EAAoBjE,GAAUkE,KAAKF,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,QCpBfH,EAAoBO,EAAKJ,IACH,oBAAXK,QAA0BA,OAAOC,aAC1CC,OAAOC,eAAeR,EAASK,OAAOC,YAAa,CAAEG,MAAO,WAE7DF,OAAOC,eAAeR,EAAS,aAAc,CAAES,OAAO,KCF7BZ,EAAoB,M","sources":["webpack://app-imagehotspots3/./src/ts/admin.ts","webpack://app-imagehotspots3/./src/ts/index.ts","webpack://app-imagehotspots3/./src/ts/lib-2sxc-fancybox.ts","webpack://app-imagehotspots3/webpack/bootstrap","webpack://app-imagehotspots3/webpack/runtime/make namespace object","webpack://app-imagehotspots3/webpack/startup"],"sourcesContent":["import { CommandNames } from '@2sic.com/2sxc-typings';\r\n\r\n/** Loader function for our Hotspot Admin */\r\nexport function activateAdmin() {\r\n  // Hotspot image where marker should be added\r\n  let hotSpotImage = document.querySelectorAll('.hotspot3-js-image');\r\n  hotSpotImage.forEach((hsElem: HTMLElement, index) => {\r\n    // add click listener only once\r\n    if(!hsElem.classList.contains('added-listener')) {\r\n      hsElem.addEventListener('click', () => {  \r\n        debugger;\r\n        // if clicked element is hotspot - do nothing\r\n        if(hsElem.classList.contains('hotspot3-marker')) {\r\n          return false;\r\n        }\r\n\r\n        // get all needed information to create new hotspot\r\n        const e = (event as MouseEvent);\r\n        // Find the tag with class 'hotspots' because it contains more positioning data\r\n        const tagWithData = hsElem.closest(\".hotspots\") as HTMLElement;\r\n\r\n        const moduleId = parseInt(tagWithData.dataset.moduleId);\r\n        const entityId = parseInt(tagWithData.dataset.entityId);\r\n        const guid = tagWithData.dataset.guid;\r\n\r\n        // get image dimensions\r\n        const bounds = hsElem.getBoundingClientRect();\r\n\r\n        // get hotspot icon offset\r\n        const iconOffsetX = tagWithData.dataset.iconoffsetX;\r\n        const iconOffsetY = tagWithData.dataset.iconoffsetY;\r\n\r\n        // get exact position where hotspor marker shoul be added\r\n        const x = e.clientX - bounds.left - parseInt(iconOffsetX);\r\n        const y = e.clientY - bounds.top - parseInt(iconOffsetY);\r\n        const xPercent = x / bounds.width * 100;\r\n        const yPercent = y / bounds.height * 100;\r\n        \r\n        // open 2sxc mask with prefilled hotpot coordinates\r\n        $2sxc(moduleId).cms.run({\r\n          action: CommandNames.new,\r\n          params: {\r\n            entityId: entityId,\r\n            parent: guid,\r\n            fields: 'Hotspots',\r\n            prefill: {\r\n              X: Math.round(xPercent * 100) / 100,\r\n              Y: Math.round(yPercent * 100) / 100 \r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      // added so click listener is only added once\r\n      hsElem.classList.add('added-listener');\r\n    }\r\n  })\r\n}","\r\nrequire('../scss/_style.scss');\r\n\r\nimport { activateAdmin } from './admin';\r\nimport { initFancybox } from './lib-2sxc-fancybox';\r\nimport { FancyboxOptions } from './lib-2sxc-fancybox-options';\r\n\r\nconst winAny = (window as any);\r\nwinAny.appHotspot3 ??= {};\r\nwinAny.appHotspot3.activateAdmin ??= activateAdmin;\r\nwinAny.appHotspot3.initFancybox ??= initFancyboxCustom;\r\n\r\nfunction initFancyboxCustom({ attribute, options } : { attribute: string, options: FancyboxOptions }) {\r\n  let customOptions = {\r\n    ...options,\r\n    on: {  \r\n      done: (fancybox: any, slide: any) => {\r\n        const img = document.querySelector(`${slide.src} img`);\r\n        // if (img == null) return;\r\n        const imgWidth = img?.getBoundingClientRect().width ?? 0;\r\n\r\n        const fancyboxText: HTMLElement = document.querySelector(`${slide.src} .hotspot3-fancybox-text`);\r\n        if (fancyboxText?.hasAttribute('style') == true)\r\n          fancyboxText.style.maxWidth = `${Math.floor(imgWidth)}px`;\r\n\r\n        const hotspotContent: HTMLElement = document.querySelector(`${slide.src}.hotspot3-fancybox-content`);\r\n        if (hotspotContent)\r\n          hotspotContent.style.opacity = \"1\";\r\n      }\r\n    }\r\n  }\r\n  initFancybox({ attribute, options: customOptions })\r\n}","declare let Fancybox: any;\r\nimport { FancyboxOptions } from './lib-2sxc-fancybox-options';\r\n\r\n/*\r\n  This is a shared code used in various 2sxc apps. Make sure that they are in sync, so if you improve it, improve all 2sxc apps which use this. \r\n  ATM they are:\r\n  - Gallery7\r\n  - Content\r\n  The master with the newest / best version must always be the Gallery7, the others should then get a fresh copy.\r\n  Because this is shared, all parameters like DOM-IDs etc. must be provided in the Init-call that it can work across apps\r\n*/ \r\n\r\nexport function initFancybox({ attribute, options } : { attribute: string, options: FancyboxOptions }) {\r\n  // console.log(attribute);\r\n  // console.log(options);\r\n  Fancybox.bind(`[${attribute}]`, options);\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(294);\n"],"names":["document","querySelectorAll","forEach","hsElem","index","classList","contains","addEventListener","e","event","tagWithData","closest","moduleId","parseInt","dataset","entityId","guid","bounds","getBoundingClientRect","iconOffsetX","iconoffsetX","iconOffsetY","iconoffsetY","x","clientX","left","y","clientY","top","xPercent","width","yPercent","height","$2sxc","cms","run","action","params","parent","fields","prefill","X","Math","round","Y","add","winAny","window","appHotspot3","activateAdmin","initFancybox","attribute","options","customOptions","on","done","fancybox","slide","img","querySelector","src","imgWidth","fancyboxText","hasAttribute","style","maxWidth","floor","hotspotContent","opacity","Fancybox","bind","__webpack_module_cache__","__webpack_require__","cachedModule","undefined","exports","module","__webpack_modules__","call","r","Symbol","toStringTag","Object","defineProperty","value"],"sourceRoot":""}